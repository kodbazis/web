[
   {
      "timestamp":132.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":137.166,
      "fileName":"index.php",
      "content":"<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":137.849,
      "fileName":"index.php",
      "content":"<?php\n/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":138.566,
      "fileName":"index.php",
      "content":"<?php\n/** */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":138.916,
      "fileName":"index.php",
      "content":"<?php\n/* */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":139.083,
      "fileName":"index.php",
      "content":"<?php\n/* */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":139.849,
      "fileName":"index.php",
      "content":"<?php\n/*\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":139.866,
      "fileName":"index.php",
      "content":"<?php\n/*\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":140.25,
      "fileName":"index.php",
      "content":"<?php\n/*\n\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":140.65,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":141.416,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":142.233,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":180.9,
      "fileName":"schema.sql",
      "content":"-- phpMyAdmin SQL Dump\n-- version 5.1.0\n-- https://www.phpmyadmin.net/\n--\n-- Gép: pelda_host:3306\n-- Létrehozás ideje: 2021. Ápr 22. 05:56\n-- Kiszolgáló verziója: 8.0.24\n-- PHP verzió: 7.4.16\n\nSET SQL_MODE = \"NO_AUTO_VALUE_ON_ZERO\";\nSTART TRANSACTION;\nSET time_zone = \"+00:00\";\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8mb4 */;\n\n--\n-- Adatbázis: `test_db`\n--\n\n-- --------------------------------------------------------\n\n--\n-- Tábla szerkezet ehhez a táblához `cities`\n--\n\nCREATE TABLE `cities` (\n  `id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `countryId` int NOT NULL,\n  `district` varchar(255) NOT NULL,\n  `population` int NOT NULL,\n  `isCapital` tinyint(1) NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\n--\n-- A tábla adatainak kiíratása `cities`\n--\n\nINSERT INTO `cities` (`id`, `name`, `countryId`, `district`, `population`, `isCapital`) VALUES\n(1, 'Kabul', 2, 'Kabol', 1780000, 1),\n(2, 'Qandahar', 2, 'Qandahar', 237500, 0),\n(3, 'Herat', 2, 'Herat', 186800, 0),\n(4, 'Mazar-e-Sharif', 2, 'Balkh', 127800, 0),\n(5, 'Amsterdam', 159, 'Noord-Holland', 731200, 1),\n(6, 'Rotterdam', 159, 'Zuid-Holland', 593321, 0),\n(7, 'Haag', 159, 'Zuid-Holland', 440900, 0),\n(8, 'Utrecht', 159, 'Utrecht', 234323, 0),\n(9, 'Eindhoven', 159, 'Noord-Brabant', 201843, 0),\n(10, 'Tilburg', 159, 'Noord-Brabant', 193238, 0),\n(11, 'Groningen', 159, 'Groningen', 172701, 0),\n(12, 'Breda', 159, 'Noord-Brabant', 160398, 0),\n(13, 'Apeldoorn', 159, 'Gelderland', 153491, 0),\n(14, 'Nijmegen', 159, 'Gelderland', 152463, 0),\n(15, 'Enschede', 159, 'Overijssel', 149544, 0),\n(16, 'Haarlem', 159, 'Noord-Holland', 148772, 0),\n(17, 'Almere', 159, 'Flevoland', 142465, 0),\n(18, 'Arnhem', 159, 'Gelderland', 138020, 0),\n(19, 'Zaanstad', 159, 'Noord-Holland', 135621, 0),\n(20, '´s-Hertogenbosch', 159, 'Noord-Brabant', 129170, 0),\n(21, 'Amersfoort', 159, 'Utrecht', 126270, 0),\n(22, 'Maastricht', 159, 'Limburg', 122087, 0),\n(23, 'Dordrecht', 159, 'Zuid-Holland', 119811, 0),\n(24, 'Leiden', 159, 'Zuid-Holland', 117196, 0),\n(25, 'Haarlemmermeer', 159, 'Noord-Holland', 110722, 0),\n(26, 'Zoetermeer', 159, 'Zuid-Holland', 110214, 0),\n(27, 'Emmen', 159, 'Drenthe', 105853, 0),\n(28, 'Zwolle', 159, 'Overijssel', 105819, 0),\n(29, 'Ede', 159, 'Gelderland', 101574, 0),\n(30, 'Delft', 159, 'Zuid-Holland', 95268, 0),\n(31, 'Heerlen', 159, 'Limburg', 95052, 0),\n(32, 'Alkmaar', 159, 'Noord-Holland', 92713, 0),\n(33, 'Willemstad', 7, 'Curaçao', 2345, 1),\n(34, 'Tirana', 5, 'Tirana', 270000, 1),\n(35, 'Alger', 62, 'Alger', 2168000, 1),\n(36, 'Oran', 62, 'Oran', 609823, 0),\n(37, 'Constantine', 62, 'Constantine', 443727, 0),\n(38, 'Annaba', 62, 'Annaba', 222518, 0),\n(39, 'Batna', 62, 'Batna', 183377, 0),\n(40, 'Sétif', 62, 'Sétif', 179055, 0),\n(41, 'Sidi Bel Abbès', 62, 'Sidi Bel Abbès', 153106, 0),\n(42, 'Skikda', 62, 'Skikda', 128747, 0),\n(43, 'Biskra', 62, 'Biskra', 128281, 0),\n(44, 'Blida (el-Boulaida)', 62, 'Blida', 127284, 0),\n(45, 'Béjaïa', 62, 'Béjaïa', 117162, 0),\n(46, 'Mostaganem', 62, 'Mostaganem', 115212, 0),\n(47, 'Tébessa', 62, 'Tébessa', 112007, 0),\n(48, 'Tlemcen (Tilimsen)', 62, 'Tlemcen', 110242, 0),\n(49, 'Béchar', 62, 'Béchar', 107311, 0),\n(50, 'Tiaret', 62, 'Tiaret', 100118, 0),\n(51, 'Ech-Chleff (el-Asnam)', 62, 'Chlef', 96794, 0),\n(52, 'Ghardaïa', 62, 'Ghardaïa', 89415, 0),\n(53, 'Tafuna', 11, 'Tutuila', 5200, 0),\n(54, 'Fagatogo', 11, 'Tutuila', 2323, 1),\n(55, 'Andorra la Vella', 6, 'Andorra la Vella', 21189, 1),\n(56, 'Luanda', 3, 'Luanda', 2022000, 1),\n(57, 'Huambo', 3, 'Huambo', 163100, 0),\n(58, 'Lobito', 3, 'Benguela', 130000, 0),\n(59, 'Benguela', 3, 'Benguela', 128300, 0),\n(60, 'Namibe', 3, 'Namibe', 118200, 0),\n(61, 'South Hill', 4, '–', 961, 0),\n(62, 'The Valley', 4, '–', 595, 1),\n(63, 'Saint John´s', 14, 'St John', 24000, 1),\n(64, 'Dubai', 8, 'Dubai', 669181, 0),\n(65, 'Abu Dhabi', 8, 'Abu Dhabi', 398695, 1),\n(66, 'Sharja', 8, 'Sharja', 320095, 0),\n(67, 'al-Ayn', 8, 'Abu Dhabi', 225970, 0),\n(68, 'Ajman', 8, 'Ajman', 114395, 0),\n(69, 'Buenos Aires', 9, 'Distrito Federal', 2982146, 1),\n(70, 'La Matanza', 9, 'Buenos Aires', 1266461, 0),\n(71, 'Córdoba', 9, 'Córdoba', 1157507, 0),\n(72, 'Rosario', 9, 'Santa Fé', 907718, 0),\n(73, 'Lomas de Zamora', 9, 'Buenos Aires', 622013, 0),\n(74, 'Quilmes', 9, 'Buenos Aires', 559249, 0),\n(75, 'Almirante Brown', 9, 'Buenos Aires', 538918, 0),\n(76, 'La Plata', 9, 'Buenos Aires', 521936, 0),\n(77, 'Mar del Plata', 9, 'Buenos Aires', 512880, 0),\n(78, 'San Miguel de Tucumán', 9, 'Tucumán', 470809, 0),\n(79, 'Lanús', 9, 'Buenos Aires', 469735, 0),\n(80, 'Merlo', 9, 'Buenos Aires', 463846, 0),\n(81, 'General San Martín', 9, 'Buenos Aires', 422542, 0),\n(82, 'Salta', 9, 'Salta', 367550, 0),\n(83, 'Moreno', 9, 'Buenos Aires', 356993, 0),\n(84, 'Santa Fé', 9, 'Santa Fé', 353063, 0),\n(85, 'Avellaneda', 9, 'Buenos Aires', 353046, 0),\n(86, 'Tres de Febrero', 9, 'Buenos Aires', 352311, 0),\n(87, 'Morón', 9, 'Buenos Aires', 349246, 0),\n(88, 'Florencio Varela', 9, 'Buenos Aires', 315432, 0),\n(89, 'San Isidro', 9, 'Buenos Aires', 306341, 0),\n(90, 'Tigre', 9, 'Buenos Aires', 296226, 0),\n(91, 'Malvinas Argentinas', 9, 'Buenos Aires', 290335, 0),\n(92, 'Vicente López', 9, 'Buenos Aires', 288341, 0),\n(93, 'Berazategui', 9, 'Buenos Aires', 276916, 0),\n(94, 'Corrientes', 9, 'Corrientes', 258103, 0),\n(95, 'San Miguel', 9, 'Buenos Aires', 248700, 0),\n(96, 'Bahía Blanca', 9, 'Buenos Aires', 239810, 0),\n(97, 'Esteban Echeverría', 9, 'Buenos Aires', 235760, 0),\n(98, 'Resistencia', 9, 'Chaco', 229212, 0),\n(99, 'José C. Paz', 9, 'Buenos Aires', 221754, 0),\n(100, 'Paraná', 9, 'Entre Rios', 207041, 0),\n(101, 'Godoy Cruz', 9, 'Mendoza', 206998, 0),\n(102, 'Posadas', 9, 'Misiones', 201273, 0),\n(103, 'Guaymallén', 9, 'Mendoza', 200595, 0),\n(104, 'Santiago del Estero', 9, 'Santiago del Estero', 189947, 0),\n(105, 'San Salvador de Jujuy', 9, 'Jujuy', 178748, 0),\n(106, 'Hurlingham', 9, 'Buenos Aires', 170028, 0),\n(107, 'Neuquén', 9, 'Neuquén', 167296, 0),\n(108, 'Ituzaingó', 9, 'Buenos Aires', 158197, 0),\n(109, 'San Fernando', 9, 'Buenos Aires', 153036, 0),\n(110, 'Formosa', 9, 'Formosa', 147636, 0),\n(111, 'Las Heras', 9, 'Mendoza', 145823, 0),\n(112, 'La Rioja', 9, 'La Rioja', 138117, 0),\n(113, 'San Fernando del Valle de Cata', 9, 'Catamarca', 134935, 0),\n(114, 'Río Cuarto', 9, 'Córdoba', 134355, 0),\n(115, 'Comodoro Rivadavia', 9, 'Chubut', 124104, 0),\n(116, 'Mendoza', 9, 'Mendoza', 123027, 0),\n(117, 'San Nicolás de los Arroyos', 9, 'Buenos Aires', 119302, 0),\n(118, 'San Juan', 9, 'San Juan', 119152, 0),\n(119, 'Escobar', 9, 'Buenos Aires', 116675, 0),\n(120, 'Concordia', 9, 'Entre Rios', 116485, 0),\n(121, 'Pilar', 9, 'Buenos Aires', 113428, 0),\n(122, 'San Luis', 9, 'San Luis', 110136, 0),\n(123, 'Ezeiza', 9, 'Buenos Aires', 99578, 0),\n(124, 'San Rafael', 9, 'Mendoza', 94651, 0),\n(125, 'Tandil', 9, 'Buenos Aires', 91101, 0),\n(126, 'Yerevan', 10, 'Yerevan', 1248700, 1),\n(127, 'Gjumri', 10, 'Širak', 211700, 0),\n(128, 'Vanadzor', 10, 'Lori', 172700, 0),\n(129, 'Oranjestad', 1, '–', 29034, 1),\n(130, 'Sydney', 15, 'New South Wales', 3276207, 0),\n(131, 'Melbourne', 15, 'Victoria', 2865329, 0),\n(132, 'Brisbane', 15, 'Queensland', 1291117, 0),\n(133, 'Perth', 15, 'West Australia', 1096829, 0),\n(134, 'Adelaide', 15, 'South Australia', 978100, 0),\n(135, 'Canberra', 15, 'Capital Region', 322723, 1),\n(136, 'Gold Coast', 15, 'Queensland', 311932, 0),\n(137, 'Newcastle', 15, 'New South Wales', 270324, 0),\n(138, 'Central Coast', 15, 'New South Wales', 227657, 0),\n(139, 'Wollongong', 15, 'New South Wales', 219761, 0),\n(140, 'Hobart', 15, 'Tasmania', 126118, 0),\n(141, 'Geelong', 15, 'Victoria', 125382, 0),\n(142, 'Townsville', 15, 'Queensland', 109914, 0),\n(143, 'Cairns', 15, 'Queensland', 92273, 0),\n(144, 'Baku', 17, 'Baki', 1787800, 1),\n(145, 'Gäncä', 17, 'Gäncä', 299300, 0),\n(146, 'Sumqayit', 17, 'Sumqayit', 283000, 0),\n(147, 'Mingäçevir', 17, 'Mingäçevir', 93900, 0),\n(148, 'Nassau', 25, 'New Providence', 172000, 1),\n(149, 'al-Manama', 24, 'al-Manama', 148000, 1),\n(150, 'Dhaka', 22, 'Dhaka', 3612850, 1),\n(151, 'Chittagong', 22, 'Chittagong', 1392860, 0),\n(152, 'Khulna', 22, 'Khulna', 663340, 0),\n(153, 'Rajshahi', 22, 'Rajshahi', 294056, 0),\n(154, 'Narayanganj', 22, 'Dhaka', 202134, 0),\n(155, 'Rangpur', 22, 'Rajshahi', 191398, 0),\n(156, 'Mymensingh', 22, 'Dhaka', 188713, 0),\n(157, 'Barisal', 22, 'Barisal', 170232, 0),\n(158, 'Tungi', 22, 'Dhaka', 168702, 0),\n(159, 'Jessore', 22, 'Khulna', 139710, 0),\n(160, 'Comilla', 22, 'Chittagong', 135313, 0),\n(161, 'Nawabganj', 22, 'Rajshahi', 130577, 0),\n(162, 'Dinajpur', 22, 'Rajshahi', 127815, 0),\n(163, 'Bogra', 22, 'Rajshahi', 120170, 0),\n(164, 'Sylhet', 22, 'Sylhet', 117396, 0),\n(165, 'Brahmanbaria', 22, 'Chittagong', 109032, 0),\n(166, 'Tangail', 22, 'Dhaka', 106004, 0),\n(167, 'Jamalpur', 22, 'Dhaka', 103556, 0),\n(168, 'Pabna', 22, 'Rajshahi', 103277, 0),\n(169, 'Naogaon', 22, 'Rajshahi', 101266, 0),\n(170, 'Sirajganj', 22, 'Rajshahi', 99669, 0),\n(171, 'Narsinghdi', 22, 'Dhaka', 98342, 0),\n(172, 'Saidpur', 22, 'Rajshahi', 96777, 0),\n(173, 'Gazipur', 22, 'Dhaka', 96717, 0),\n(174, 'Bridgetown', 32, 'St Michael', 6070, 1),\n(175, 'Antwerpen', 19, 'Antwerpen', 446525, 0),\n(176, 'Gent', 19, 'East Flanderi', 224180, 0),\n(177, 'Charleroi', 19, 'Hainaut', 200827, 0),\n(178, 'Liège', 19, 'Liège', 185639, 0),\n(179, 'Bruxelles [Brussel]', 19, 'Bryssel', 133859, 1),\n(180, 'Brugge', 19, 'West Flanderi', 116246, 0),\n(181, 'Schaerbeek', 19, 'Bryssel', 105692, 0),\n(182, 'Namur', 19, 'Namur', 105419, 0),\n(183, 'Mons', 19, 'Hainaut', 90935, 0),\n(184, 'Belize City', 28, 'Belize City', 55810, 0),\n(185, 'Belmopan', 28, 'Cayo', 7105, 1),\n(186, 'Cotonou', 20, 'Atlantique', 536827, 0),\n(187, 'Porto-Novo', 20, 'Ouémé', 194000, 1),\n(188, 'Djougou', 20, 'Atacora', 134099, 0),\n(189, 'Parakou', 20, 'Borgou', 103577, 0),\n(190, 'Saint George', 29, 'Saint George´s', 1800, 0),\n(191, 'Hamilton', 29, 'Hamilton', 1200, 1),\n(192, 'Thimphu', 34, 'Thimphu', 22000, 1),\n(193, 'Santa Cruz de la Sierra', 30, 'Santa Cruz', 935361, 0),\n(194, 'La Paz', 30, 'La Paz', 758141, 1),\n(195, 'El Alto', 30, 'La Paz', 534466, 0),\n(196, 'Cochabamba', 30, 'Cochabamba', 482800, 0),\n(197, 'Oruro', 30, 'Oruro', 223553, 0),\n(198, 'Sucre', 30, 'Chuquisaca', 178426, 0),\n(199, 'Potosí', 30, 'Potosí', 140642, 0),\n(200, 'Tarija', 30, 'Tarija', 125255, 0),\n(201, 'Sarajevo', 26, 'Federaatio', 360000, 1),\n(202, 'Banja Luka', 26, 'Republika Srpska', 143079, 0),\n(203, 'Zenica', 26, 'Federaatio', 96027, 0),\n(204, 'Gaborone', 36, 'Gaborone', 213017, 1),\n(205, 'Francistown', 36, 'Francistown', 101805, 0),\n(206, 'São Paulo', 31, 'São Paulo', 9968485, 0),\n(207, 'Rio de Janeiro', 31, 'Rio de Janeiro', 5598953, 0),\n(208, 'Salvador', 31, 'Bahia', 2302832, 0),\n(209, 'Belo Horizonte', 31, 'Minas Gerais', 2139125, 0),\n(210, 'Fortaleza', 31, 'Ceará', 2097757, 0),\n(211, 'Brasília', 31, 'Distrito Federal', 1969868, 1),\n(212, 'Curitiba', 31, 'Paraná', 1584232, 0),\n(213, 'Recife', 31, 'Pernambuco', 1378087, 0),\n(214, 'Porto Alegre', 31, 'Rio Grande do Sul', 1314032, 0),\n(215, 'Manaus', 31, 'Amazonas', 1255049, 0),\n(216, 'Belém', 31, 'Pará', 1186926, 0),\n(217, 'Guarulhos', 31, 'São Paulo', 1095874, 0),\n(218, 'Goiânia', 31, 'Goiás', 1056330, 0),\n(219, 'Campinas', 31, 'São Paulo', 950043, 0),\n(220, 'São Gonçalo', 31, 'Rio de Janeiro', 869254, 0),\n(221, 'Nova Iguaçu', 31, 'Rio de Janeiro', 862225, 0),\n(222, 'São Luís', 31, 'Maranhão', 837588, 0),\n(223, 'Maceió', 31, 'Alagoas', 786288, 0),\n(224, 'Duque de Caxias', 31, 'Rio de Janeiro', 746758, 0),\n(225, 'São Bernardo do Campo', 31, 'São Paulo', 723132, 0),\n(226, 'Teresina', 31, 'Piauí', 691942, 0),\n(227, 'Natal', 31, 'Rio Grande do Norte', 688955, 0),\n(228, 'Osasco', 31, 'São Paulo', 659604, 0),\n(229, 'Campo Grande', 31, 'Mato Grosso do Sul', 649593, 0),\n(230, 'Santo André', 31, 'São Paulo', 630073, 0),\n(231, 'João Pessoa', 31, 'Paraíba', 584029, 0),\n(232, 'Jaboatão dos Guararapes', 31, 'Pernambuco', 558680, 0),\n(233, 'Contagem', 31, 'Minas Gerais', 520801, 0),\n(234, 'São José dos Campos', 31, 'São Paulo', 515553, 0),\n(235, 'Uberlândia', 31, 'Minas Gerais', 487222, 0),\n(236, 'Feira de Santana', 31, 'Bahia', 479992, 0),\n(237, 'Ribeirão Preto', 31, 'São Paulo', 473276, 0),\n(238, 'Sorocaba', 31, 'São Paulo', 466823, 0),\n(239, 'Niterói', 31, 'Rio de Janeiro', 459884, 0),\n(240, 'Cuiabá', 31, 'Mato Grosso', 453813, 0),\n(241, 'Juiz de Fora', 31, 'Minas Gerais', 450288, 0),\n(242, 'Aracaju', 31, 'Sergipe', 445555, 0),\n(243, 'São João de Meriti', 31, 'Rio de Janeiro', 440052, 0),\n(244, 'Londrina', 31, 'Paraná', 432257, 0),\n(245, 'Joinville', 31, 'Santa Catarina', 428011, 0),\n(246, 'Belford Roxo', 31, 'Rio de Janeiro', 425194, 0),\n(247, 'Santos', 31, 'São Paulo', 408748, 0),\n(248, 'Ananindeua', 31, 'Pará', 400940, 0),\n(249, 'Campos dos Goytacazes', 31, 'Rio de Janeiro', 398418, 0),\n(250, 'Mauá', 31, 'São Paulo', 375055, 0),\n(251, 'Carapicuíba', 31, 'São Paulo', 357552, 0),\n(252, 'Olinda', 31, 'Pernambuco', 354732, 0),\n(253, 'Campina Grande', 31, 'Paraíba', 352497, 0),\n(254, 'São José do Rio Preto', 31, 'São Paulo', 351944, 0),\n(255, 'Caxias do Sul', 31, 'Rio Grande do Sul', 349581, 0),\n(256, 'Moji das Cruzes', 31, 'São Paulo', 339194, 0),\n(257, 'Diadema', 31, 'São Paulo', 335078, 0),\n(258, 'Aparecida de Goiânia', 31, 'Goiás', 324662, 0),\n(259, 'Piracicaba', 31, 'São Paulo', 319104, 0),\n(260, 'Cariacica', 31, 'Espírito Santo', 319033, 0),\n(261, 'Vila Velha', 31, 'Espírito Santo', 318758, 0),\n(262, 'Pelotas', 31, 'Rio Grande do Sul', 315415, 0),\n(263, 'Bauru', 31, 'São Paulo', 313670, 0),\n(264, 'Porto Velho', 31, 'Rondônia', 309750, 0),\n(265, 'Serra', 31, 'Espírito Santo', 302666, 0),\n(266, 'Betim', 31, 'Minas Gerais', 302108, 0),\n(267, 'Jundíaí', 31, 'São Paulo', 296127, 0),\n(268, 'Canoas', 31, 'Rio Grande do Sul', 294125, 0),\n(269, 'Franca', 31, 'São Paulo', 290139, 0),\n(270, 'São Vicente', 31, 'São Paulo', 286848, 0),\n(271, 'Maringá', 31, 'Paraná', 286461, 0),\n(272, 'Montes Claros', 31, 'Minas Gerais', 286058, 0),\n(273, 'Anápolis', 31, 'Goiás', 282197, 0),\n(274, 'Florianópolis', 31, 'Santa Catarina', 281928, 0),\n(275, 'Petrópolis', 31, 'Rio de Janeiro', 279183, 0),\n(276, 'Itaquaquecetuba', 31, 'São Paulo', 270874, 0),\n(277, 'Vitória', 31, 'Espírito Santo', 270626, 0),\n(278, 'Ponta Grossa', 31, 'Paraná', 268013, 0),\n(279, 'Rio Branco', 31, 'Acre', 259537, 0),\n(280, 'Foz do Iguaçu', 31, 'Paraná', 259425, 0),\n(281, 'Macapá', 31, 'Amapá', 256033, 0),\n(282, 'Ilhéus', 31, 'Bahia', 254970, 0),\n(283, 'Vitória da Conquista', 31, 'Bahia', 253587, 0),\n(284, 'Uberaba', 31, 'Minas Gerais', 249225, 0),\n(285, 'Paulista', 31, 'Pernambuco', 248473, 0),\n(286, 'Limeira', 31, 'São Paulo', 245497, 0),\n(287, 'Blumenau', 31, 'Santa Catarina', 244379, 0),\n(288, 'Caruaru', 31, 'Pernambuco', 244247, 0),\n(289, 'Santarém', 31, 'Pará', 241771, 0),\n(290, 'Volta Redonda', 31, 'Rio de Janeiro', 240315, 0),\n(291, 'Novo Hamburgo', 31, 'Rio Grande do Sul', 239940, 0),\n(292, 'Caucaia', 31, 'Ceará', 238738, 0),\n(293, 'Santa Maria', 31, 'Rio Grande do Sul', 238473, 0),\n(294, 'Cascavel', 31, 'Paraná', 237510, 0),\n(295, 'Guarujá', 31, 'São Paulo', 237206, 0),\n(296, 'Ribeirão das Neves', 31, 'Minas Gerais', 232685, 0),\n(297, 'Governador Valadares', 31, 'Minas Gerais', 231724, 0),\n(298, 'Taubaté', 31, 'São Paulo', 229130, 0),\n(299, 'Imperatriz', 31, 'Maranhão', 224564, 0),\n(300, 'Gravataí', 31, 'Rio Grande do Sul', 223011, 0),\n(301, 'Embu', 31, 'São Paulo', 222223, 0),\n(302, 'Mossoró', 31, 'Rio Grande do Norte', 214901, 0),\n(303, 'Várzea Grande', 31, 'Mato Grosso', 214435, 0),\n(304, 'Petrolina', 31, 'Pernambuco', 210540, 0),\n(305, 'Barueri', 31, 'São Paulo', 208426, 0),\n(306, 'Viamão', 31, 'Rio Grande do Sul', 207557, 0),\n(307, 'Ipatinga', 31, 'Minas Gerais', 206338, 0),\n(308, 'Juazeiro', 31, 'Bahia', 201073, 0),\n(309, 'Juazeiro do Norte', 31, 'Ceará', 199636, 0),\n(310, 'Taboão da Serra', 31, 'São Paulo', 197550, 0),\n(311, 'São José dos Pinhais', 31, 'Paraná', 196884, 0),\n(312, 'Magé', 31, 'Rio de Janeiro', 196147, 0),\n(313, 'Suzano', 31, 'São Paulo', 195434, 0),\n(314, 'São Leopoldo', 31, 'Rio Grande do Sul', 189258, 0),\n(315, 'Marília', 31, 'São Paulo', 188691, 0),\n(316, 'São Carlos', 31, 'São Paulo', 187122, 0),\n(317, 'Sumaré', 31, 'São Paulo', 186205, 0),\n(318, 'Presidente Prudente', 31, 'São Paulo', 185340, 0),\n(319, 'Divinópolis', 31, 'Minas Gerais', 185047, 0),\n(320, 'Sete Lagoas', 31, 'Minas Gerais', 182984, 0),\n(321, 'Rio Grande', 31, 'Rio Grande do Sul', 182222, 0),\n(322, 'Itabuna', 31, 'Bahia', 182148, 0),\n(323, 'Jequié', 31, 'Bahia', 179128, 0),\n(324, 'Arapiraca', 31, 'Alagoas', 178988, 0),\n(325, 'Colombo', 31, 'Paraná', 177764, 0),\n(326, 'Americana', 31, 'São Paulo', 177409, 0),\n(327, 'Alvorada', 31, 'Rio Grande do Sul', 175574, 0),\n(328, 'Araraquara', 31, 'São Paulo', 174381, 0),\n(329, 'Itaboraí', 31, 'Rio de Janeiro', 173977, 0),\n(330, 'Santa Bárbara d´Oeste', 31, 'São Paulo', 171657, 0),\n(331, 'Nova Friburgo', 31, 'Rio de Janeiro', 170697, 0),\n(332, 'Jacareí', 31, 'São Paulo', 170356, 0),\n(333, 'Araçatuba', 31, 'São Paulo', 169303, 0),\n(334, 'Barra Mansa', 31, 'Rio de Janeiro', 168953, 0),\n(335, 'Praia Grande', 31, 'São Paulo', 168434, 0),\n(336, 'Marabá', 31, 'Pará', 167795, 0),\n(337, 'Criciúma', 31, 'Santa Catarina', 167661, 0),\n(338, 'Boa Vista', 31, 'Roraima', 167185, 0),\n(339, 'Passo Fundo', 31, 'Rio Grande do Sul', 166343, 0),\n(340, 'Dourados', 31, 'Mato Grosso do Sul', 164716, 0),\n(341, 'Santa Luzia', 31, 'Minas Gerais', 164704, 0),\n(342, 'Rio Claro', 31, 'São Paulo', 163551, 0),\n(343, 'Maracanaú', 31, 'Ceará', 162022, 0),\n(344, 'Guarapuava', 31, 'Paraná', 160510, 0),\n(345, 'Rondonópolis', 31, 'Mato Grosso', 155115, 0),\n(346, 'São José', 31, 'Santa Catarina', 155105, 0),\n(347, 'Cachoeiro de Itapemirim', 31, 'Espírito Santo', 155024, 0),\n(348, 'Nilópolis', 31, 'Rio de Janeiro', 153383, 0),\n(349, 'Itapevi', 31, 'São Paulo', 150664, 0),\n(350, 'Cabo de Santo Agostinho', 31, 'Pernambuco', 149964, 0),\n(351, 'Camaçari', 31, 'Bahia', 149146, 0),\n(352, 'Sobral', 31, 'Ceará', 146005, 0),\n(353, 'Itajaí', 31, 'Santa Catarina', 145197, 0),\n(354, 'Chapecó', 31, 'Santa Catarina', 144158, 0),\n(355, 'Cotia', 31, 'São Paulo', 140042, 0),\n(356, 'Lages', 31, 'Santa Catarina', 139570, 0),\n(357, 'Ferraz de Vasconcelos', 31, 'São Paulo', 139283, 0),\n(358, 'Indaiatuba', 31, 'São Paulo', 135968, 0),\n(359, 'Hortolândia', 31, 'São Paulo', 135755, 0),\n(360, 'Caxias', 31, 'Maranhão', 133980, 0),\n(361, 'São Caetano do Sul', 31, 'São Paulo', 133321, 0),\n(362, 'Itu', 31, 'São Paulo', 132736, 0),\n(363, 'Nossa Senhora do Socorro', 31, 'Sergipe', 131351, 0),\n(364, 'Parnaíba', 31, 'Piauí', 129756, 0),\n(365, 'Poços de Caldas', 31, 'Minas Gerais', 129683, 0),\n(366, 'Teresópolis', 31, 'Rio de Janeiro', 128079, 0),\n(367, 'Barreiras', 31, 'Bahia', 127801, 0),\n(368, 'Castanhal', 31, 'Pará', 127634, 0),\n(369, 'Alagoinhas', 31, 'Bahia', 126820, 0),\n(370, 'Itapecerica da Serra', 31, 'São Paulo', 126672, 0),\n(371, 'Uruguaiana', 31, 'Rio Grande do Sul', 126305, 0),\n(372, 'Paranaguá', 31, 'Paraná', 126076, 0),\n(373, 'Ibirité', 31, 'Minas Gerais', 125982, 0),\n(374, 'Timon', 31, 'Maranhão', 125812, 0),\n(375, 'Luziânia', 31, 'Goiás', 125597, 0),\n(376, 'Macaé', 31, 'Rio de Janeiro', 125597, 0),\n(377, 'Teófilo Otoni', 31, 'Minas Gerais', 124489, 0),\n(378, 'Moji-Guaçu', 31, 'São Paulo', 123782, 0),\n(379, 'Palmas', 31, 'Tocantins', 121919, 0),\n(380, 'Pindamonhangaba', 31, 'São Paulo', 121904, 0),\n(381, 'Francisco Morato', 31, 'São Paulo', 121197, 0),\n(382, 'Bagé', 31, 'Rio Grande do Sul', 120793, 0),\n(383, 'Sapucaia do Sul', 31, 'Rio Grande do Sul', 120217, 0),\n(384, 'Cabo Frio', 31, 'Rio de Janeiro', 119503, 0),\n(385, 'Itapetininga', 31, 'São Paulo', 119391, 0),\n(386, 'Patos de Minas', 31, 'Minas Gerais', 119262, 0),\n(387, 'Camaragibe', 31, 'Pernambuco', 118968, 0),\n(388, 'Bragança Paulista', 31, 'São Paulo', 116929, 0),\n(389, 'Queimados', 31, 'Rio de Janeiro', 115020, 0),\n(390, 'Araguaína', 31, 'Tocantins', 114948, 0),\n(391, 'Garanhuns', 31, 'Pernambuco', 114603, 0),\n(392, 'Vitória de Santo Antão', 31, 'Pernambuco', 113595, 0),\n(393, 'Santa Rita', 31, 'Paraíba', 113135, 0),\n(394, 'Barbacena', 31, 'Minas Gerais', 113079, 0),\n(395, 'Abaetetuba', 31, 'Pará', 111258, 0),\n(396, 'Jaú', 31, 'São Paulo', 109965, 0),\n(397, 'Lauro de Freitas', 31, 'Bahia', 109236, 0),\n(398, 'Franco da Rocha', 31, 'São Paulo', 108964, 0),\n(399, 'Teixeira de Freitas', 31, 'Bahia', 108441, 0),\n(400, 'Varginha', 31, 'Minas Gerais', 108314, 0),\n(401, 'Ribeirão Pires', 31, 'São Paulo', 108121, 0),\n(402, 'Sabará', 31, 'Minas Gerais', 107781, 0),\n(403, 'Catanduva', 31, 'São Paulo', 107761, 0),\n(404, 'Rio Verde', 31, 'Goiás', 107755, 0),\n(405, 'Botucatu', 31, 'São Paulo', 107663, 0),\n(406, 'Colatina', 31, 'Espírito Santo', 107354, 0),\n(407, 'Santa Cruz do Sul', 31, 'Rio Grande do Sul', 106734, 0),\n(408, 'Linhares', 31, 'Espírito Santo', 106278, 0),\n(409, 'Apucarana', 31, 'Paraná', 105114, 0),\n(410, 'Barretos', 31, 'São Paulo', 104156, 0),\n(411, 'Guaratinguetá', 31, 'São Paulo', 103433, 0),\n(412, 'Cachoeirinha', 31, 'Rio Grande do Sul', 103240, 0),\n(413, 'Codó', 31, 'Maranhão', 103153, 0),\n(414, 'Jaraguá do Sul', 31, 'Santa Catarina', 102580, 0),\n(415, 'Cubatão', 31, 'São Paulo', 102372, 0),\n(416, 'Itabira', 31, 'Minas Gerais', 102217, 0),\n(417, 'Itaituba', 31, 'Pará', 101320, 0),\n(418, 'Araras', 31, 'São Paulo', 101046, 0),\n(419, 'Resende', 31, 'Rio de Janeiro', 100627, 0),\n(420, 'Atibaia', 31, 'São Paulo', 100356, 0),\n(421, 'Pouso Alegre', 31, 'Minas Gerais', 100028, 0),\n(422, 'Toledo', 31, 'Paraná', 99387, 0),\n(423, 'Crato', 31, 'Ceará', 98965, 0),\n(424, 'Passos', 31, 'Minas Gerais', 98570, 0),\n(425, 'Araguari', 31, 'Minas Gerais', 98399, 0),\n(426, 'São José de Ribamar', 31, 'Maranhão', 98318, 0),\n(427, 'Pinhais', 31, 'Paraná', 98198, 0),\n(428, 'Sertãozinho', 31, 'São Paulo', 98140, 0),\n(429, 'Conselheiro Lafaiete', 31, 'Minas Gerais', 97507, 0),\n(430, 'Paulo Afonso', 31, 'Bahia', 97291, 0),\n(431, 'Angra dos Reis', 31, 'Rio de Janeiro', 96864, 0),\n(432, 'Eunápolis', 31, 'Bahia', 96610, 0),\n(433, 'Salto', 31, 'São Paulo', 96348, 0),\n(434, 'Ourinhos', 31, 'São Paulo', 96291, 0),\n(435, 'Parnamirim', 31, 'Rio Grande do Norte', 96210, 0),\n(436, 'Jacobina', 31, 'Bahia', 96131, 0),\n(437, 'Coronel Fabriciano', 31, 'Minas Gerais', 95933, 0),\n(438, 'Birigui', 31, 'São Paulo', 94685, 0),\n(439, 'Tatuí', 31, 'São Paulo', 93897, 0),\n(440, 'Ji-Paraná', 31, 'Rondônia', 93346, 0),\n(441, 'Bacabal', 31, 'Maranhão', 93121, 0),\n(442, 'Cametá', 31, 'Pará', 92779, 0),\n(443, 'Guaíba', 31, 'Rio Grande do Sul', 92224, 0),\n(444, 'São Lourenço da Mata', 31, 'Pernambuco', 91999, 0),\n(445, 'Santana do Livramento', 31, 'Rio Grande do Sul', 91779, 0),\n(446, 'Votorantim', 31, 'São Paulo', 91777, 0),\n(447, 'Campo Largo', 31, 'Paraná', 91203, 0),\n(448, 'Patos', 31, 'Paraíba', 90519, 0),\n(449, 'Ituiutaba', 31, 'Minas Gerais', 90507, 0),\n(450, 'Corumbá', 31, 'Mato Grosso do Sul', 90111, 0),\n(451, 'Palhoça', 31, 'Santa Catarina', 89465, 0),\n(452, 'Barra do Piraí', 31, 'Rio de Janeiro', 89388, 0),\n(453, 'Bento Gonçalves', 31, 'Rio Grande do Sul', 89254, 0),\n(454, 'Poá', 31, 'São Paulo', 89236, 0),\n(455, 'Águas Lindas de Goiás', 31, 'Goiás', 89200, 0),\n(456, 'London', 77, 'England', 7285000, 1),\n(457, 'Birmingham', 77, 'England', 1013000, 0),\n(458, 'Glasgow', 77, 'Scotland', 619680, 0),\n(459, 'Liverpool', 77, 'England', 461000, 0),\n(460, 'Edinburgh', 77, 'Scotland', 450180, 0),\n(461, 'Sheffield', 77, 'England', 431607, 0),\n(462, 'Manchester', 77, 'England', 430000, 0),\n(463, 'Leeds', 77, 'England', 424194, 0),\n(464, 'Bristol', 77, 'England', 402000, 0),\n(465, 'Cardiff', 77, 'Wales', 321000, 0),\n(466, 'Coventry', 77, 'England', 304000, 0),\n(467, 'Leicester', 77, 'England', 294000, 0),\n(468, 'Bradford', 77, 'England', 289376, 0),\n(469, 'Belfast', 77, 'North Ireland', 287500, 0),\n(470, 'Nottingham', 77, 'England', 287000, 0),\n(471, 'Kingston upon Hull', 77, 'England', 262000, 0),\n(472, 'Plymouth', 77, 'England', 253000, 0),\n(473, 'Stoke-on-Trent', 77, 'England', 252000, 0),\n(474, 'Wolverhampton', 77, 'England', 242000, 0),\n(475, 'Derby', 77, 'England', 236000, 0),\n(476, 'Swansea', 77, 'Wales', 230000, 0),\n(477, 'Southampton', 77, 'England', 216000, 0),\n(478, 'Aberdeen', 77, 'Scotland', 213070, 0),\n(479, 'Northampton', 77, 'England', 196000, 0),\n(480, 'Dudley', 77, 'England', 192171, 0),\n(481, 'Portsmouth', 77, 'England', 190000, 0),\n(482, 'Newcastle upon Tyne', 77, 'England', 189150, 0),\n(483, 'Sunderland', 77, 'England', 183310, 0),\n(484, 'Luton', 77, 'England', 183000, 0),\n(485, 'Swindon', 77, 'England', 180000, 0),\n(486, 'Southend-on-Sea', 77, 'England', 176000, 0),\n(487, 'Walsall', 77, 'England', 174739, 0),\n(488, 'Bournemouth', 77, 'England', 162000, 0),\n(489, 'Peterborough', 77, 'England', 156000, 0),\n(490, 'Brighton', 77, 'England', 156124, 0),\n(491, 'Blackpool', 77, 'England', 151000, 0),\n(492, 'Dundee', 77, 'Scotland', 146690, 0),\n(493, 'West Bromwich', 77, 'England', 146386, 0),\n(494, 'Reading', 77, 'England', 148000, 0),\n(495, 'Oldbury/Smethwick (Warley)', 77, 'England', 145542, 0),\n(496, 'Middlesbrough', 77, 'England', 145000, 0),\n(497, 'Huddersfield', 77, 'England', 143726, 0),\n(498, 'Oxford', 77, 'England', 144000, 0),\n(499, 'Poole', 77, 'England', 141000, 0),\n(500, 'Bolton', 77, 'England', 139020, 0),\n(501, 'Blackburn', 77, 'England', 140000, 0),\n(502, 'Newport', 77, 'Wales', 139000, 0),\n(503, 'Preston', 77, 'England', 135000, 0),\n(504, 'Stockport', 77, 'England', 132813, 0),\n(505, 'Norwich', 77, 'England', 124000, 0),\n(506, 'Rotherham', 77, 'England', 121380, 0),\n(507, 'Cambridge', 77, 'England', 121000, 0),\n(508, 'Watford', 77, 'England', 113080, 0),\n(509, 'Ipswich', 77, 'England', 114000, 0),\n(510, 'Slough', 77, 'England', 112000, 0),\n(511, 'Exeter', 77, 'England', 111000, 0),\n(512, 'Cheltenham', 77, 'England', 106000, 0),\n(513, 'Gloucester', 77, 'England', 107000, 0),\n(514, 'Saint Helens', 77, 'England', 106293, 0),\n(515, 'Sutton Coldfield', 77, 'England', 106001, 0),\n(516, 'York', 77, 'England', 104425, 0),\n(517, 'Oldham', 77, 'England', 103931, 0),\n(518, 'Basildon', 77, 'England', 100924, 0),\n(519, 'Worthing', 77, 'England', 100000, 0),\n(520, 'Chelmsford', 77, 'England', 97451, 0),\n(521, 'Colchester', 77, 'England', 96063, 0),\n(522, 'Crawley', 77, 'England', 97000, 0),\n(523, 'Gillingham', 77, 'England', 92000, 0),\n(524, 'Solihull', 77, 'England', 94531, 0),\n(525, 'Rochdale', 77, 'England', 94313, 0),\n(526, 'Birkenhead', 77, 'England', 93087, 0),\n(527, 'Worcester', 77, 'England', 95000, 0),\n(528, 'Hartlepool', 77, 'England', 92000, 0),\n(529, 'Halifax', 77, 'England', 91069, 0),\n(530, 'Woking/Byfleet', 77, 'England', 92000, 0),\n(531, 'Southport', 77, 'England', 90959, 0),\n(532, 'Maidstone', 77, 'England', 90878, 0),\n(533, 'Eastbourne', 77, 'England', 90000, 0),\n(534, 'Grimsby', 77, 'England', 89000, 0),\n(535, 'Saint Helier', 77, 'Jersey', 27523, 0),\n(536, 'Douglas', 77, '–', 23487, 0),\n(537, 'Road Town', 229, 'Tortola', 8000, 1),\n(538, 'Bandar Seri Begawan', 33, 'Brunei and Muara', 21484, 1),\n(539, 'Sofija', 23, 'Grad Sofija', 1122302, 1),\n(540, 'Plovdiv', 23, 'Plovdiv', 342584, 0),\n(541, 'Varna', 23, 'Varna', 299801, 0),\n(542, 'Burgas', 23, 'Burgas', 195255, 0),\n(543, 'Ruse', 23, 'Ruse', 166467, 0),\n(544, 'Stara Zagora', 23, 'Haskovo', 147939, 0),\n(545, 'Pleven', 23, 'Lovec', 121952, 0),\n(546, 'Sliven', 23, 'Burgas', 105530, 0),\n(547, 'Dobric', 23, 'Varna', 100399, 0),\n(548, 'Šumen', 23, 'Varna', 94686, 0),\n(549, 'Ouagadougou', 21, 'Kadiogo', 824000, 1),\n(550, 'Bobo-Dioulasso', 21, 'Houet', 300000, 0),\n(551, 'Koudougou', 21, 'Boulkiemdé', 105000, 0),\n(552, 'Bujumbura', 18, 'Bujumbura', 300000, 1),\n(553, 'George Town', 54, 'Grand Cayman', 19600, 1),\n(554, 'Santiago de Chile', 41, 'Santiago', 4703954, 1),\n(555, 'Puente Alto', 41, 'Santiago', 386236, 0),\n(556, 'Viña del Mar', 41, 'Valparaíso', 312493, 0),\n(557, 'Valparaíso', 41, 'Valparaíso', 293800, 0),\n(558, 'Talcahuano', 41, 'Bíobío', 277752, 0),\n(559, 'Antofagasta', 41, 'Antofagasta', 251429, 0),\n(560, 'San Bernardo', 41, 'Santiago', 241910, 0),\n(561, 'Temuco', 41, 'La Araucanía', 233041, 0),\n(562, 'Concepción', 41, 'Bíobío', 217664, 0),\n(563, 'Rancagua', 41, 'O´Higgins', 212977, 0),\n(564, 'Arica', 41, 'Tarapacá', 189036, 0),\n(565, 'Talca', 41, 'Maule', 187557, 0),\n(566, 'Chillán', 41, 'Bíobío', 178182, 0),\n(567, 'Iquique', 41, 'Tarapacá', 177892, 0),\n(568, 'Los Angeles', 41, 'Bíobío', 158215, 0),\n(569, 'Puerto Montt', 41, 'Los Lagos', 152194, 0),\n(570, 'Coquimbo', 41, 'Coquimbo', 143353, 0),\n(571, 'Osorno', 41, 'Los Lagos', 141468, 0),\n(572, 'La Serena', 41, 'Coquimbo', 137409, 0),\n(573, 'Calama', 41, 'Antofagasta', 137265, 0),\n(574, 'Valdivia', 41, 'Los Lagos', 133106, 0),\n(575, 'Punta Arenas', 41, 'Magallanes', 125631, 0),\n(576, 'Copiapó', 41, 'Atacama', 120128, 0),\n(577, 'Quilpué', 41, 'Valparaíso', 118857, 0),\n(578, 'Curicó', 41, 'Maule', 115766, 0),\n(579, 'Ovalle', 41, 'Coquimbo', 94854, 0),\n(580, 'Coronel', 41, 'Bíobío', 93061, 0),\n(581, 'San Pedro de la Paz', 41, 'Bíobío', 91684, 0),\n(582, 'Melipilla', 41, 'Santiago', 91056, 0),\n(583, 'Avarua', 47, 'Rarotonga', 11900, 1),\n(584, 'San José', 51, 'San José', 339131, 1),\n(585, 'Djibouti', 58, 'Djibouti', 383000, 1),\n(586, 'Roseau', 59, 'St George', 16243, 1),\n(587, 'Santo Domingo de Guzmán', 61, 'Distrito Nacional', 1609966, 1),\n(588, 'Santiago de los Caballeros', 61, 'Santiago', 365463, 0),\n(589, 'La Romana', 61, 'La Romana', 140204, 0),\n(590, 'San Pedro de Macorís', 61, 'San Pedro de Macorís', 124735, 0),\n(591, 'San Francisco de Macorís', 61, 'Duarte', 108485, 0),\n(592, 'San Felipe de Puerto Plata', 61, 'Puerto Plata', 89423, 0),\n(593, 'Guayaquil', 63, 'Guayas', 2070040, 0),\n(594, 'Quito', 63, 'Pichincha', 1573458, 1),\n(595, 'Cuenca', 63, 'Azuay', 270353, 0),\n(596, 'Machala', 63, 'El Oro', 210368, 0),\n(597, 'Santo Domingo de los Colorados', 63, 'Pichincha', 202111, 0),\n(598, 'Portoviejo', 63, 'Manabí', 176413, 0),\n(599, 'Ambato', 63, 'Tungurahua', 169612, 0),\n(600, 'Manta', 63, 'Manabí', 164739, 0),\n(601, 'Duran [Eloy Alfaro]', 63, 'Guayas', 152514, 0),\n(602, 'Ibarra', 63, 'Imbabura', 130643, 0),\n(603, 'Quevedo', 63, 'Los Ríos', 129631, 0),\n(604, 'Milagro', 63, 'Guayas', 124177, 0),\n(605, 'Loja', 63, 'Loja', 123875, 0),\n(606, 'Ríobamba', 63, 'Chimborazo', 123163, 0),\n(607, 'Esmeraldas', 63, 'Esmeraldas', 123045, 0),\n(608, 'Cairo', 64, 'Kairo', 6789479, 1),\n(609, 'Alexandria', 64, 'Aleksandria', 3328196, 0),\n(610, 'Giza', 64, 'Giza', 2221868, 0),\n(611, 'Shubra al-Khayma', 64, 'al-Qalyubiya', 870716, 0),\n(612, 'Port Said', 64, 'Port Said', 469533, 0),\n(613, 'Suez', 64, 'Suez', 417610, 0),\n(614, 'al-Mahallat al-Kubra', 64, 'al-Gharbiya', 395402, 0),\n(615, 'Tanta', 64, 'al-Gharbiya', 371010, 0),\n(616, 'al-Mansura', 64, 'al-Daqahliya', 369621, 0),\n(617, 'Luxor', 64, 'Luxor', 360503, 0),\n(618, 'Asyut', 64, 'Asyut', 343498, 0),\n(619, 'Bahtim', 64, 'al-Qalyubiya', 275807, 0),\n(620, 'Zagazig', 64, 'al-Sharqiya', 267351, 0),\n(621, 'al-Faiyum', 64, 'al-Faiyum', 260964, 0),\n(622, 'Ismailia', 64, 'Ismailia', 254477, 0),\n(623, 'Kafr al-Dawwar', 64, 'al-Buhayra', 231978, 0),\n(624, 'Assuan', 64, 'Assuan', 219017, 0),\n(625, 'Damanhur', 64, 'al-Buhayra', 212203, 0),\n(626, 'al-Minya', 64, 'al-Minya', 201360, 0),\n(627, 'Bani Suwayf', 64, 'Bani Suwayf', 172032, 0),\n(628, 'Qina', 64, 'Qina', 171275, 0),\n(629, 'Sawhaj', 64, 'Sawhaj', 170125, 0),\n(630, 'Shibin al-Kawm', 64, 'al-Minufiya', 159909, 0),\n(631, 'Bulaq al-Dakrur', 64, 'Giza', 148787, 0),\n(632, 'Banha', 64, 'al-Qalyubiya', 145792, 0),\n(633, 'Warraq al-Arab', 64, 'Giza', 127108, 0),\n(634, 'Kafr al-Shaykh', 64, 'Kafr al-Shaykh', 124819, 0),\n(635, 'Mallawi', 64, 'al-Minya', 119283, 0),\n(636, 'Bilbays', 64, 'al-Sharqiya', 113608, 0),\n(637, 'Mit Ghamr', 64, 'al-Daqahliya', 101801, 0),\n(638, 'al-Arish', 64, 'Shamal Sina', 100447, 0),\n(639, 'Talkha', 64, 'al-Daqahliya', 97700, 0),\n(640, 'Qalyub', 64, 'al-Qalyubiya', 97200, 0),\n(641, 'Jirja', 64, 'Sawhaj', 95400, 0),\n(642, 'Idfu', 64, 'Qina', 94200, 0),\n(643, 'al-Hawamidiya', 64, 'Giza', 91700, 0),\n(644, 'Disuq', 64, 'Kafr al-Shaykh', 91300, 0),\n(645, 'San Salvador', 193, 'San Salvador', 415346, 1),\n(646, 'Santa Ana', 193, 'Santa Ana', 139389, 0),\n(647, 'Mejicanos', 193, 'San Salvador', 138800, 0),\n(648, 'Soyapango', 193, 'San Salvador', 129800, 0),\n(649, 'San Miguel', 193, 'San Miguel', 127696, 0),\n(650, 'Nueva San Salvador', 193, 'La Libertad', 98400, 0),\n(651, 'Apopa', 193, 'San Salvador', 88800, 0),\n(652, 'Asmara', 65, 'Maekel', 431000, 1),\n(653, 'Madrid', 67, 'Madrid', 2879052, 1),\n(654, 'Barcelona', 67, 'Katalonia', 1503451, 0),\n(655, 'Valencia', 67, 'Valencia', 739412, 0),\n(656, 'Sevilla', 67, 'Andalusia', 701927, 0),\n(657, 'Zaragoza', 67, 'Aragonia', 603367, 0),\n(658, 'Málaga', 67, 'Andalusia', 530553, 0),\n(659, 'Bilbao', 67, 'Baskimaa', 357589, 0),\n(660, 'Las Palmas de Gran Canaria', 67, 'Canary Islands', 354757, 0),\n(661, 'Murcia', 67, 'Murcia', 353504, 0),\n(662, 'Palma de Mallorca', 67, 'Balears', 326993, 0),\n(663, 'Valladolid', 67, 'Castilla and León', 319998, 0),\n(664, 'Córdoba', 67, 'Andalusia', 311708, 0),\n(665, 'Vigo', 67, 'Galicia', 283670, 0),\n(666, 'Alicante [Alacant]', 67, 'Valencia', 272432, 0),\n(667, 'Gijón', 67, 'Asturia', 267980, 0),\n(668, 'L´Hospitalet de Llobregat', 67, 'Katalonia', 247986, 0),\n(669, 'Granada', 67, 'Andalusia', 244767, 0),\n(670, 'A Coruña (La Coruña)', 67, 'Galicia', 243402, 0),\n(671, 'Vitoria-Gasteiz', 67, 'Baskimaa', 217154, 0),\n(672, 'Santa Cruz de Tenerife', 67, 'Canary Islands', 213050, 0),\n(673, 'Badalona', 67, 'Katalonia', 209635, 0),\n(674, 'Oviedo', 67, 'Asturia', 200453, 0),\n(675, 'Móstoles', 67, 'Madrid', 195351, 0),\n(676, 'Elche [Elx]', 67, 'Valencia', 193174, 0),\n(677, 'Sabadell', 67, 'Katalonia', 184859, 0),\n(678, 'Santander', 67, 'Cantabria', 184165, 0),\n(679, 'Jerez de la Frontera', 67, 'Andalusia', 182660, 0),\n(680, 'Pamplona [Iruña]', 67, 'Navarra', 180483, 0),\n(681, 'Donostia-San Sebastián', 67, 'Baskimaa', 179208, 0),\n(682, 'Cartagena', 67, 'Murcia', 177709, 0),\n(683, 'Leganés', 67, 'Madrid', 173163, 0),\n(684, 'Fuenlabrada', 67, 'Madrid', 171173, 0),\n(685, 'Almería', 67, 'Andalusia', 169027, 0),\n(686, 'Terrassa', 67, 'Katalonia', 168695, 0),\n(687, 'Alcalá de Henares', 67, 'Madrid', 164463, 0),\n(688, 'Burgos', 67, 'Castilla and León', 162802, 0),\n(689, 'Salamanca', 67, 'Castilla and León', 158720, 0),\n(690, 'Albacete', 67, 'Kastilia-La Mancha', 147527, 0),\n(691, 'Getafe', 67, 'Madrid', 145371, 0),\n(692, 'Cádiz', 67, 'Andalusia', 142449, 0),\n(693, 'Alcorcón', 67, 'Madrid', 142048, 0),\n(694, 'Huelva', 67, 'Andalusia', 140583, 0),\n(695, 'León', 67, 'Castilla and León', 139809, 0),\n(696, 'Castellón de la Plana [Castell', 67, 'Valencia', 139712, 0),\n(697, 'Badajoz', 67, 'Extremadura', 136613, 0),\n(698, '[San Cristóbal de] la Laguna', 67, 'Canary Islands', 127945, 0),\n(699, 'Logroño', 67, 'La Rioja', 127093, 0),\n(700, 'Santa Coloma de Gramenet', 67, 'Katalonia', 120802, 0),\n(701, 'Tarragona', 67, 'Katalonia', 113016, 0),\n(702, 'Lleida (Lérida)', 67, 'Katalonia', 112207, 0),\n(703, 'Jaén', 67, 'Andalusia', 109247, 0),\n(704, 'Ourense (Orense)', 67, 'Galicia', 109120, 0),\n(705, 'Mataró', 67, 'Katalonia', 104095, 0),\n(706, 'Algeciras', 67, 'Andalusia', 103106, 0),\n(707, 'Marbella', 67, 'Andalusia', 101144, 0),\n(708, 'Barakaldo', 67, 'Baskimaa', 98212, 0),\n(709, 'Dos Hermanas', 67, 'Andalusia', 94591, 0),\n(710, 'Santiago de Compostela', 67, 'Galicia', 93745, 0),\n(711, 'Torrejón de Ardoz', 67, 'Madrid', 92262, 0),\n(712, 'Cape Town', 237, 'Western Cape', 2352121, 0),\n(713, 'Soweto', 237, 'Gauteng', 904165, 0),\n(714, 'Johannesburg', 237, 'Gauteng', 756653, 0),\n(715, 'Port Elizabeth', 237, 'Eastern Cape', 752319, 0),\n(716, 'Pretoria', 237, 'Gauteng', 658630, 1),\n(717, 'Inanda', 237, 'KwaZulu-Natal', 634065, 0),\n(718, 'Durban', 237, 'KwaZulu-Natal', 566120, 0),\n(719, 'Vanderbijlpark', 237, 'Gauteng', 468931, 0),\n(720, 'Kempton Park', 237, 'Gauteng', 442633, 0),\n(721, 'Alberton', 237, 'Gauteng', 410102, 0),\n(722, 'Pinetown', 237, 'KwaZulu-Natal', 378810, 0),\n(723, 'Pietermaritzburg', 237, 'KwaZulu-Natal', 370190, 0),\n(724, 'Benoni', 237, 'Gauteng', 365467, 0),\n(725, 'Randburg', 237, 'Gauteng', 341288, 0),\n(726, 'Umlazi', 237, 'KwaZulu-Natal', 339233, 0),\n(727, 'Bloemfontein', 237, 'Free State', 334341, 0),\n(728, 'Vereeniging', 237, 'Gauteng', 328535, 0),\n(729, 'Wonderboom', 237, 'Gauteng', 283289, 0),\n(730, 'Roodepoort', 237, 'Gauteng', 279340, 0),\n(731, 'Boksburg', 237, 'Gauteng', 262648, 0),\n(732, 'Klerksdorp', 237, 'North West', 261911, 0),\n(733, 'Soshanguve', 237, 'Gauteng', 242727, 0),\n(734, 'Newcastle', 237, 'KwaZulu-Natal', 222993, 0),\n(735, 'East London', 237, 'Eastern Cape', 221047, 0),\n(736, 'Welkom', 237, 'Free State', 203296, 0),\n(737, 'Kimberley', 237, 'Northern Cape', 197254, 0),\n(738, 'Uitenhage', 237, 'Eastern Cape', 192120, 0),\n(739, 'Chatsworth', 237, 'KwaZulu-Natal', 189885, 0),\n(740, 'Mdantsane', 237, 'Eastern Cape', 182639, 0),\n(741, 'Krugersdorp', 237, 'Gauteng', 181503, 0),\n(742, 'Botshabelo', 237, 'Free State', 177971, 0),\n(743, 'Brakpan', 237, 'Gauteng', 171363, 0),\n(744, 'Witbank', 237, 'Mpumalanga', 167183, 0),\n(745, 'Oberholzer', 237, 'Gauteng', 164367, 0),\n(746, 'Germiston', 237, 'Gauteng', 164252, 0),\n(747, 'Springs', 237, 'Gauteng', 162072, 0),\n(748, 'Westonaria', 237, 'Gauteng', 159632, 0),\n(749, 'Randfontein', 237, 'Gauteng', 120838, 0),\n(750, 'Paarl', 237, 'Western Cape', 105768, 0),\n(751, 'Potchefstroom', 237, 'North West', 101817, 0),\n(752, 'Rustenburg', 237, 'North West', 97008, 0),\n(753, 'Nigel', 237, 'Gauteng', 96734, 0),\n(754, 'George', 237, 'Western Cape', 93818, 0),\n(755, 'Ladysmith', 237, 'KwaZulu-Natal', 89292, 0),\n(756, 'Addis Abeba', 69, 'Addis Abeba', 2495000, 1),\n(757, 'Dire Dawa', 69, 'Dire Dawa', 164851, 0),\n(758, 'Nazret', 69, 'Oromia', 127842, 0),\n(759, 'Gonder', 69, 'Amhara', 112249, 0),\n(760, 'Dese', 69, 'Amhara', 97314, 0),\n(761, 'Mekele', 69, 'Tigray', 96938, 0),\n(762, 'Bahir Dar', 69, 'Amhara', 96140, 0),\n(763, 'Stanley', 72, 'East Falkland', 1636, 1),\n(764, 'Suva', 71, 'Central', 77366, 1),\n(765, 'Quezon', 169, 'National Capital Reg', 2173831, 0),\n(766, 'Manila', 169, 'National Capital Reg', 1581082, 1),\n(767, 'Kalookan', 169, 'National Capital Reg', 1177604, 0),\n(768, 'Davao', 169, 'Southern Mindanao', 1147116, 0),\n(769, 'Cebu', 169, 'Central Visayas', 718821, 0),\n(770, 'Zamboanga', 169, 'Western Mindanao', 601794, 0),\n(771, 'Pasig', 169, 'National Capital Reg', 505058, 0),\n(772, 'Valenzuela', 169, 'National Capital Reg', 485433, 0),\n(773, 'Las Piñas', 169, 'National Capital Reg', 472780, 0),\n(774, 'Antipolo', 169, 'Southern Tagalog', 470866, 0),\n(775, 'Taguig', 169, 'National Capital Reg', 467375, 0),\n(776, 'Cagayan de Oro', 169, 'Northern Mindanao', 461877, 0),\n(777, 'Parañaque', 169, 'National Capital Reg', 449811, 0),\n(778, 'Makati', 169, 'National Capital Reg', 444867, 0),\n(779, 'Bacolod', 169, 'Western Visayas', 429076, 0),\n(780, 'General Santos', 169, 'Southern Mindanao', 411822, 0),\n(781, 'Marikina', 169, 'National Capital Reg', 391170, 0),\n(782, 'Dasmariñas', 169, 'Southern Tagalog', 379520, 0),\n(783, 'Muntinlupa', 169, 'National Capital Reg', 379310, 0),\n(784, 'Iloilo', 169, 'Western Visayas', 365820, 0),\n(785, 'Pasay', 169, 'National Capital Reg', 354908, 0),\n(786, 'Malabon', 169, 'National Capital Reg', 338855, 0),\n(787, 'San José del Monte', 169, 'Central Luzon', 315807, 0),\n(788, 'Bacoor', 169, 'Southern Tagalog', 305699, 0),\n(789, 'Iligan', 169, 'Central Mindanao', 285061, 0),\n(790, 'Calamba', 169, 'Southern Tagalog', 281146, 0),\n(791, 'Mandaluyong', 169, 'National Capital Reg', 278474, 0),\n(792, 'Butuan', 169, 'Caraga', 267279, 0),\n(793, 'Angeles', 169, 'Central Luzon', 263971, 0),\n(794, 'Tarlac', 169, 'Central Luzon', 262481, 0),\n(795, 'Mandaue', 169, 'Central Visayas', 259728, 0),\n(796, 'Baguio', 169, 'CAR', 252386, 0),\n(797, 'Batangas', 169, 'Southern Tagalog', 247588, 0),\n(798, 'Cainta', 169, 'Southern Tagalog', 242511, 0),\n(799, 'San Pedro', 169, 'Southern Tagalog', 231403, 0),\n(800, 'Navotas', 169, 'National Capital Reg', 230403, 0),\n(801, 'Cabanatuan', 169, 'Central Luzon', 222859, 0),\n(802, 'San Fernando', 169, 'Central Luzon', 221857, 0),\n(803, 'Lipa', 169, 'Southern Tagalog', 218447, 0),\n(804, 'Lapu-Lapu', 169, 'Central Visayas', 217019, 0),\n(805, 'San Pablo', 169, 'Southern Tagalog', 207927, 0),\n(806, 'Biñan', 169, 'Southern Tagalog', 201186, 0),\n(807, 'Taytay', 169, 'Southern Tagalog', 198183, 0),\n(808, 'Lucena', 169, 'Southern Tagalog', 196075, 0),\n(809, 'Imus', 169, 'Southern Tagalog', 195482, 0),\n(810, 'Olongapo', 169, 'Central Luzon', 194260, 0),\n(811, 'Binangonan', 169, 'Southern Tagalog', 187691, 0),\n(812, 'Santa Rosa', 169, 'Southern Tagalog', 185633, 0),\n(813, 'Tagum', 169, 'Southern Mindanao', 179531, 0),\n(814, 'Tacloban', 169, 'Eastern Visayas', 178639, 0),\n(815, 'Malolos', 169, 'Central Luzon', 175291, 0),\n(816, 'Mabalacat', 169, 'Central Luzon', 171045, 0),\n(817, 'Cotabato', 169, 'Central Mindanao', 163849, 0),\n(818, 'Meycauayan', 169, 'Central Luzon', 163037, 0),\n(819, 'Puerto Princesa', 169, 'Southern Tagalog', 161912, 0),\n(820, 'Legazpi', 169, 'Bicol', 157010, 0),\n(821, 'Silang', 169, 'Southern Tagalog', 156137, 0),\n(822, 'Ormoc', 169, 'Eastern Visayas', 154297, 0),\n(823, 'San Carlos', 169, 'Ilocos', 154264, 0),\n(824, 'Kabankalan', 169, 'Western Visayas', 149769, 0),\n(825, 'Talisay', 169, 'Central Visayas', 148110, 0),\n(826, 'Valencia', 169, 'Northern Mindanao', 147924, 0),\n(827, 'Calbayog', 169, 'Eastern Visayas', 147187, 0),\n(828, 'Santa Maria', 169, 'Central Luzon', 144282, 0),\n(829, 'Pagadian', 169, 'Western Mindanao', 142515, 0),\n(830, 'Cadiz', 169, 'Western Visayas', 141954, 0),\n(831, 'Bago', 169, 'Western Visayas', 141721, 0),\n(832, 'Toledo', 169, 'Central Visayas', 141174, 0),\n(833, 'Naga', 169, 'Bicol', 137810, 0),\n(834, 'San Mateo', 169, 'Southern Tagalog', 135603, 0),\n(835, 'Panabo', 169, 'Southern Mindanao', 133950, 0),\n(836, 'Koronadal', 169, 'Southern Mindanao', 133786, 0),\n(837, 'Marawi', 169, 'Central Mindanao', 131090, 0),\n(838, 'Dagupan', 169, 'Ilocos', 130328, 0),\n(839, 'Sagay', 169, 'Western Visayas', 129765, 0),\n(840, 'Roxas', 169, 'Western Visayas', 126352, 0),\n(841, 'Lubao', 169, 'Central Luzon', 125699, 0),\n(842, 'Digos', 169, 'Southern Mindanao', 125171, 0),\n(843, 'San Miguel', 169, 'Central Luzon', 123824, 0),\n(844, 'Malaybalay', 169, 'Northern Mindanao', 123672, 0),\n(845, 'Tuguegarao', 169, 'Cagayan Valley', 120645, 0),\n(846, 'Ilagan', 169, 'Cagayan Valley', 119990, 0),\n(847, 'Baliuag', 169, 'Central Luzon', 119675, 0),\n(848, 'Surigao', 169, 'Caraga', 118534, 0),\n(849, 'San Carlos', 169, 'Western Visayas', 118259, 0),\n(850, 'San Juan del Monte', 169, 'National Capital Reg', 117680, 0),\n(851, 'Tanauan', 169, 'Southern Tagalog', 117539, 0),\n(852, 'Concepcion', 169, 'Central Luzon', 115171, 0),\n(853, 'Rodriguez (Montalban)', 169, 'Southern Tagalog', 115167, 0),\n(854, 'Sariaya', 169, 'Southern Tagalog', 114568, 0),\n(855, 'Malasiqui', 169, 'Ilocos', 113190, 0),\n(856, 'General Mariano Alvarez', 169, 'Southern Tagalog', 112446, 0),\n(857, 'Urdaneta', 169, 'Ilocos', 111582, 0),\n(858, 'Hagonoy', 169, 'Central Luzon', 111425, 0),\n(859, 'San Jose', 169, 'Southern Tagalog', 111009, 0),\n(860, 'Polomolok', 169, 'Southern Mindanao', 110709, 0),\n(861, 'Santiago', 169, 'Cagayan Valley', 110531, 0),\n(862, 'Tanza', 169, 'Southern Tagalog', 110517, 0),\n(863, 'Ozamis', 169, 'Northern Mindanao', 110420, 0),\n(864, 'Mexico', 169, 'Central Luzon', 109481, 0),\n(865, 'San Jose', 169, 'Central Luzon', 108254, 0),\n(866, 'Silay', 169, 'Western Visayas', 107722, 0),\n(867, 'General Trias', 169, 'Southern Tagalog', 107691, 0),\n(868, 'Tabaco', 169, 'Bicol', 107166, 0),\n(869, 'Cabuyao', 169, 'Southern Tagalog', 106630, 0),\n(870, 'Calapan', 169, 'Southern Tagalog', 105910, 0),\n(871, 'Mati', 169, 'Southern Mindanao', 105908, 0),\n(872, 'Midsayap', 169, 'Central Mindanao', 105760, 0),\n(873, 'Cauayan', 169, 'Cagayan Valley', 103952, 0),\n(874, 'Gingoog', 169, 'Northern Mindanao', 102379, 0),\n(875, 'Dumaguete', 169, 'Central Visayas', 102265, 0),\n(876, 'San Fernando', 169, 'Ilocos', 102082, 0),\n(877, 'Arayat', 169, 'Central Luzon', 101792, 0),\n(878, 'Bayawan (Tulong)', 169, 'Central Visayas', 101391, 0),\n(879, 'Kidapawan', 169, 'Central Mindanao', 101205, 0),\n(880, 'Daraga (Locsin)', 169, 'Bicol', 101031, 0),\n(881, 'Marilao', 169, 'Central Luzon', 101017, 0),\n(882, 'Malita', 169, 'Southern Mindanao', 100000, 0),\n(883, 'Dipolog', 169, 'Western Mindanao', 99862, 0),\n(884, 'Cavite', 169, 'Southern Tagalog', 99367, 0),\n(885, 'Danao', 169, 'Central Visayas', 98781, 0),\n(886, 'Bislig', 169, 'Caraga', 97860, 0),\n(887, 'Talavera', 169, 'Central Luzon', 97329, 0),\n(888, 'Guagua', 169, 'Central Luzon', 96858, 0),\n(889, 'Bayambang', 169, 'Ilocos', 96609, 0),\n(890, 'Nasugbu', 169, 'Southern Tagalog', 96113, 0),\n(891, 'Baybay', 169, 'Eastern Visayas', 95630, 0),\n(892, 'Capas', 169, 'Central Luzon', 95219, 0),\n(893, 'Sultan Kudarat', 169, 'ARMM', 94861, 0),\n(894, 'Laoag', 169, 'Ilocos', 94466, 0),\n(895, 'Bayugan', 169, 'Caraga', 93623, 0),\n(896, 'Malungon', 169, 'Southern Mindanao', 93232, 0),\n(897, 'Santa Cruz', 169, 'Southern Tagalog', 92694, 0),\n(898, 'Sorsogon', 169, 'Bicol', 92512, 0),\n(899, 'Candelaria', 169, 'Southern Tagalog', 92429, 0),\n(900, 'Ligao', 169, 'Bicol', 90603, 0),\n(901, 'Tórshavn', 74, 'Streymoyar', 14542, 1),\n(902, 'Libreville', 76, 'Estuaire', 419000, 1),\n(903, 'Serekunda', 83, 'Kombo St Mary', 102600, 0),\n(904, 'Banjul', 83, 'Banjul', 42326, 1),\n(905, 'Tbilisi', 78, 'Tbilisi', 1235200, 1),\n(906, 'Kutaisi', 78, 'Imereti', 240900, 0),\n(907, 'Rustavi', 78, 'Kvemo Kartli', 155400, 0),\n(908, 'Batumi', 78, 'Adzaria [Atšara]', 137700, 0),\n(909, 'Sohumi', 78, 'Abhasia [Aphazeti]', 111700, 0),\n(910, 'Accra', 79, 'Greater Accra', 1070000, 1),\n(911, 'Kumasi', 79, 'Ashanti', 385192, 0),\n(912, 'Tamale', 79, 'Northern', 151069, 0),\n(913, 'Tema', 79, 'Greater Accra', 109975, 0),\n(914, 'Sekondi-Takoradi', 79, 'Western', 103653, 0),\n(915, 'Gibraltar', 80, '–', 27025, 1),\n(916, 'Saint George´s', 87, 'St George', 4621, 1),\n(917, 'Nuuk', 88, 'Kitaa', 13445, 1),\n(918, 'Les Abymes', 82, 'Grande-Terre', 62947, 0),\n(919, 'Basse-Terre', 82, 'Basse-Terre', 12433, 1),\n(920, 'Tamuning', 91, '–', 9500, 0),\n(921, 'Agaña', 91, '–', 1139, 1),\n(922, 'Ciudad de Guatemala', 89, 'Guatemala', 823301, 1),\n(923, 'Mixco', 89, 'Guatemala', 209791, 0),\n(924, 'Villa Nueva', 89, 'Guatemala', 101295, 0),\n(925, 'Quetzaltenango', 89, 'Quetzaltenango', 90801, 0),\n(926, 'Conakry', 81, 'Conakry', 1090610, 1),\n(927, 'Bissau', 84, 'Bissau', 241000, 1),\n(928, 'Georgetown', 92, 'Georgetown', 254000, 1),\n(929, 'Port-au-Prince', 97, 'Ouest', 884472, 1),\n(930, 'Carrefour', 97, 'Ouest', 290204, 0),\n(931, 'Delmas', 97, 'Ouest', 240429, 0),\n(932, 'Le-Cap-Haïtien', 97, 'Nord', 102233, 0),\n(933, 'Tegucigalpa', 95, 'Distrito Central', 813900, 1),\n(934, 'San Pedro Sula', 95, 'Cortés', 383900, 0),\n(935, 'La Ceiba', 95, 'Atlántida', 89200, 0),\n(936, 'Kowloon and New Kowloon', 93, 'Kowloon and New Kowl', 1987996, 0),\n(937, 'Victoria', 93, 'Hongkong', 1312637, 1),\n(938, 'Longyearbyen', 190, 'Länsimaa', 1438, 1),\n(939, 'Jakarta', 99, 'Jakarta Raya', 9604900, 1),\n(940, 'Surabaya', 99, 'East Java', 2663820, 0),\n(941, 'Bandung', 99, 'West Java', 2429000, 0),\n(942, 'Medan', 99, 'Sumatera Utara', 1843919, 0),\n(943, 'Palembang', 99, 'Sumatera Selatan', 1222764, 0),\n(944, 'Tangerang', 99, 'West Java', 1198300, 0),\n(945, 'Semarang', 99, 'Central Java', 1104405, 0),\n(946, 'Ujung Pandang', 99, 'Sulawesi Selatan', 1060257, 0),\n(947, 'Malang', 99, 'East Java', 716862, 0),\n(948, 'Bandar Lampung', 99, 'Lampung', 680332, 0),\n(949, 'Bekasi', 99, 'West Java', 644300, 0),\n(950, 'Padang', 99, 'Sumatera Barat', 534474, 0),\n(951, 'Surakarta', 99, 'Central Java', 518600, 0),\n(952, 'Banjarmasin', 99, 'Kalimantan Selatan', 482931, 0),\n(953, 'Pekan Baru', 99, 'Riau', 438638, 0),\n(954, 'Denpasar', 99, 'Bali', 435000, 0),\n(955, 'Yogyakarta', 99, 'Yogyakarta', 418944, 0),\n(956, 'Pontianak', 99, 'Kalimantan Barat', 409632, 0),\n(957, 'Samarinda', 99, 'Kalimantan Timur', 399175, 0),\n(958, 'Jambi', 99, 'Jambi', 385201, 0),\n(959, 'Depok', 99, 'West Java', 365200, 0),\n(960, 'Cimahi', 99, 'West Java', 344600, 0),\n(961, 'Balikpapan', 99, 'Kalimantan Timur', 338752, 0),\n(962, 'Manado', 99, 'Sulawesi Utara', 332288, 0),\n(963, 'Mataram', 99, 'Nusa Tenggara Barat', 306600, 0),\n(964, 'Pekalongan', 99, 'Central Java', 301504, 0),\n(965, 'Tegal', 99, 'Central Java', 289744, 0),\n(966, 'Bogor', 99, 'West Java', 285114, 0),\n(967, 'Ciputat', 99, 'West Java', 270800, 0),\n(968, 'Pondokgede', 99, 'West Java', 263200, 0),\n(969, 'Cirebon', 99, 'West Java', 254406, 0),\n(970, 'Kediri', 99, 'East Java', 253760, 0),\n(971, 'Ambon', 99, 'Molukit', 249312, 0),\n(972, 'Jember', 99, 'East Java', 218500, 0),\n(973, 'Cilacap', 99, 'Central Java', 206900, 0),\n(974, 'Cimanggis', 99, 'West Java', 205100, 0),\n(975, 'Pematang Siantar', 99, 'Sumatera Utara', 203056, 0),\n(976, 'Purwokerto', 99, 'Central Java', 202500, 0),\n(977, 'Ciomas', 99, 'West Java', 187400, 0),\n(978, 'Tasikmalaya', 99, 'West Java', 179800, 0),\n(979, 'Madiun', 99, 'East Java', 171532, 0),\n(980, 'Bengkulu', 99, 'Bengkulu', 146439, 0),\n(981, 'Karawang', 99, 'West Java', 145000, 0),\n(982, 'Banda Aceh', 99, 'Aceh', 143409, 0),\n(983, 'Palu', 99, 'Sulawesi Tengah', 142800, 0),\n(984, 'Pasuruan', 99, 'East Java', 134019, 0),\n(985, 'Kupang', 99, 'Nusa Tenggara Timur', 129300, 0),\n(986, 'Tebing Tinggi', 99, 'Sumatera Utara', 129300, 0),\n(987, 'Percut Sei Tuan', 99, 'Sumatera Utara', 129000, 0),\n(988, 'Binjai', 99, 'Sumatera Utara', 127222, 0),\n(989, 'Sukabumi', 99, 'West Java', 125766, 0),\n(990, 'Waru', 99, 'East Java', 124300, 0),\n(991, 'Pangkal Pinang', 99, 'Sumatera Selatan', 124000, 0),\n(992, 'Magelang', 99, 'Central Java', 123800, 0),\n(993, 'Blitar', 99, 'East Java', 122600, 0),\n(994, 'Serang', 99, 'West Java', 122400, 0),\n(995, 'Probolinggo', 99, 'East Java', 120770, 0),\n(996, 'Cilegon', 99, 'West Java', 117000, 0),\n(997, 'Cianjur', 99, 'West Java', 114300, 0),\n(998, 'Ciparay', 99, 'West Java', 111500, 0),\n(999, 'Lhokseumawe', 99, 'Aceh', 109600, 0),\n(1000, 'Taman', 99, 'East Java', 107000, 0),\n(1001, 'Depok', 99, 'Yogyakarta', 106800, 0),\n(1002, 'Citeureup', 99, 'West Java', 105100, 0),\n(1003, 'Pemalang', 99, 'Central Java', 103500, 0),\n(1004, 'Klaten', 99, 'Central Java', 103300, 0),\n(1005, 'Salatiga', 99, 'Central Java', 103000, 0),\n(1006, 'Cibinong', 99, 'West Java', 101300, 0),\n(1007, 'Palangka Raya', 99, 'Kalimantan Tengah', 99693, 0),\n(1008, 'Mojokerto', 99, 'East Java', 96626, 0),\n(1009, 'Purwakarta', 99, 'West Java', 95900, 0),\n(1010, 'Garut', 99, 'West Java', 95800, 0),\n(1011, 'Kudus', 99, 'Central Java', 95300, 0),\n(1012, 'Kendari', 99, 'Sulawesi Tenggara', 94800, 0),\n(1013, 'Jaya Pura', 99, 'West Irian', 94700, 0),\n(1014, 'Gorontalo', 99, 'Sulawesi Utara', 94058, 0),\n(1015, 'Majalaya', 99, 'West Java', 93200, 0),\n(1016, 'Pondok Aren', 99, 'West Java', 92700, 0),\n(1017, 'Jombang', 99, 'East Java', 92600, 0),\n(1018, 'Sunggal', 99, 'Sumatera Utara', 92300, 0),\n(1019, 'Batam', 99, 'Riau', 91871, 0),\n(1020, 'Padang Sidempuan', 99, 'Sumatera Utara', 91200, 0),\n(1021, 'Sawangan', 99, 'West Java', 91100, 0),\n(1022, 'Banyuwangi', 99, 'East Java', 89900, 0),\n(1023, 'Tanjung Pinang', 99, 'Riau', 89900, 0),\n(1024, 'Mumbai (Bombay)', 100, 'Maharashtra', 10500000, 0),\n(1025, 'Delhi', 100, 'Delhi', 7206704, 0),\n(1026, 'Calcutta [Kolkata]', 100, 'West Bengali', 4399819, 0),\n(1027, 'Chennai (Madras)', 100, 'Tamil Nadu', 3841396, 0),\n(1028, 'Hyderabad', 100, 'Andhra Pradesh', 2964638, 0),\n(1029, 'Ahmedabad', 100, 'Gujarat', 2876710, 0),\n(1030, 'Bangalore', 100, 'Karnataka', 2660088, 0),\n(1031, 'Kanpur', 100, 'Uttar Pradesh', 1874409, 0),\n(1032, 'Nagpur', 100, 'Maharashtra', 1624752, 0),\n(1033, 'Lucknow', 100, 'Uttar Pradesh', 1619115, 0),\n(1034, 'Pune', 100, 'Maharashtra', 1566651, 0),\n(1035, 'Surat', 100, 'Gujarat', 1498817, 0),\n(1036, 'Jaipur', 100, 'Rajasthan', 1458483, 0),\n(1037, 'Indore', 100, 'Madhya Pradesh', 1091674, 0),\n(1038, 'Bhopal', 100, 'Madhya Pradesh', 1062771, 0),\n(1039, 'Ludhiana', 100, 'Punjab', 1042740, 0),\n(1040, 'Vadodara (Baroda)', 100, 'Gujarat', 1031346, 0),\n(1041, 'Kalyan', 100, 'Maharashtra', 1014557, 0),\n(1042, 'Madurai', 100, 'Tamil Nadu', 977856, 0),\n(1043, 'Haora (Howrah)', 100, 'West Bengali', 950435, 0),\n(1044, 'Varanasi (Benares)', 100, 'Uttar Pradesh', 929270, 0),\n(1045, 'Patna', 100, 'Bihar', 917243, 0),\n(1046, 'Srinagar', 100, 'Jammu and Kashmir', 892506, 0),\n(1047, 'Agra', 100, 'Uttar Pradesh', 891790, 0),\n(1048, 'Coimbatore', 100, 'Tamil Nadu', 816321, 0),\n(1049, 'Thane (Thana)', 100, 'Maharashtra', 803389, 0),\n(1050, 'Allahabad', 100, 'Uttar Pradesh', 792858, 0),\n(1051, 'Meerut', 100, 'Uttar Pradesh', 753778, 0),\n(1052, 'Vishakhapatnam', 100, 'Andhra Pradesh', 752037, 0),\n(1053, 'Jabalpur', 100, 'Madhya Pradesh', 741927, 0),\n(1054, 'Amritsar', 100, 'Punjab', 708835, 0),\n(1055, 'Faridabad', 100, 'Haryana', 703592, 0),\n(1056, 'Vijayawada', 100, 'Andhra Pradesh', 701827, 0);\nINSERT INTO `cities` (`id`, `name`, `countryId`, `district`, `population`, `isCapital`) VALUES\n(1057, 'Gwalior', 100, 'Madhya Pradesh', 690765, 0),\n(1058, 'Jodhpur', 100, 'Rajasthan', 666279, 0),\n(1059, 'Nashik (Nasik)', 100, 'Maharashtra', 656925, 0),\n(1060, 'Hubli-Dharwad', 100, 'Karnataka', 648298, 0),\n(1061, 'Solapur (Sholapur)', 100, 'Maharashtra', 604215, 0),\n(1062, 'Ranchi', 100, 'Jharkhand', 599306, 0),\n(1063, 'Bareilly', 100, 'Uttar Pradesh', 587211, 0),\n(1064, 'Guwahati (Gauhati)', 100, 'Assam', 584342, 0),\n(1065, 'Shambajinagar (Aurangabad)', 100, 'Maharashtra', 573272, 0),\n(1066, 'Cochin (Kochi)', 100, 'Kerala', 564589, 0),\n(1067, 'Rajkot', 100, 'Gujarat', 559407, 0),\n(1068, 'Kota', 100, 'Rajasthan', 537371, 0),\n(1069, 'Thiruvananthapuram (Trivandrum', 100, 'Kerala', 524006, 0),\n(1070, 'Pimpri-Chinchwad', 100, 'Maharashtra', 517083, 0),\n(1071, 'Jalandhar (Jullundur)', 100, 'Punjab', 509510, 0),\n(1072, 'Gorakhpur', 100, 'Uttar Pradesh', 505566, 0),\n(1073, 'Chandigarh', 100, 'Chandigarh', 504094, 0),\n(1074, 'Mysore', 100, 'Karnataka', 480692, 0),\n(1075, 'Aligarh', 100, 'Uttar Pradesh', 480520, 0),\n(1076, 'Guntur', 100, 'Andhra Pradesh', 471051, 0),\n(1077, 'Jamshedpur', 100, 'Jharkhand', 460577, 0),\n(1078, 'Ghaziabad', 100, 'Uttar Pradesh', 454156, 0),\n(1079, 'Warangal', 100, 'Andhra Pradesh', 447657, 0),\n(1080, 'Raipur', 100, 'Chhatisgarh', 438639, 0),\n(1081, 'Moradabad', 100, 'Uttar Pradesh', 429214, 0),\n(1082, 'Durgapur', 100, 'West Bengali', 425836, 0),\n(1083, 'Amravati', 100, 'Maharashtra', 421576, 0),\n(1084, 'Calicut (Kozhikode)', 100, 'Kerala', 419831, 0),\n(1085, 'Bikaner', 100, 'Rajasthan', 416289, 0),\n(1086, 'Bhubaneswar', 100, 'Orissa', 411542, 0),\n(1087, 'Kolhapur', 100, 'Maharashtra', 406370, 0),\n(1088, 'Kataka (Cuttack)', 100, 'Orissa', 403418, 0),\n(1089, 'Ajmer', 100, 'Rajasthan', 402700, 0),\n(1090, 'Bhavnagar', 100, 'Gujarat', 402338, 0),\n(1091, 'Tiruchirapalli', 100, 'Tamil Nadu', 387223, 0),\n(1092, 'Bhilai', 100, 'Chhatisgarh', 386159, 0),\n(1093, 'Bhiwandi', 100, 'Maharashtra', 379070, 0),\n(1094, 'Saharanpur', 100, 'Uttar Pradesh', 374945, 0),\n(1095, 'Ulhasnagar', 100, 'Maharashtra', 369077, 0),\n(1096, 'Salem', 100, 'Tamil Nadu', 366712, 0),\n(1097, 'Ujjain', 100, 'Madhya Pradesh', 362266, 0),\n(1098, 'Malegaon', 100, 'Maharashtra', 342595, 0),\n(1099, 'Jamnagar', 100, 'Gujarat', 341637, 0),\n(1100, 'Bokaro Steel City', 100, 'Jharkhand', 333683, 0),\n(1101, 'Akola', 100, 'Maharashtra', 328034, 0),\n(1102, 'Belgaum', 100, 'Karnataka', 326399, 0),\n(1103, 'Rajahmundry', 100, 'Andhra Pradesh', 324851, 0),\n(1104, 'Nellore', 100, 'Andhra Pradesh', 316606, 0),\n(1105, 'Udaipur', 100, 'Rajasthan', 308571, 0),\n(1106, 'New Bombay', 100, 'Maharashtra', 307297, 0),\n(1107, 'Bhatpara', 100, 'West Bengali', 304952, 0),\n(1108, 'Gulbarga', 100, 'Karnataka', 304099, 0),\n(1109, 'New Delhi', 100, 'Delhi', 301297, 1),\n(1110, 'Jhansi', 100, 'Uttar Pradesh', 300850, 0),\n(1111, 'Gaya', 100, 'Bihar', 291675, 0),\n(1112, 'Kakinada', 100, 'Andhra Pradesh', 279980, 0),\n(1113, 'Dhule (Dhulia)', 100, 'Maharashtra', 278317, 0),\n(1114, 'Panihati', 100, 'West Bengali', 275990, 0),\n(1115, 'Nanded (Nander)', 100, 'Maharashtra', 275083, 0),\n(1116, 'Mangalore', 100, 'Karnataka', 273304, 0),\n(1117, 'Dehra Dun', 100, 'Uttaranchal', 270159, 0),\n(1118, 'Kamarhati', 100, 'West Bengali', 266889, 0),\n(1119, 'Davangere', 100, 'Karnataka', 266082, 0),\n(1120, 'Asansol', 100, 'West Bengali', 262188, 0),\n(1121, 'Bhagalpur', 100, 'Bihar', 253225, 0),\n(1122, 'Bellary', 100, 'Karnataka', 245391, 0),\n(1123, 'Barddhaman (Burdwan)', 100, 'West Bengali', 245079, 0),\n(1124, 'Rampur', 100, 'Uttar Pradesh', 243742, 0),\n(1125, 'Jalgaon', 100, 'Maharashtra', 242193, 0),\n(1126, 'Muzaffarpur', 100, 'Bihar', 241107, 0),\n(1127, 'Nizamabad', 100, 'Andhra Pradesh', 241034, 0),\n(1128, 'Muzaffarnagar', 100, 'Uttar Pradesh', 240609, 0),\n(1129, 'Patiala', 100, 'Punjab', 238368, 0),\n(1130, 'Shahjahanpur', 100, 'Uttar Pradesh', 237713, 0),\n(1131, 'Kurnool', 100, 'Andhra Pradesh', 236800, 0),\n(1132, 'Tiruppur (Tirupper)', 100, 'Tamil Nadu', 235661, 0),\n(1133, 'Rohtak', 100, 'Haryana', 233400, 0),\n(1134, 'South Dum Dum', 100, 'West Bengali', 232811, 0),\n(1135, 'Mathura', 100, 'Uttar Pradesh', 226691, 0),\n(1136, 'Chandrapur', 100, 'Maharashtra', 226105, 0),\n(1137, 'Barahanagar (Baranagar)', 100, 'West Bengali', 224821, 0),\n(1138, 'Darbhanga', 100, 'Bihar', 218391, 0),\n(1139, 'Siliguri (Shiliguri)', 100, 'West Bengali', 216950, 0),\n(1140, 'Raurkela', 100, 'Orissa', 215489, 0),\n(1141, 'Ambattur', 100, 'Tamil Nadu', 215424, 0),\n(1142, 'Panipat', 100, 'Haryana', 215218, 0),\n(1143, 'Firozabad', 100, 'Uttar Pradesh', 215128, 0),\n(1144, 'Ichalkaranji', 100, 'Maharashtra', 214950, 0),\n(1145, 'Jammu', 100, 'Jammu and Kashmir', 214737, 0),\n(1146, 'Ramagundam', 100, 'Andhra Pradesh', 214384, 0),\n(1147, 'Eluru', 100, 'Andhra Pradesh', 212866, 0),\n(1148, 'Brahmapur', 100, 'Orissa', 210418, 0),\n(1149, 'Alwar', 100, 'Rajasthan', 205086, 0),\n(1150, 'Pondicherry', 100, 'Pondicherry', 203065, 0),\n(1151, 'Thanjavur', 100, 'Tamil Nadu', 202013, 0),\n(1152, 'Bihar Sharif', 100, 'Bihar', 201323, 0),\n(1153, 'Tuticorin', 100, 'Tamil Nadu', 199854, 0),\n(1154, 'Imphal', 100, 'Manipur', 198535, 0),\n(1155, 'Latur', 100, 'Maharashtra', 197408, 0),\n(1156, 'Sagar', 100, 'Madhya Pradesh', 195346, 0),\n(1157, 'Farrukhabad-cum-Fatehgarh', 100, 'Uttar Pradesh', 194567, 0),\n(1158, 'Sangli', 100, 'Maharashtra', 193197, 0),\n(1159, 'Parbhani', 100, 'Maharashtra', 190255, 0),\n(1160, 'Nagar Coil', 100, 'Tamil Nadu', 190084, 0),\n(1161, 'Bijapur', 100, 'Karnataka', 186939, 0),\n(1162, 'Kukatpalle', 100, 'Andhra Pradesh', 185378, 0),\n(1163, 'Bally', 100, 'West Bengali', 184474, 0),\n(1164, 'Bhilwara', 100, 'Rajasthan', 183965, 0),\n(1165, 'Ratlam', 100, 'Madhya Pradesh', 183375, 0),\n(1166, 'Avadi', 100, 'Tamil Nadu', 183215, 0),\n(1167, 'Dindigul', 100, 'Tamil Nadu', 182477, 0),\n(1168, 'Ahmadnagar', 100, 'Maharashtra', 181339, 0),\n(1169, 'Bilaspur', 100, 'Chhatisgarh', 179833, 0),\n(1170, 'Shimoga', 100, 'Karnataka', 179258, 0),\n(1171, 'Kharagpur', 100, 'West Bengali', 177989, 0),\n(1172, 'Mira Bhayandar', 100, 'Maharashtra', 175372, 0),\n(1173, 'Vellore', 100, 'Tamil Nadu', 175061, 0),\n(1174, 'Jalna', 100, 'Maharashtra', 174985, 0),\n(1175, 'Burnpur', 100, 'West Bengali', 174933, 0),\n(1176, 'Anantapur', 100, 'Andhra Pradesh', 174924, 0),\n(1177, 'Allappuzha (Alleppey)', 100, 'Kerala', 174666, 0),\n(1178, 'Tirupati', 100, 'Andhra Pradesh', 174369, 0),\n(1179, 'Karnal', 100, 'Haryana', 173751, 0),\n(1180, 'Burhanpur', 100, 'Madhya Pradesh', 172710, 0),\n(1181, 'Hisar (Hissar)', 100, 'Haryana', 172677, 0),\n(1182, 'Tiruvottiyur', 100, 'Tamil Nadu', 172562, 0),\n(1183, 'Mirzapur-cum-Vindhyachal', 100, 'Uttar Pradesh', 169336, 0),\n(1184, 'Secunderabad', 100, 'Andhra Pradesh', 167461, 0),\n(1185, 'Nadiad', 100, 'Gujarat', 167051, 0),\n(1186, 'Dewas', 100, 'Madhya Pradesh', 164364, 0),\n(1187, 'Murwara (Katni)', 100, 'Madhya Pradesh', 163431, 0),\n(1188, 'Ganganagar', 100, 'Rajasthan', 161482, 0),\n(1189, 'Vizianagaram', 100, 'Andhra Pradesh', 160359, 0),\n(1190, 'Erode', 100, 'Tamil Nadu', 159232, 0),\n(1191, 'Machilipatnam (Masulipatam)', 100, 'Andhra Pradesh', 159110, 0),\n(1192, 'Bhatinda (Bathinda)', 100, 'Punjab', 159042, 0),\n(1193, 'Raichur', 100, 'Karnataka', 157551, 0),\n(1194, 'Agartala', 100, 'Tripura', 157358, 0),\n(1195, 'Arrah (Ara)', 100, 'Bihar', 157082, 0),\n(1196, 'Satna', 100, 'Madhya Pradesh', 156630, 0),\n(1197, 'Lalbahadur Nagar', 100, 'Andhra Pradesh', 155500, 0),\n(1198, 'Aizawl', 100, 'Mizoram', 155240, 0),\n(1199, 'Uluberia', 100, 'West Bengali', 155172, 0),\n(1200, 'Katihar', 100, 'Bihar', 154367, 0),\n(1201, 'Cuddalore', 100, 'Tamil Nadu', 153086, 0),\n(1202, 'Hugli-Chinsurah', 100, 'West Bengali', 151806, 0),\n(1203, 'Dhanbad', 100, 'Jharkhand', 151789, 0),\n(1204, 'Raiganj', 100, 'West Bengali', 151045, 0),\n(1205, 'Sambhal', 100, 'Uttar Pradesh', 150869, 0),\n(1206, 'Durg', 100, 'Chhatisgarh', 150645, 0),\n(1207, 'Munger (Monghyr)', 100, 'Bihar', 150112, 0),\n(1208, 'Kanchipuram', 100, 'Tamil Nadu', 150100, 0),\n(1209, 'North Dum Dum', 100, 'West Bengali', 149965, 0),\n(1210, 'Karimnagar', 100, 'Andhra Pradesh', 148583, 0),\n(1211, 'Bharatpur', 100, 'Rajasthan', 148519, 0),\n(1212, 'Sikar', 100, 'Rajasthan', 148272, 0),\n(1213, 'Hardwar (Haridwar)', 100, 'Uttaranchal', 147305, 0),\n(1214, 'Dabgram', 100, 'West Bengali', 147217, 0),\n(1215, 'Morena', 100, 'Madhya Pradesh', 147124, 0),\n(1216, 'Noida', 100, 'Uttar Pradesh', 146514, 0),\n(1217, 'Hapur', 100, 'Uttar Pradesh', 146262, 0),\n(1218, 'Bhusawal', 100, 'Maharashtra', 145143, 0),\n(1219, 'Khandwa', 100, 'Madhya Pradesh', 145133, 0),\n(1220, 'Yamuna Nagar', 100, 'Haryana', 144346, 0),\n(1221, 'Sonipat (Sonepat)', 100, 'Haryana', 143922, 0),\n(1222, 'Tenali', 100, 'Andhra Pradesh', 143726, 0),\n(1223, 'Raurkela Civil Township', 100, 'Orissa', 140408, 0),\n(1224, 'Kollam (Quilon)', 100, 'Kerala', 139852, 0),\n(1225, 'Kumbakonam', 100, 'Tamil Nadu', 139483, 0),\n(1226, 'Ingraj Bazar (English Bazar)', 100, 'West Bengali', 139204, 0),\n(1227, 'Timkur', 100, 'Karnataka', 138903, 0),\n(1228, 'Amroha', 100, 'Uttar Pradesh', 137061, 0),\n(1229, 'Serampore', 100, 'West Bengali', 137028, 0),\n(1230, 'Chapra', 100, 'Bihar', 136877, 0),\n(1231, 'Pali', 100, 'Rajasthan', 136842, 0),\n(1232, 'Maunath Bhanjan', 100, 'Uttar Pradesh', 136697, 0),\n(1233, 'Adoni', 100, 'Andhra Pradesh', 136182, 0),\n(1234, 'Jaunpur', 100, 'Uttar Pradesh', 136062, 0),\n(1235, 'Tirunelveli', 100, 'Tamil Nadu', 135825, 0),\n(1236, 'Bahraich', 100, 'Uttar Pradesh', 135400, 0),\n(1237, 'Gadag Betigeri', 100, 'Karnataka', 134051, 0),\n(1238, 'Proddatur', 100, 'Andhra Pradesh', 133914, 0),\n(1239, 'Chittoor', 100, 'Andhra Pradesh', 133462, 0),\n(1240, 'Barrackpur', 100, 'West Bengali', 133265, 0),\n(1241, 'Bharuch (Broach)', 100, 'Gujarat', 133102, 0),\n(1242, 'Naihati', 100, 'West Bengali', 132701, 0),\n(1243, 'Shillong', 100, 'Meghalaya', 131719, 0),\n(1244, 'Sambalpur', 100, 'Orissa', 131138, 0),\n(1245, 'Junagadh', 100, 'Gujarat', 130484, 0),\n(1246, 'Rae Bareli', 100, 'Uttar Pradesh', 129904, 0),\n(1247, 'Rewa', 100, 'Madhya Pradesh', 128981, 0),\n(1248, 'Gurgaon', 100, 'Haryana', 128608, 0),\n(1249, 'Khammam', 100, 'Andhra Pradesh', 127992, 0),\n(1250, 'Bulandshahr', 100, 'Uttar Pradesh', 127201, 0),\n(1251, 'Navsari', 100, 'Gujarat', 126089, 0),\n(1252, 'Malkajgiri', 100, 'Andhra Pradesh', 126066, 0),\n(1253, 'Midnapore (Medinipur)', 100, 'West Bengali', 125498, 0),\n(1254, 'Miraj', 100, 'Maharashtra', 125407, 0),\n(1255, 'Raj Nandgaon', 100, 'Chhatisgarh', 125371, 0),\n(1256, 'Alandur', 100, 'Tamil Nadu', 125244, 0),\n(1257, 'Puri', 100, 'Orissa', 125199, 0),\n(1258, 'Navadwip', 100, 'West Bengali', 125037, 0),\n(1259, 'Sirsa', 100, 'Haryana', 125000, 0),\n(1260, 'Korba', 100, 'Chhatisgarh', 124501, 0),\n(1261, 'Faizabad', 100, 'Uttar Pradesh', 124437, 0),\n(1262, 'Etawah', 100, 'Uttar Pradesh', 124072, 0),\n(1263, 'Pathankot', 100, 'Punjab', 123930, 0),\n(1264, 'Gandhinagar', 100, 'Gujarat', 123359, 0),\n(1265, 'Palghat (Palakkad)', 100, 'Kerala', 123289, 0),\n(1266, 'Veraval', 100, 'Gujarat', 123000, 0),\n(1267, 'Hoshiarpur', 100, 'Punjab', 122705, 0),\n(1268, 'Ambala', 100, 'Haryana', 122596, 0),\n(1269, 'Sitapur', 100, 'Uttar Pradesh', 121842, 0),\n(1270, 'Bhiwani', 100, 'Haryana', 121629, 0),\n(1271, 'Cuddapah', 100, 'Andhra Pradesh', 121463, 0),\n(1272, 'Bhimavaram', 100, 'Andhra Pradesh', 121314, 0),\n(1273, 'Krishnanagar', 100, 'West Bengali', 121110, 0),\n(1274, 'Chandannagar', 100, 'West Bengali', 120378, 0),\n(1275, 'Mandya', 100, 'Karnataka', 120265, 0),\n(1276, 'Dibrugarh', 100, 'Assam', 120127, 0),\n(1277, 'Nandyal', 100, 'Andhra Pradesh', 119813, 0),\n(1278, 'Balurghat', 100, 'West Bengali', 119796, 0),\n(1279, 'Neyveli', 100, 'Tamil Nadu', 118080, 0),\n(1280, 'Fatehpur', 100, 'Uttar Pradesh', 117675, 0),\n(1281, 'Mahbubnagar', 100, 'Andhra Pradesh', 116833, 0),\n(1282, 'Budaun', 100, 'Uttar Pradesh', 116695, 0),\n(1283, 'Porbandar', 100, 'Gujarat', 116671, 0),\n(1284, 'Silchar', 100, 'Assam', 115483, 0),\n(1285, 'Berhampore (Baharampur)', 100, 'West Bengali', 115144, 0),\n(1286, 'Purnea (Purnia)', 100, 'Jharkhand', 114912, 0),\n(1287, 'Bankura', 100, 'West Bengali', 114876, 0),\n(1288, 'Rajapalaiyam', 100, 'Tamil Nadu', 114202, 0),\n(1289, 'Titagarh', 100, 'West Bengali', 114085, 0),\n(1290, 'Halisahar', 100, 'West Bengali', 114028, 0),\n(1291, 'Hathras', 100, 'Uttar Pradesh', 113285, 0),\n(1292, 'Bhir (Bid)', 100, 'Maharashtra', 112434, 0),\n(1293, 'Pallavaram', 100, 'Tamil Nadu', 111866, 0),\n(1294, 'Anand', 100, 'Gujarat', 110266, 0),\n(1295, 'Mango', 100, 'Jharkhand', 110024, 0),\n(1296, 'Santipur', 100, 'West Bengali', 109956, 0),\n(1297, 'Bhind', 100, 'Madhya Pradesh', 109755, 0),\n(1298, 'Gondiya', 100, 'Maharashtra', 109470, 0),\n(1299, 'Tiruvannamalai', 100, 'Tamil Nadu', 109196, 0),\n(1300, 'Yeotmal (Yavatmal)', 100, 'Maharashtra', 108578, 0),\n(1301, 'Kulti-Barakar', 100, 'West Bengali', 108518, 0),\n(1302, 'Moga', 100, 'Punjab', 108304, 0),\n(1303, 'Shivapuri', 100, 'Madhya Pradesh', 108277, 0),\n(1304, 'Bidar', 100, 'Karnataka', 108016, 0),\n(1305, 'Guntakal', 100, 'Andhra Pradesh', 107592, 0),\n(1306, 'Unnao', 100, 'Uttar Pradesh', 107425, 0),\n(1307, 'Barasat', 100, 'West Bengali', 107365, 0),\n(1308, 'Tambaram', 100, 'Tamil Nadu', 107187, 0),\n(1309, 'Abohar', 100, 'Punjab', 107163, 0),\n(1310, 'Pilibhit', 100, 'Uttar Pradesh', 106605, 0),\n(1311, 'Valparai', 100, 'Tamil Nadu', 106523, 0),\n(1312, 'Gonda', 100, 'Uttar Pradesh', 106078, 0),\n(1313, 'Surendranagar', 100, 'Gujarat', 105973, 0),\n(1314, 'Qutubullapur', 100, 'Andhra Pradesh', 105380, 0),\n(1315, 'Beawar', 100, 'Rajasthan', 105363, 0),\n(1316, 'Hindupur', 100, 'Andhra Pradesh', 104651, 0),\n(1317, 'Gandhidham', 100, 'Gujarat', 104585, 0),\n(1318, 'Haldwani-cum-Kathgodam', 100, 'Uttaranchal', 104195, 0),\n(1319, 'Tellicherry (Thalassery)', 100, 'Kerala', 103579, 0),\n(1320, 'Wardha', 100, 'Maharashtra', 102985, 0),\n(1321, 'Rishra', 100, 'West Bengali', 102649, 0),\n(1322, 'Bhuj', 100, 'Gujarat', 102176, 0),\n(1323, 'Modinagar', 100, 'Uttar Pradesh', 101660, 0),\n(1324, 'Gudivada', 100, 'Andhra Pradesh', 101656, 0),\n(1325, 'Basirhat', 100, 'West Bengali', 101409, 0),\n(1326, 'Uttarpara-Kotrung', 100, 'West Bengali', 100867, 0),\n(1327, 'Ongole', 100, 'Andhra Pradesh', 100836, 0),\n(1328, 'North Barrackpur', 100, 'West Bengali', 100513, 0),\n(1329, 'Guna', 100, 'Madhya Pradesh', 100490, 0),\n(1330, 'Haldia', 100, 'West Bengali', 100347, 0),\n(1331, 'Habra', 100, 'West Bengali', 100223, 0),\n(1332, 'Kanchrapara', 100, 'West Bengali', 100194, 0),\n(1333, 'Tonk', 100, 'Rajasthan', 100079, 0),\n(1334, 'Champdani', 100, 'West Bengali', 98818, 0),\n(1335, 'Orai', 100, 'Uttar Pradesh', 98640, 0),\n(1336, 'Pudukkottai', 100, 'Tamil Nadu', 98619, 0),\n(1337, 'Sasaram', 100, 'Bihar', 98220, 0),\n(1338, 'Hazaribag', 100, 'Jharkhand', 97712, 0),\n(1339, 'Palayankottai', 100, 'Tamil Nadu', 97662, 0),\n(1340, 'Banda', 100, 'Uttar Pradesh', 97227, 0),\n(1341, 'Godhra', 100, 'Gujarat', 96813, 0),\n(1342, 'Hospet', 100, 'Karnataka', 96322, 0),\n(1343, 'Ashoknagar-Kalyangarh', 100, 'West Bengali', 96315, 0),\n(1344, 'Achalpur', 100, 'Maharashtra', 96216, 0),\n(1345, 'Patan', 100, 'Gujarat', 96109, 0),\n(1346, 'Mandasor', 100, 'Madhya Pradesh', 95758, 0),\n(1347, 'Damoh', 100, 'Madhya Pradesh', 95661, 0),\n(1348, 'Satara', 100, 'Maharashtra', 95133, 0),\n(1349, 'Meerut Cantonment', 100, 'Uttar Pradesh', 94876, 0),\n(1350, 'Dehri', 100, 'Bihar', 94526, 0),\n(1351, 'Delhi Cantonment', 100, 'Delhi', 94326, 0),\n(1352, 'Chhindwara', 100, 'Madhya Pradesh', 93731, 0),\n(1353, 'Bansberia', 100, 'West Bengali', 93447, 0),\n(1354, 'Nagaon', 100, 'Assam', 93350, 0),\n(1355, 'Kanpur Cantonment', 100, 'Uttar Pradesh', 93109, 0),\n(1356, 'Vidisha', 100, 'Madhya Pradesh', 92917, 0),\n(1357, 'Bettiah', 100, 'Bihar', 92583, 0),\n(1358, 'Purulia', 100, 'Jharkhand', 92574, 0),\n(1359, 'Hassan', 100, 'Karnataka', 90803, 0),\n(1360, 'Ambala Sadar', 100, 'Haryana', 90712, 0),\n(1361, 'Baidyabati', 100, 'West Bengali', 90601, 0),\n(1362, 'Morvi', 100, 'Gujarat', 90357, 0),\n(1363, 'Raigarh', 100, 'Chhatisgarh', 89166, 0),\n(1364, 'Vejalpur', 100, 'Gujarat', 89053, 0),\n(1365, 'Baghdad', 104, 'Baghdad', 4336000, 1),\n(1366, 'Mosul', 104, 'Ninawa', 879000, 0),\n(1367, 'Irbil', 104, 'Irbil', 485968, 0),\n(1368, 'Kirkuk', 104, 'al-Tamim', 418624, 0),\n(1369, 'Basra', 104, 'Basra', 406296, 0),\n(1370, 'al-Sulaymaniya', 104, 'al-Sulaymaniya', 364096, 0),\n(1371, 'al-Najaf', 104, 'al-Najaf', 309010, 0),\n(1372, 'Karbala', 104, 'Karbala', 296705, 0),\n(1373, 'al-Hilla', 104, 'Babil', 268834, 0),\n(1374, 'al-Nasiriya', 104, 'DhiQar', 265937, 0),\n(1375, 'al-Amara', 104, 'Maysan', 208797, 0),\n(1376, 'al-Diwaniya', 104, 'al-Qadisiya', 196519, 0),\n(1377, 'al-Ramadi', 104, 'al-Anbar', 192556, 0),\n(1378, 'al-Kut', 104, 'Wasit', 183183, 0),\n(1379, 'Baquba', 104, 'Diyala', 114516, 0),\n(1380, 'Teheran', 103, 'Teheran', 6758845, 1),\n(1381, 'Mashhad', 103, 'Khorasan', 1887405, 0),\n(1382, 'Esfahan', 103, 'Esfahan', 1266072, 0),\n(1383, 'Tabriz', 103, 'East Azerbaidzan', 1191043, 0),\n(1384, 'Shiraz', 103, 'Fars', 1053025, 0),\n(1385, 'Karaj', 103, 'Teheran', 940968, 0),\n(1386, 'Ahvaz', 103, 'Khuzestan', 804980, 0),\n(1387, 'Qom', 103, 'Qom', 777677, 0),\n(1388, 'Kermanshah', 103, 'Kermanshah', 692986, 0),\n(1389, 'Urmia', 103, 'West Azerbaidzan', 435200, 0),\n(1390, 'Zahedan', 103, 'Sistan va Baluchesta', 419518, 0),\n(1391, 'Rasht', 103, 'Gilan', 417748, 0),\n(1392, 'Hamadan', 103, 'Hamadan', 401281, 0),\n(1393, 'Kerman', 103, 'Kerman', 384991, 0),\n(1394, 'Arak', 103, 'Markazi', 380755, 0),\n(1395, 'Ardebil', 103, 'Ardebil', 340386, 0),\n(1396, 'Yazd', 103, 'Yazd', 326776, 0),\n(1397, 'Qazvin', 103, 'Qazvin', 291117, 0),\n(1398, 'Zanjan', 103, 'Zanjan', 286295, 0),\n(1399, 'Sanandaj', 103, 'Kordestan', 277808, 0),\n(1400, 'Bandar-e-Abbas', 103, 'Hormozgan', 273578, 0),\n(1401, 'Khorramabad', 103, 'Lorestan', 272815, 0),\n(1402, 'Eslamshahr', 103, 'Teheran', 265450, 0),\n(1403, 'Borujerd', 103, 'Lorestan', 217804, 0),\n(1404, 'Abadan', 103, 'Khuzestan', 206073, 0),\n(1405, 'Dezful', 103, 'Khuzestan', 202639, 0),\n(1406, 'Kashan', 103, 'Esfahan', 201372, 0),\n(1407, 'Sari', 103, 'Mazandaran', 195882, 0),\n(1408, 'Gorgan', 103, 'Golestan', 188710, 0),\n(1409, 'Najafabad', 103, 'Esfahan', 178498, 0),\n(1410, 'Sabzevar', 103, 'Khorasan', 170738, 0),\n(1411, 'Khomeynishahr', 103, 'Esfahan', 165888, 0),\n(1412, 'Amol', 103, 'Mazandaran', 159092, 0),\n(1413, 'Neyshabur', 103, 'Khorasan', 158847, 0),\n(1414, 'Babol', 103, 'Mazandaran', 158346, 0),\n(1415, 'Khoy', 103, 'West Azerbaidzan', 148944, 0),\n(1416, 'Malayer', 103, 'Hamadan', 144373, 0),\n(1417, 'Bushehr', 103, 'Bushehr', 143641, 0),\n(1418, 'Qaemshahr', 103, 'Mazandaran', 143286, 0),\n(1419, 'Qarchak', 103, 'Teheran', 142690, 0),\n(1420, 'Qods', 103, 'Teheran', 138278, 0),\n(1421, 'Sirjan', 103, 'Kerman', 135024, 0),\n(1422, 'Bojnurd', 103, 'Khorasan', 134835, 0),\n(1423, 'Maragheh', 103, 'East Azerbaidzan', 132318, 0),\n(1424, 'Birjand', 103, 'Khorasan', 127608, 0),\n(1425, 'Ilam', 103, 'Ilam', 126346, 0),\n(1426, 'Bukan', 103, 'West Azerbaidzan', 120020, 0),\n(1427, 'Masjed-e-Soleyman', 103, 'Khuzestan', 116883, 0),\n(1428, 'Saqqez', 103, 'Kordestan', 115394, 0),\n(1429, 'Gonbad-e Qabus', 103, 'Mazandaran', 111253, 0),\n(1430, 'Saveh', 103, 'Qom', 111245, 0),\n(1431, 'Mahabad', 103, 'West Azerbaidzan', 107799, 0),\n(1432, 'Varamin', 103, 'Teheran', 107233, 0),\n(1433, 'Andimeshk', 103, 'Khuzestan', 106923, 0),\n(1434, 'Khorramshahr', 103, 'Khuzestan', 105636, 0),\n(1435, 'Shahrud', 103, 'Semnan', 104765, 0),\n(1436, 'Marv Dasht', 103, 'Fars', 103579, 0),\n(1437, 'Zabol', 103, 'Sistan va Baluchesta', 100887, 0),\n(1438, 'Shahr-e Kord', 103, 'Chaharmahal va Bakht', 100477, 0),\n(1439, 'Bandar-e Anzali', 103, 'Gilan', 98500, 0),\n(1440, 'Rafsanjan', 103, 'Kerman', 98300, 0),\n(1441, 'Marand', 103, 'East Azerbaidzan', 96400, 0),\n(1442, 'Torbat-e Heydariyeh', 103, 'Khorasan', 94600, 0),\n(1443, 'Jahrom', 103, 'Fars', 94200, 0),\n(1444, 'Semnan', 103, 'Semnan', 91045, 0),\n(1445, 'Miandoab', 103, 'West Azerbaidzan', 90100, 0),\n(1446, 'Qomsheh', 103, 'Esfahan', 89800, 0),\n(1447, 'Dublin', 102, 'Leinster', 481854, 1),\n(1448, 'Cork', 102, 'Munster', 127187, 0),\n(1449, 'Reykjavík', 105, 'Höfuðborgarsvæði', 109184, 1),\n(1450, 'Jerusalem', 106, 'Jerusalem', 633700, 1),\n(1451, 'Tel Aviv-Jaffa', 106, 'Tel Aviv', 348100, 0),\n(1452, 'Haifa', 106, 'Haifa', 265700, 0),\n(1453, 'Rishon Le Ziyyon', 106, 'Ha Merkaz', 188200, 0),\n(1454, 'Beerseba', 106, 'Ha Darom', 163700, 0),\n(1455, 'Holon', 106, 'Tel Aviv', 163100, 0),\n(1456, 'Petah Tiqwa', 106, 'Ha Merkaz', 159400, 0),\n(1457, 'Ashdod', 106, 'Ha Darom', 155800, 0),\n(1458, 'Netanya', 106, 'Ha Merkaz', 154900, 0),\n(1459, 'Bat Yam', 106, 'Tel Aviv', 137000, 0),\n(1460, 'Bene Beraq', 106, 'Tel Aviv', 133900, 0),\n(1461, 'Ramat Gan', 106, 'Tel Aviv', 126900, 0),\n(1462, 'Ashqelon', 106, 'Ha Darom', 92300, 0),\n(1463, 'Rehovot', 106, 'Ha Merkaz', 90300, 0),\n(1464, 'Roma', 107, 'Latium', 2643581, 1),\n(1465, 'Milano', 107, 'Lombardia', 1300977, 0),\n(1466, 'Napoli', 107, 'Campania', 1002619, 0),\n(1467, 'Torino', 107, 'Piemonte', 903705, 0),\n(1468, 'Palermo', 107, 'Sisilia', 683794, 0),\n(1469, 'Genova', 107, 'Liguria', 636104, 0),\n(1470, 'Bologna', 107, 'Emilia-Romagna', 381161, 0),\n(1471, 'Firenze', 107, 'Toscana', 376662, 0),\n(1472, 'Catania', 107, 'Sisilia', 337862, 0),\n(1473, 'Bari', 107, 'Apulia', 331848, 0),\n(1474, 'Venezia', 107, 'Veneto', 277305, 0),\n(1475, 'Messina', 107, 'Sisilia', 259156, 0),\n(1476, 'Verona', 107, 'Veneto', 255268, 0),\n(1477, 'Trieste', 107, 'Friuli-Venezia Giuli', 216459, 0),\n(1478, 'Padova', 107, 'Veneto', 211391, 0),\n(1479, 'Taranto', 107, 'Apulia', 208214, 0),\n(1480, 'Brescia', 107, 'Lombardia', 191317, 0),\n(1481, 'Reggio di Calabria', 107, 'Calabria', 179617, 0),\n(1482, 'Modena', 107, 'Emilia-Romagna', 176022, 0),\n(1483, 'Prato', 107, 'Toscana', 172473, 0),\n(1484, 'Parma', 107, 'Emilia-Romagna', 168717, 0),\n(1485, 'Cagliari', 107, 'Sardinia', 165926, 0),\n(1486, 'Livorno', 107, 'Toscana', 161673, 0),\n(1487, 'Perugia', 107, 'Umbria', 156673, 0),\n(1488, 'Foggia', 107, 'Apulia', 154891, 0),\n(1489, 'Reggio nell´ Emilia', 107, 'Emilia-Romagna', 143664, 0),\n(1490, 'Salerno', 107, 'Campania', 142055, 0),\n(1491, 'Ravenna', 107, 'Emilia-Romagna', 138418, 0),\n(1492, 'Ferrara', 107, 'Emilia-Romagna', 132127, 0),\n(1493, 'Rimini', 107, 'Emilia-Romagna', 131062, 0),\n(1494, 'Syrakusa', 107, 'Sisilia', 126282, 0),\n(1495, 'Sassari', 107, 'Sardinia', 120803, 0),\n(1496, 'Monza', 107, 'Lombardia', 119516, 0),\n(1497, 'Bergamo', 107, 'Lombardia', 117837, 0),\n(1498, 'Pescara', 107, 'Abruzzit', 115698, 0),\n(1499, 'Latina', 107, 'Latium', 114099, 0),\n(1500, 'Vicenza', 107, 'Veneto', 109738, 0),\n(1501, 'Terni', 107, 'Umbria', 107770, 0),\n(1502, 'Forlì', 107, 'Emilia-Romagna', 107475, 0),\n(1503, 'Trento', 107, 'Trentino-Alto Adige', 104906, 0),\n(1504, 'Novara', 107, 'Piemonte', 102037, 0),\n(1505, 'Piacenza', 107, 'Emilia-Romagna', 98384, 0),\n(1506, 'Ancona', 107, 'Marche', 98329, 0),\n(1507, 'Lecce', 107, 'Apulia', 98208, 0),\n(1508, 'Bolzano', 107, 'Trentino-Alto Adige', 97232, 0),\n(1509, 'Catanzaro', 107, 'Calabria', 96700, 0),\n(1510, 'La Spezia', 107, 'Liguria', 95504, 0),\n(1511, 'Udine', 107, 'Friuli-Venezia Giuli', 94932, 0),\n(1512, 'Torre del Greco', 107, 'Campania', 94505, 0),\n(1513, 'Andria', 107, 'Apulia', 94443, 0),\n(1514, 'Brindisi', 107, 'Apulia', 93454, 0),\n(1515, 'Giugliano in Campania', 107, 'Campania', 93286, 0),\n(1516, 'Pisa', 107, 'Toscana', 92379, 0),\n(1517, 'Barletta', 107, 'Apulia', 91904, 0),\n(1518, 'Arezzo', 107, 'Toscana', 91729, 0),\n(1519, 'Alessandria', 107, 'Piemonte', 90289, 0),\n(1520, 'Cesena', 107, 'Emilia-Romagna', 89852, 0),\n(1521, 'Pesaro', 107, 'Marche', 88987, 0),\n(1522, 'Dili', 212, 'Dili', 47900, 1),\n(1523, 'Wien', 16, 'Wien', 1608144, 1),\n(1524, 'Graz', 16, 'Steiermark', 240967, 0),\n(1525, 'Linz', 16, 'North Austria', 188022, 0),\n(1526, 'Salzburg', 16, 'Salzburg', 144247, 0),\n(1527, 'Innsbruck', 16, 'Tiroli', 111752, 0),\n(1528, 'Klagenfurt', 16, 'Kärnten', 91141, 0),\n(1529, 'Spanish Town', 108, 'St. Catherine', 110379, 0),\n(1530, 'Kingston', 108, 'St. Andrew', 103962, 1),\n(1531, 'Portmore', 108, 'St. Andrew', 99799, 0),\n(1532, 'Tokyo', 110, 'Tokyo-to', 7980230, 1),\n(1533, 'Jokohama [Yokohama]', 110, 'Kanagawa', 3339594, 0),\n(1534, 'Osaka', 110, 'Osaka', 2595674, 0),\n(1535, 'Nagoya', 110, 'Aichi', 2154376, 0),\n(1536, 'Sapporo', 110, 'Hokkaido', 1790886, 0),\n(1537, 'Kioto', 110, 'Kyoto', 1461974, 0),\n(1538, 'Kobe', 110, 'Hyogo', 1425139, 0),\n(1539, 'Fukuoka', 110, 'Fukuoka', 1308379, 0),\n(1540, 'Kawasaki', 110, 'Kanagawa', 1217359, 0),\n(1541, 'Hiroshima', 110, 'Hiroshima', 1119117, 0),\n(1542, 'Kitakyushu', 110, 'Fukuoka', 1016264, 0),\n(1543, 'Sendai', 110, 'Miyagi', 989975, 0),\n(1544, 'Chiba', 110, 'Chiba', 863930, 0),\n(1545, 'Sakai', 110, 'Osaka', 797735, 0),\n(1546, 'Kumamoto', 110, 'Kumamoto', 656734, 0),\n(1547, 'Okayama', 110, 'Okayama', 624269, 0),\n(1548, 'Sagamihara', 110, 'Kanagawa', 586300, 0),\n(1549, 'Hamamatsu', 110, 'Shizuoka', 568796, 0),\n(1550, 'Kagoshima', 110, 'Kagoshima', 549977, 0),\n(1551, 'Funabashi', 110, 'Chiba', 545299, 0),\n(1552, 'Higashiosaka', 110, 'Osaka', 517785, 0),\n(1553, 'Hachioji', 110, 'Tokyo-to', 513451, 0),\n(1554, 'Niigata', 110, 'Niigata', 497464, 0),\n(1555, 'Amagasaki', 110, 'Hyogo', 481434, 0),\n(1556, 'Himeji', 110, 'Hyogo', 475167, 0),\n(1557, 'Shizuoka', 110, 'Shizuoka', 473854, 0),\n(1558, 'Urawa', 110, 'Saitama', 469675, 0),\n(1559, 'Matsuyama', 110, 'Ehime', 466133, 0),\n(1560, 'Matsudo', 110, 'Chiba', 461126, 0),\n(1561, 'Kanazawa', 110, 'Ishikawa', 455386, 0),\n(1562, 'Kawaguchi', 110, 'Saitama', 452155, 0),\n(1563, 'Ichikawa', 110, 'Chiba', 441893, 0),\n(1564, 'Omiya', 110, 'Saitama', 441649, 0),\n(1565, 'Utsunomiya', 110, 'Tochigi', 440353, 0),\n(1566, 'Oita', 110, 'Oita', 433401, 0),\n(1567, 'Nagasaki', 110, 'Nagasaki', 432759, 0),\n(1568, 'Yokosuka', 110, 'Kanagawa', 430200, 0),\n(1569, 'Kurashiki', 110, 'Okayama', 425103, 0),\n(1570, 'Gifu', 110, 'Gifu', 408007, 0),\n(1571, 'Hirakata', 110, 'Osaka', 403151, 0),\n(1572, 'Nishinomiya', 110, 'Hyogo', 397618, 0),\n(1573, 'Toyonaka', 110, 'Osaka', 396689, 0),\n(1574, 'Wakayama', 110, 'Wakayama', 391233, 0),\n(1575, 'Fukuyama', 110, 'Hiroshima', 376921, 0),\n(1576, 'Fujisawa', 110, 'Kanagawa', 372840, 0),\n(1577, 'Asahikawa', 110, 'Hokkaido', 364813, 0),\n(1578, 'Machida', 110, 'Tokyo-to', 364197, 0),\n(1579, 'Nara', 110, 'Nara', 362812, 0),\n(1580, 'Takatsuki', 110, 'Osaka', 361747, 0),\n(1581, 'Iwaki', 110, 'Fukushima', 361737, 0),\n(1582, 'Nagano', 110, 'Nagano', 361391, 0),\n(1583, 'Toyohashi', 110, 'Aichi', 360066, 0),\n(1584, 'Toyota', 110, 'Aichi', 346090, 0),\n(1585, 'Suita', 110, 'Osaka', 345750, 0),\n(1586, 'Takamatsu', 110, 'Kagawa', 332471, 0),\n(1587, 'Koriyama', 110, 'Fukushima', 330335, 0),\n(1588, 'Okazaki', 110, 'Aichi', 328711, 0),\n(1589, 'Kawagoe', 110, 'Saitama', 327211, 0),\n(1590, 'Tokorozawa', 110, 'Saitama', 325809, 0),\n(1591, 'Toyama', 110, 'Toyama', 325790, 0),\n(1592, 'Kochi', 110, 'Kochi', 324710, 0),\n(1593, 'Kashiwa', 110, 'Chiba', 320296, 0),\n(1594, 'Akita', 110, 'Akita', 314440, 0),\n(1595, 'Miyazaki', 110, 'Miyazaki', 303784, 0),\n(1596, 'Koshigaya', 110, 'Saitama', 301446, 0),\n(1597, 'Naha', 110, 'Okinawa', 299851, 0),\n(1598, 'Aomori', 110, 'Aomori', 295969, 0),\n(1599, 'Hakodate', 110, 'Hokkaido', 294788, 0),\n(1600, 'Akashi', 110, 'Hyogo', 292253, 0),\n(1601, 'Yokkaichi', 110, 'Mie', 288173, 0),\n(1602, 'Fukushima', 110, 'Fukushima', 287525, 0),\n(1603, 'Morioka', 110, 'Iwate', 287353, 0),\n(1604, 'Maebashi', 110, 'Gumma', 284473, 0),\n(1605, 'Kasugai', 110, 'Aichi', 282348, 0),\n(1606, 'Otsu', 110, 'Shiga', 282070, 0),\n(1607, 'Ichihara', 110, 'Chiba', 279280, 0),\n(1608, 'Yao', 110, 'Osaka', 276421, 0),\n(1609, 'Ichinomiya', 110, 'Aichi', 270828, 0),\n(1610, 'Tokushima', 110, 'Tokushima', 269649, 0),\n(1611, 'Kakogawa', 110, 'Hyogo', 266281, 0),\n(1612, 'Ibaraki', 110, 'Osaka', 261020, 0),\n(1613, 'Neyagawa', 110, 'Osaka', 257315, 0),\n(1614, 'Shimonoseki', 110, 'Yamaguchi', 257263, 0),\n(1615, 'Yamagata', 110, 'Yamagata', 255617, 0),\n(1616, 'Fukui', 110, 'Fukui', 254818, 0),\n(1617, 'Hiratsuka', 110, 'Kanagawa', 254207, 0),\n(1618, 'Mito', 110, 'Ibaragi', 246559, 0),\n(1619, 'Sasebo', 110, 'Nagasaki', 244240, 0),\n(1620, 'Hachinohe', 110, 'Aomori', 242979, 0),\n(1621, 'Takasaki', 110, 'Gumma', 239124, 0),\n(1622, 'Shimizu', 110, 'Shizuoka', 239123, 0),\n(1623, 'Kurume', 110, 'Fukuoka', 235611, 0),\n(1624, 'Fuji', 110, 'Shizuoka', 231527, 0),\n(1625, 'Soka', 110, 'Saitama', 222768, 0),\n(1626, 'Fuchu', 110, 'Tokyo-to', 220576, 0),\n(1627, 'Chigasaki', 110, 'Kanagawa', 216015, 0),\n(1628, 'Atsugi', 110, 'Kanagawa', 212407, 0),\n(1629, 'Numazu', 110, 'Shizuoka', 211382, 0),\n(1630, 'Ageo', 110, 'Saitama', 209442, 0),\n(1631, 'Yamato', 110, 'Kanagawa', 208234, 0),\n(1632, 'Matsumoto', 110, 'Nagano', 206801, 0),\n(1633, 'Kure', 110, 'Hiroshima', 206504, 0),\n(1634, 'Takarazuka', 110, 'Hyogo', 205993, 0),\n(1635, 'Kasukabe', 110, 'Saitama', 201838, 0),\n(1636, 'Chofu', 110, 'Tokyo-to', 201585, 0),\n(1637, 'Odawara', 110, 'Kanagawa', 200171, 0),\n(1638, 'Kofu', 110, 'Yamanashi', 199753, 0),\n(1639, 'Kushiro', 110, 'Hokkaido', 197608, 0),\n(1640, 'Kishiwada', 110, 'Osaka', 197276, 0),\n(1641, 'Hitachi', 110, 'Ibaragi', 196622, 0),\n(1642, 'Nagaoka', 110, 'Niigata', 192407, 0),\n(1643, 'Itami', 110, 'Hyogo', 190886, 0),\n(1644, 'Uji', 110, 'Kyoto', 188735, 0),\n(1645, 'Suzuka', 110, 'Mie', 184061, 0),\n(1646, 'Hirosaki', 110, 'Aomori', 177522, 0),\n(1647, 'Ube', 110, 'Yamaguchi', 175206, 0),\n(1648, 'Kodaira', 110, 'Tokyo-to', 174984, 0),\n(1649, 'Takaoka', 110, 'Toyama', 174380, 0),\n(1650, 'Obihiro', 110, 'Hokkaido', 173685, 0),\n(1651, 'Tomakomai', 110, 'Hokkaido', 171958, 0),\n(1652, 'Saga', 110, 'Saga', 170034, 0),\n(1653, 'Sakura', 110, 'Chiba', 168072, 0),\n(1654, 'Kamakura', 110, 'Kanagawa', 167661, 0),\n(1655, 'Mitaka', 110, 'Tokyo-to', 167268, 0),\n(1656, 'Izumi', 110, 'Osaka', 166979, 0),\n(1657, 'Hino', 110, 'Tokyo-to', 166770, 0),\n(1658, 'Hadano', 110, 'Kanagawa', 166512, 0),\n(1659, 'Ashikaga', 110, 'Tochigi', 165243, 0),\n(1660, 'Tsu', 110, 'Mie', 164543, 0),\n(1661, 'Sayama', 110, 'Saitama', 162472, 0),\n(1662, 'Yachiyo', 110, 'Chiba', 161222, 0),\n(1663, 'Tsukuba', 110, 'Ibaragi', 160768, 0),\n(1664, 'Tachikawa', 110, 'Tokyo-to', 159430, 0),\n(1665, 'Kumagaya', 110, 'Saitama', 157171, 0),\n(1666, 'Moriguchi', 110, 'Osaka', 155941, 0),\n(1667, 'Otaru', 110, 'Hokkaido', 155784, 0),\n(1668, 'Anjo', 110, 'Aichi', 153823, 0),\n(1669, 'Narashino', 110, 'Chiba', 152849, 0),\n(1670, 'Oyama', 110, 'Tochigi', 152820, 0),\n(1671, 'Ogaki', 110, 'Gifu', 151758, 0),\n(1672, 'Matsue', 110, 'Shimane', 149821, 0),\n(1673, 'Kawanishi', 110, 'Hyogo', 149794, 0),\n(1674, 'Hitachinaka', 110, 'Tokyo-to', 148006, 0),\n(1675, 'Niiza', 110, 'Saitama', 147744, 0),\n(1676, 'Nagareyama', 110, 'Chiba', 147738, 0),\n(1677, 'Tottori', 110, 'Tottori', 147523, 0),\n(1678, 'Tama', 110, 'Ibaragi', 146712, 0),\n(1679, 'Iruma', 110, 'Saitama', 145922, 0),\n(1680, 'Ota', 110, 'Gumma', 145317, 0),\n(1681, 'Omuta', 110, 'Fukuoka', 142889, 0),\n(1682, 'Komaki', 110, 'Aichi', 139827, 0),\n(1683, 'Ome', 110, 'Tokyo-to', 139216, 0),\n(1684, 'Kadoma', 110, 'Osaka', 138953, 0),\n(1685, 'Yamaguchi', 110, 'Yamaguchi', 138210, 0),\n(1686, 'Higashimurayama', 110, 'Tokyo-to', 136970, 0),\n(1687, 'Yonago', 110, 'Tottori', 136461, 0),\n(1688, 'Matsubara', 110, 'Osaka', 135010, 0),\n(1689, 'Musashino', 110, 'Tokyo-to', 134426, 0),\n(1690, 'Tsuchiura', 110, 'Ibaragi', 134072, 0),\n(1691, 'Joetsu', 110, 'Niigata', 133505, 0),\n(1692, 'Miyakonojo', 110, 'Miyazaki', 133183, 0),\n(1693, 'Misato', 110, 'Saitama', 132957, 0),\n(1694, 'Kakamigahara', 110, 'Gifu', 131831, 0),\n(1695, 'Daito', 110, 'Osaka', 130594, 0),\n(1696, 'Seto', 110, 'Aichi', 130470, 0),\n(1697, 'Kariya', 110, 'Aichi', 127969, 0),\n(1698, 'Urayasu', 110, 'Chiba', 127550, 0),\n(1699, 'Beppu', 110, 'Oita', 127486, 0),\n(1700, 'Niihama', 110, 'Ehime', 127207, 0),\n(1701, 'Minoo', 110, 'Osaka', 127026, 0),\n(1702, 'Fujieda', 110, 'Shizuoka', 126897, 0),\n(1703, 'Abiko', 110, 'Chiba', 126670, 0),\n(1704, 'Nobeoka', 110, 'Miyazaki', 125547, 0),\n(1705, 'Tondabayashi', 110, 'Osaka', 125094, 0),\n(1706, 'Ueda', 110, 'Nagano', 124217, 0),\n(1707, 'Kashihara', 110, 'Nara', 124013, 0),\n(1708, 'Matsusaka', 110, 'Mie', 123582, 0),\n(1709, 'Isesaki', 110, 'Gumma', 123285, 0),\n(1710, 'Zama', 110, 'Kanagawa', 122046, 0),\n(1711, 'Kisarazu', 110, 'Chiba', 121967, 0),\n(1712, 'Noda', 110, 'Chiba', 121030, 0),\n(1713, 'Ishinomaki', 110, 'Miyagi', 120963, 0),\n(1714, 'Fujinomiya', 110, 'Shizuoka', 119714, 0),\n(1715, 'Kawachinagano', 110, 'Osaka', 119666, 0),\n(1716, 'Imabari', 110, 'Ehime', 119357, 0),\n(1717, 'Aizuwakamatsu', 110, 'Fukushima', 119287, 0),\n(1718, 'Higashihiroshima', 110, 'Hiroshima', 119166, 0),\n(1719, 'Habikino', 110, 'Osaka', 118968, 0),\n(1720, 'Ebetsu', 110, 'Hokkaido', 118805, 0),\n(1721, 'Hofu', 110, 'Yamaguchi', 118751, 0),\n(1722, 'Kiryu', 110, 'Gumma', 118326, 0),\n(1723, 'Okinawa', 110, 'Okinawa', 117748, 0),\n(1724, 'Yaizu', 110, 'Shizuoka', 117258, 0),\n(1725, 'Toyokawa', 110, 'Aichi', 115781, 0),\n(1726, 'Ebina', 110, 'Kanagawa', 115571, 0),\n(1727, 'Asaka', 110, 'Saitama', 114815, 0),\n(1728, 'Higashikurume', 110, 'Tokyo-to', 111666, 0),\n(1729, 'Ikoma', 110, 'Nara', 111645, 0),\n(1730, 'Kitami', 110, 'Hokkaido', 111295, 0),\n(1731, 'Koganei', 110, 'Tokyo-to', 110969, 0),\n(1732, 'Iwatsuki', 110, 'Saitama', 110034, 0),\n(1733, 'Mishima', 110, 'Shizuoka', 109699, 0),\n(1734, 'Handa', 110, 'Aichi', 108600, 0),\n(1735, 'Muroran', 110, 'Hokkaido', 108275, 0),\n(1736, 'Komatsu', 110, 'Ishikawa', 107937, 0),\n(1737, 'Yatsushiro', 110, 'Kumamoto', 107661, 0),\n(1738, 'Iida', 110, 'Nagano', 107583, 0),\n(1739, 'Tokuyama', 110, 'Yamaguchi', 107078, 0),\n(1740, 'Kokubunji', 110, 'Tokyo-to', 106996, 0),\n(1741, 'Akishima', 110, 'Tokyo-to', 106914, 0),\n(1742, 'Iwakuni', 110, 'Yamaguchi', 106647, 0),\n(1743, 'Kusatsu', 110, 'Shiga', 106232, 0),\n(1744, 'Kuwana', 110, 'Mie', 106121, 0),\n(1745, 'Sanda', 110, 'Hyogo', 105643, 0),\n(1746, 'Hikone', 110, 'Shiga', 105508, 0),\n(1747, 'Toda', 110, 'Saitama', 103969, 0),\n(1748, 'Tajimi', 110, 'Gifu', 103171, 0),\n(1749, 'Ikeda', 110, 'Osaka', 102710, 0),\n(1750, 'Fukaya', 110, 'Saitama', 102156, 0),\n(1751, 'Ise', 110, 'Mie', 101732, 0),\n(1752, 'Sakata', 110, 'Yamagata', 101651, 0),\n(1753, 'Kasuga', 110, 'Fukuoka', 101344, 0),\n(1754, 'Kamagaya', 110, 'Chiba', 100821, 0),\n(1755, 'Tsuruoka', 110, 'Yamagata', 100713, 0),\n(1756, 'Hoya', 110, 'Tokyo-to', 100313, 0),\n(1757, 'Nishio', 110, 'Chiba', 100032, 0),\n(1758, 'Tokai', 110, 'Aichi', 99738, 0),\n(1759, 'Inazawa', 110, 'Aichi', 98746, 0),\n(1760, 'Sakado', 110, 'Saitama', 98221, 0),\n(1761, 'Isehara', 110, 'Kanagawa', 98123, 0),\n(1762, 'Takasago', 110, 'Hyogo', 97632, 0),\n(1763, 'Fujimi', 110, 'Saitama', 96972, 0),\n(1764, 'Urasoe', 110, 'Okinawa', 96002, 0),\n(1765, 'Yonezawa', 110, 'Yamagata', 95592, 0),\n(1766, 'Konan', 110, 'Aichi', 95521, 0),\n(1767, 'Yamatokoriyama', 110, 'Nara', 95165, 0),\n(1768, 'Maizuru', 110, 'Kyoto', 94784, 0),\n(1769, 'Onomichi', 110, 'Hiroshima', 93756, 0),\n(1770, 'Higashimatsuyama', 110, 'Saitama', 93342, 0),\n(1771, 'Kimitsu', 110, 'Chiba', 93216, 0),\n(1772, 'Isahaya', 110, 'Nagasaki', 93058, 0),\n(1773, 'Kanuma', 110, 'Tochigi', 93053, 0),\n(1774, 'Izumisano', 110, 'Osaka', 92583, 0),\n(1775, 'Kameoka', 110, 'Kyoto', 92398, 0),\n(1776, 'Mobara', 110, 'Chiba', 91664, 0),\n(1777, 'Narita', 110, 'Chiba', 91470, 0),\n(1778, 'Kashiwazaki', 110, 'Niigata', 91229, 0),\n(1779, 'Tsuyama', 110, 'Okayama', 91170, 0),\n(1780, 'Sanaa', 235, 'Sanaa', 503600, 1),\n(1781, 'Aden', 235, 'Aden', 398300, 0),\n(1782, 'Taizz', 235, 'Taizz', 317600, 0),\n(1783, 'Hodeida', 235, 'Hodeida', 298500, 0),\n(1784, 'al-Mukalla', 235, 'Hadramawt', 122400, 0),\n(1785, 'Ibb', 235, 'Ibb', 103300, 0),\n(1786, 'Amman', 109, 'Amman', 1000000, 1),\n(1787, 'al-Zarqa', 109, 'al-Zarqa', 389815, 0),\n(1788, 'Irbid', 109, 'Irbid', 231511, 0),\n(1789, 'al-Rusayfa', 109, 'al-Zarqa', 137247, 0),\n(1790, 'Wadi al-Sir', 109, 'Amman', 89104, 0),\n(1791, 'Flying Fish Cove', 53, '–', 700, 1),\n(1792, 'Beograd', 236, 'Central Serbia', 1204000, 1),\n(1793, 'Novi Sad', 236, 'Vojvodina', 179626, 0),\n(1794, 'Niš', 236, 'Central Serbia', 175391, 0),\n(1795, 'Priština', 236, 'Kosovo and Metohija', 155496, 0),\n(1796, 'Kragujevac', 236, 'Central Serbia', 147305, 0),\n(1797, 'Podgorica', 236, 'Montenegro', 135000, 0),\n(1798, 'Subotica', 236, 'Vojvodina', 100386, 0),\n(1799, 'Prizren', 236, 'Kosovo and Metohija', 92303, 0),\n(1800, 'Phnom Penh', 114, 'Phnom Penh', 570155, 1),\n(1801, 'Battambang', 114, 'Battambang', 129800, 0),\n(1802, 'Siem Reap', 114, 'Siem Reap', 105100, 0),\n(1803, 'Douala', 44, 'Littoral', 1448300, 0),\n(1804, 'Yaoundé', 44, 'Centre', 1372800, 1),\n(1805, 'Garoua', 44, 'Nord', 177000, 0),\n(1806, 'Maroua', 44, 'Extrême-Nord', 143000, 0),\n(1807, 'Bamenda', 44, 'Nord-Ouest', 138000, 0),\n(1808, 'Bafoussam', 44, 'Ouest', 131000, 0),\n(1809, 'Nkongsamba', 44, 'Littoral', 112454, 0),\n(1810, 'Montréal', 38, 'Québec', 1016376, 0),\n(1811, 'Calgary', 38, 'Alberta', 768082, 0),\n(1812, 'Toronto', 38, 'Ontario', 688275, 0),\n(1813, 'North York', 38, 'Ontario', 622632, 0),\n(1814, 'Winnipeg', 38, 'Manitoba', 618477, 0),\n(1815, 'Edmonton', 38, 'Alberta', 616306, 0),\n(1816, 'Mississauga', 38, 'Ontario', 608072, 0),\n(1817, 'Scarborough', 38, 'Ontario', 594501, 0),\n(1818, 'Vancouver', 38, 'British Colombia', 514008, 0),\n(1819, 'Etobicoke', 38, 'Ontario', 348845, 0),\n(1820, 'London', 38, 'Ontario', 339917, 0),\n(1821, 'Hamilton', 38, 'Ontario', 335614, 0),\n(1822, 'Ottawa', 38, 'Ontario', 335277, 1),\n(1823, 'Laval', 38, 'Québec', 330393, 0),\n(1824, 'Surrey', 38, 'British Colombia', 304477, 0),\n(1825, 'Brampton', 38, 'Ontario', 296711, 0),\n(1826, 'Windsor', 38, 'Ontario', 207588, 0),\n(1827, 'Saskatoon', 38, 'Saskatchewan', 193647, 0),\n(1828, 'Kitchener', 38, 'Ontario', 189959, 0),\n(1829, 'Markham', 38, 'Ontario', 189098, 0),\n(1830, 'Regina', 38, 'Saskatchewan', 180400, 0),\n(1831, 'Burnaby', 38, 'British Colombia', 179209, 0),\n(1832, 'Québec', 38, 'Québec', 167264, 0),\n(1833, 'York', 38, 'Ontario', 154980, 0),\n(1834, 'Richmond', 38, 'British Colombia', 148867, 0),\n(1835, 'Vaughan', 38, 'Ontario', 147889, 0),\n(1836, 'Burlington', 38, 'Ontario', 145150, 0),\n(1837, 'Oshawa', 38, 'Ontario', 140173, 0),\n(1838, 'Oakville', 38, 'Ontario', 139192, 0),\n(1839, 'Saint Catharines', 38, 'Ontario', 136216, 0),\n(1840, 'Longueuil', 38, 'Québec', 127977, 0),\n(1841, 'Richmond Hill', 38, 'Ontario', 116428, 0),\n(1842, 'Thunder Bay', 38, 'Ontario', 115913, 0),\n(1843, 'Nepean', 38, 'Ontario', 115100, 0),\n(1844, 'Cape Breton', 38, 'Nova Scotia', 114733, 0),\n(1845, 'East York', 38, 'Ontario', 114034, 0),\n(1846, 'Halifax', 38, 'Nova Scotia', 113910, 0),\n(1847, 'Cambridge', 38, 'Ontario', 109186, 0),\n(1848, 'Gloucester', 38, 'Ontario', 107314, 0),\n(1849, 'Abbotsford', 38, 'British Colombia', 105403, 0),\n(1850, 'Guelph', 38, 'Ontario', 103593, 0),\n(1851, 'Saint John´s', 38, 'Newfoundland', 101936, 0),\n(1852, 'Coquitlam', 38, 'British Colombia', 101820, 0),\n(1853, 'Saanich', 38, 'British Colombia', 101388, 0),\n(1854, 'Gatineau', 38, 'Québec', 100702, 0),\n(1855, 'Delta', 38, 'British Colombia', 95411, 0),\n(1856, 'Sudbury', 38, 'Ontario', 92686, 0),\n(1857, 'Kelowna', 38, 'British Colombia', 89442, 0),\n(1858, 'Barrie', 38, 'Ontario', 89269, 0),\n(1859, 'Praia', 50, 'São Tiago', 94800, 1),\n(1860, 'Almaty', 111, 'Almaty Qalasy', 1129400, 0),\n(1861, 'Qaraghandy', 111, 'Qaraghandy', 436900, 0),\n(1862, 'Shymkent', 111, 'South Kazakstan', 360100, 0),\n(1863, 'Taraz', 111, 'Taraz', 330100, 0),\n(1864, 'Astana', 111, 'Astana', 311200, 1),\n(1865, 'Öskemen', 111, 'East Kazakstan', 311000, 0),\n(1866, 'Pavlodar', 111, 'Pavlodar', 300500, 0),\n(1867, 'Semey', 111, 'East Kazakstan', 269600, 0),\n(1868, 'Aqtöbe', 111, 'Aqtöbe', 253100, 0),\n(1869, 'Qostanay', 111, 'Qostanay', 221400, 0),\n(1870, 'Petropavl', 111, 'North Kazakstan', 203500, 0),\n(1871, 'Oral', 111, 'West Kazakstan', 195500, 0),\n(1872, 'Temirtau', 111, 'Qaraghandy', 170500, 0),\n(1873, 'Qyzylorda', 111, 'Qyzylorda', 157400, 0),\n(1874, 'Aqtau', 111, 'Mangghystau', 143400, 0),\n(1875, 'Atyrau', 111, 'Atyrau', 142500, 0),\n(1876, 'Ekibastuz', 111, 'Pavlodar', 127200, 0),\n(1877, 'Kökshetau', 111, 'North Kazakstan', 123400, 0),\n(1878, 'Rudnyy', 111, 'Qostanay', 109500, 0),\n(1879, 'Taldyqorghan', 111, 'Almaty', 98000, 0),\n(1880, 'Zhezqazghan', 111, 'Qaraghandy', 90000, 0),\n(1881, 'Nairobi', 112, 'Nairobi', 2290000, 1),\n(1882, 'Mombasa', 112, 'Coast', 461753, 0),\n(1883, 'Kisumu', 112, 'Nyanza', 192733, 0),\n(1884, 'Nakuru', 112, 'Rift Valley', 163927, 0),\n(1885, 'Machakos', 112, 'Eastern', 116293, 0),\n(1886, 'Eldoret', 112, 'Rift Valley', 111882, 0),\n(1887, 'Meru', 112, 'Eastern', 94947, 0),\n(1888, 'Nyeri', 112, 'Central', 91258, 0),\n(1889, 'Bangui', 37, 'Bangui', 524000, 1),\n(1890, 'Shanghai', 42, 'Shanghai', 9696300, 0),\n(1891, 'Peking', 42, 'Peking', 7472000, 1),\n(1892, 'Chongqing', 42, 'Chongqing', 6351600, 0),\n(1893, 'Tianjin', 42, 'Tianjin', 5286800, 0),\n(1894, 'Wuhan', 42, 'Hubei', 4344600, 0),\n(1895, 'Harbin', 42, 'Heilongjiang', 4289800, 0),\n(1896, 'Shenyang', 42, 'Liaoning', 4265200, 0),\n(1897, 'Kanton [Guangzhou]', 42, 'Guangdong', 4256300, 0),\n(1898, 'Chengdu', 42, 'Sichuan', 3361500, 0),\n(1899, 'Nanking [Nanjing]', 42, 'Jiangsu', 2870300, 0),\n(1900, 'Changchun', 42, 'Jilin', 2812000, 0),\n(1901, 'Xi´an', 42, 'Shaanxi', 2761400, 0),\n(1902, 'Dalian', 42, 'Liaoning', 2697000, 0),\n(1903, 'Qingdao', 42, 'Shandong', 2596000, 0),\n(1904, 'Jinan', 42, 'Shandong', 2278100, 0),\n(1905, 'Hangzhou', 42, 'Zhejiang', 2190500, 0),\n(1906, 'Zhengzhou', 42, 'Henan', 2107200, 0),\n(1907, 'Shijiazhuang', 42, 'Hebei', 2041500, 0),\n(1908, 'Taiyuan', 42, 'Shanxi', 1968400, 0),\n(1909, 'Kunming', 42, 'Yunnan', 1829500, 0),\n(1910, 'Changsha', 42, 'Hunan', 1809800, 0),\n(1911, 'Nanchang', 42, 'Jiangxi', 1691600, 0),\n(1912, 'Fuzhou', 42, 'Fujian', 1593800, 0),\n(1913, 'Lanzhou', 42, 'Gansu', 1565800, 0),\n(1914, 'Guiyang', 42, 'Guizhou', 1465200, 0),\n(1915, 'Ningbo', 42, 'Zhejiang', 1371200, 0),\n(1916, 'Hefei', 42, 'Anhui', 1369100, 0),\n(1917, 'Urumtši [Ürümqi]', 42, 'Xinxiang', 1310100, 0),\n(1918, 'Anshan', 42, 'Liaoning', 1200000, 0),\n(1919, 'Fushun', 42, 'Liaoning', 1200000, 0),\n(1920, 'Nanning', 42, 'Guangxi', 1161800, 0),\n(1921, 'Zibo', 42, 'Shandong', 1140000, 0),\n(1922, 'Qiqihar', 42, 'Heilongjiang', 1070000, 0),\n(1923, 'Jilin', 42, 'Jilin', 1040000, 0),\n(1924, 'Tangshan', 42, 'Hebei', 1040000, 0),\n(1925, 'Baotou', 42, 'Inner Mongolia', 980000, 0),\n(1926, 'Shenzhen', 42, 'Guangdong', 950500, 0),\n(1927, 'Hohhot', 42, 'Inner Mongolia', 916700, 0),\n(1928, 'Handan', 42, 'Hebei', 840000, 0),\n(1929, 'Wuxi', 42, 'Jiangsu', 830000, 0),\n(1930, 'Xuzhou', 42, 'Jiangsu', 810000, 0),\n(1931, 'Datong', 42, 'Shanxi', 800000, 0),\n(1932, 'Yichun', 42, 'Heilongjiang', 800000, 0),\n(1933, 'Benxi', 42, 'Liaoning', 770000, 0),\n(1934, 'Luoyang', 42, 'Henan', 760000, 0),\n(1935, 'Suzhou', 42, 'Jiangsu', 710000, 0),\n(1936, 'Xining', 42, 'Qinghai', 700200, 0),\n(1937, 'Huainan', 42, 'Anhui', 700000, 0),\n(1938, 'Jixi', 42, 'Heilongjiang', 683885, 0),\n(1939, 'Daqing', 42, 'Heilongjiang', 660000, 0),\n(1940, 'Fuxin', 42, 'Liaoning', 640000, 0),\n(1941, 'Amoy [Xiamen]', 42, 'Fujian', 627500, 0),\n(1942, 'Liuzhou', 42, 'Guangxi', 610000, 0),\n(1943, 'Shantou', 42, 'Guangdong', 580000, 0),\n(1944, 'Jinzhou', 42, 'Liaoning', 570000, 0),\n(1945, 'Mudanjiang', 42, 'Heilongjiang', 570000, 0),\n(1946, 'Yinchuan', 42, 'Ningxia', 544500, 0),\n(1947, 'Changzhou', 42, 'Jiangsu', 530000, 0),\n(1948, 'Zhangjiakou', 42, 'Hebei', 530000, 0),\n(1949, 'Dandong', 42, 'Liaoning', 520000, 0),\n(1950, 'Hegang', 42, 'Heilongjiang', 520000, 0),\n(1951, 'Kaifeng', 42, 'Henan', 510000, 0),\n(1952, 'Jiamusi', 42, 'Heilongjiang', 493409, 0),\n(1953, 'Liaoyang', 42, 'Liaoning', 492559, 0),\n(1954, 'Hengyang', 42, 'Hunan', 487148, 0),\n(1955, 'Baoding', 42, 'Hebei', 483155, 0),\n(1956, 'Hunjiang', 42, 'Jilin', 482043, 0),\n(1957, 'Xinxiang', 42, 'Henan', 473762, 0),\n(1958, 'Huangshi', 42, 'Hubei', 457601, 0),\n(1959, 'Haikou', 42, 'Hainan', 454300, 0),\n(1960, 'Yantai', 42, 'Shandong', 452127, 0),\n(1961, 'Bengbu', 42, 'Anhui', 449245, 0),\n(1962, 'Xiangtan', 42, 'Hunan', 441968, 0),\n(1963, 'Weifang', 42, 'Shandong', 428522, 0),\n(1964, 'Wuhu', 42, 'Anhui', 425740, 0),\n(1965, 'Pingxiang', 42, 'Jiangxi', 425579, 0),\n(1966, 'Yingkou', 42, 'Liaoning', 421589, 0),\n(1967, 'Anyang', 42, 'Henan', 420332, 0),\n(1968, 'Panzhihua', 42, 'Sichuan', 415466, 0),\n(1969, 'Pingdingshan', 42, 'Henan', 410775, 0),\n(1970, 'Xiangfan', 42, 'Hubei', 410407, 0),\n(1971, 'Zhuzhou', 42, 'Hunan', 409924, 0),\n(1972, 'Jiaozuo', 42, 'Henan', 409100, 0),\n(1973, 'Wenzhou', 42, 'Zhejiang', 401871, 0),\n(1974, 'Zhangjiang', 42, 'Guangdong', 400997, 0),\n(1975, 'Zigong', 42, 'Sichuan', 393184, 0),\n(1976, 'Shuangyashan', 42, 'Heilongjiang', 386081, 0),\n(1977, 'Zaozhuang', 42, 'Shandong', 380846, 0),\n(1978, 'Yakeshi', 42, 'Inner Mongolia', 377869, 0),\n(1979, 'Yichang', 42, 'Hubei', 371601, 0),\n(1980, 'Zhenjiang', 42, 'Jiangsu', 368316, 0),\n(1981, 'Huaibei', 42, 'Anhui', 366549, 0),\n(1982, 'Qinhuangdao', 42, 'Hebei', 364972, 0),\n(1983, 'Guilin', 42, 'Guangxi', 364130, 0),\n(1984, 'Liupanshui', 42, 'Guizhou', 363954, 0),\n(1985, 'Panjin', 42, 'Liaoning', 362773, 0),\n(1986, 'Yangquan', 42, 'Shanxi', 362268, 0),\n(1987, 'Jinxi', 42, 'Liaoning', 357052, 0),\n(1988, 'Liaoyuan', 42, 'Jilin', 354141, 0),\n(1989, 'Lianyungang', 42, 'Jiangsu', 354139, 0),\n(1990, 'Xianyang', 42, 'Shaanxi', 352125, 0),\n(1991, 'Tai´an', 42, 'Shandong', 350696, 0),\n(1992, 'Chifeng', 42, 'Inner Mongolia', 350077, 0),\n(1993, 'Shaoguan', 42, 'Guangdong', 350043, 0),\n(1994, 'Nantong', 42, 'Jiangsu', 343341, 0),\n(1995, 'Leshan', 42, 'Sichuan', 341128, 0),\n(1996, 'Baoji', 42, 'Shaanxi', 337765, 0),\n(1997, 'Linyi', 42, 'Shandong', 324720, 0),\n(1998, 'Tonghua', 42, 'Jilin', 324600, 0),\n(1999, 'Siping', 42, 'Jilin', 317223, 0),\n(2000, 'Changzhi', 42, 'Shanxi', 317144, 0),\n(2001, 'Tengzhou', 42, 'Shandong', 315083, 0),\n(2002, 'Chaozhou', 42, 'Guangdong', 313469, 0),\n(2003, 'Yangzhou', 42, 'Jiangsu', 312892, 0),\n(2004, 'Dongwan', 42, 'Guangdong', 308669, 0),\n(2005, 'Ma´anshan', 42, 'Anhui', 305421, 0),\n(2006, 'Foshan', 42, 'Guangdong', 303160, 0),\n(2007, 'Yueyang', 42, 'Hunan', 302800, 0),\n(2008, 'Xingtai', 42, 'Hebei', 302789, 0),\n(2009, 'Changde', 42, 'Hunan', 301276, 0),\n(2010, 'Shihezi', 42, 'Xinxiang', 299676, 0),\n(2011, 'Yancheng', 42, 'Jiangsu', 296831, 0),\n(2012, 'Jiujiang', 42, 'Jiangxi', 291187, 0),\n(2013, 'Dongying', 42, 'Shandong', 281728, 0),\n(2014, 'Shashi', 42, 'Hubei', 281352, 0),\n(2015, 'Xintai', 42, 'Shandong', 281248, 0),\n(2016, 'Jingdezhen', 42, 'Jiangxi', 281183, 0),\n(2017, 'Tongchuan', 42, 'Shaanxi', 280657, 0),\n(2018, 'Zhongshan', 42, 'Guangdong', 278829, 0),\n(2019, 'Shiyan', 42, 'Hubei', 273786, 0),\n(2020, 'Tieli', 42, 'Heilongjiang', 265683, 0),\n(2021, 'Jining', 42, 'Shandong', 265248, 0),\n(2022, 'Wuhai', 42, 'Inner Mongolia', 264081, 0),\n(2023, 'Mianyang', 42, 'Sichuan', 262947, 0),\n(2024, 'Luzhou', 42, 'Sichuan', 262892, 0),\n(2025, 'Zunyi', 42, 'Guizhou', 261862, 0),\n(2026, 'Shizuishan', 42, 'Ningxia', 257862, 0),\n(2027, 'Neijiang', 42, 'Sichuan', 256012, 0),\n(2028, 'Tongliao', 42, 'Inner Mongolia', 255129, 0),\n(2029, 'Tieling', 42, 'Liaoning', 254842, 0),\n(2030, 'Wafangdian', 42, 'Liaoning', 251733, 0),\n(2031, 'Anqing', 42, 'Anhui', 250718, 0),\n(2032, 'Shaoyang', 42, 'Hunan', 247227, 0),\n(2033, 'Laiwu', 42, 'Shandong', 246833, 0),\n(2034, 'Chengde', 42, 'Hebei', 246799, 0),\n(2035, 'Tianshui', 42, 'Gansu', 244974, 0),\n(2036, 'Nanyang', 42, 'Henan', 243303, 0),\n(2037, 'Cangzhou', 42, 'Hebei', 242708, 0),\n(2038, 'Yibin', 42, 'Sichuan', 241019, 0),\n(2039, 'Huaiyin', 42, 'Jiangsu', 239675, 0),\n(2040, 'Dunhua', 42, 'Jilin', 235100, 0),\n(2041, 'Yanji', 42, 'Jilin', 230892, 0),\n(2042, 'Jiangmen', 42, 'Guangdong', 230587, 0),\n(2043, 'Tongling', 42, 'Anhui', 228017, 0),\n(2044, 'Suihua', 42, 'Heilongjiang', 227881, 0),\n(2045, 'Gongziling', 42, 'Jilin', 226569, 0),\n(2046, 'Xiantao', 42, 'Hubei', 222884, 0),\n(2047, 'Chaoyang', 42, 'Liaoning', 222394, 0),\n(2048, 'Ganzhou', 42, 'Jiangxi', 220129, 0),\n(2049, 'Huzhou', 42, 'Zhejiang', 218071, 0),\n(2050, 'Baicheng', 42, 'Jilin', 217987, 0),\n(2051, 'Shangzi', 42, 'Heilongjiang', 215373, 0),\n(2052, 'Yangjiang', 42, 'Guangdong', 215196, 0),\n(2053, 'Qitaihe', 42, 'Heilongjiang', 214957, 0),\n(2054, 'Gejiu', 42, 'Yunnan', 214294, 0),\n(2055, 'Jiangyin', 42, 'Jiangsu', 213659, 0),\n(2056, 'Hebi', 42, 'Henan', 212976, 0),\n(2057, 'Jiaxing', 42, 'Zhejiang', 211526, 0),\n(2058, 'Wuzhou', 42, 'Guangxi', 210452, 0),\n(2059, 'Meihekou', 42, 'Jilin', 209038, 0),\n(2060, 'Xuchang', 42, 'Henan', 208815, 0),\n(2061, 'Liaocheng', 42, 'Shandong', 207844, 0),\n(2062, 'Haicheng', 42, 'Liaoning', 205560, 0),\n(2063, 'Qianjiang', 42, 'Hubei', 205504, 0),\n(2064, 'Baiyin', 42, 'Gansu', 204970, 0),\n(2065, 'Bei´an', 42, 'Heilongjiang', 204899, 0),\n(2066, 'Yixing', 42, 'Jiangsu', 200824, 0),\n(2067, 'Laizhou', 42, 'Shandong', 198664, 0),\n(2068, 'Qaramay', 42, 'Xinxiang', 197602, 0),\n(2069, 'Acheng', 42, 'Heilongjiang', 197595, 0),\n(2070, 'Dezhou', 42, 'Shandong', 195485, 0),\n(2071, 'Nanping', 42, 'Fujian', 195064, 0),\n(2072, 'Zhaoqing', 42, 'Guangdong', 194784, 0),\n(2073, 'Beipiao', 42, 'Liaoning', 194301, 0),\n(2074, 'Fengcheng', 42, 'Jiangxi', 193784, 0),\n(2075, 'Fuyu', 42, 'Jilin', 192981, 0),\n(2076, 'Xinyang', 42, 'Henan', 192509, 0),\n(2077, 'Dongtai', 42, 'Jiangsu', 192247, 0),\n(2078, 'Yuci', 42, 'Shanxi', 191356, 0),\n(2079, 'Honghu', 42, 'Hubei', 190772, 0),\n(2080, 'Ezhou', 42, 'Hubei', 190123, 0),\n(2081, 'Heze', 42, 'Shandong', 189293, 0),\n(2082, 'Daxian', 42, 'Sichuan', 188101, 0),\n(2083, 'Linfen', 42, 'Shanxi', 187309, 0),\n(2084, 'Tianmen', 42, 'Hubei', 186332, 0),\n(2085, 'Yiyang', 42, 'Hunan', 185818, 0),\n(2086, 'Quanzhou', 42, 'Fujian', 185154, 0),\n(2087, 'Rizhao', 42, 'Shandong', 185048, 0),\n(2088, 'Deyang', 42, 'Sichuan', 182488, 0),\n(2089, 'Guangyuan', 42, 'Sichuan', 182241, 0),\n(2090, 'Changshu', 42, 'Jiangsu', 181805, 0),\n(2091, 'Zhangzhou', 42, 'Fujian', 181424, 0),\n(2092, 'Hailar', 42, 'Inner Mongolia', 180650, 0),\n(2093, 'Nanchong', 42, 'Sichuan', 180273, 0),\n(2094, 'Jiutai', 42, 'Jilin', 180130, 0),\n(2095, 'Zhaodong', 42, 'Heilongjiang', 179976, 0),\n(2096, 'Shaoxing', 42, 'Zhejiang', 179818, 0),\n(2097, 'Fuyang', 42, 'Anhui', 179572, 0),\n(2098, 'Maoming', 42, 'Guangdong', 178683, 0),\n(2099, 'Qujing', 42, 'Yunnan', 178669, 0),\n(2100, 'Ghulja', 42, 'Xinxiang', 177193, 0),\n(2101, 'Jiaohe', 42, 'Jilin', 176367, 0),\n(2102, 'Puyang', 42, 'Henan', 175988, 0),\n(2103, 'Huadian', 42, 'Jilin', 175873, 0),\n(2104, 'Jiangyou', 42, 'Sichuan', 175753, 0),\n(2105, 'Qashqar', 42, 'Xinxiang', 174570, 0),\n(2106, 'Anshun', 42, 'Guizhou', 174142, 0),\n(2107, 'Fuling', 42, 'Sichuan', 173878, 0),\n(2108, 'Xinyu', 42, 'Jiangxi', 173524, 0),\n(2109, 'Hanzhong', 42, 'Shaanxi', 169930, 0),\n(2110, 'Danyang', 42, 'Jiangsu', 169603, 0),\n(2111, 'Chenzhou', 42, 'Hunan', 169400, 0),\n(2112, 'Xiaogan', 42, 'Hubei', 166280, 0),\n(2113, 'Shangqiu', 42, 'Henan', 164880, 0),\n(2114, 'Zhuhai', 42, 'Guangdong', 164747, 0),\n(2115, 'Qingyuan', 42, 'Guangdong', 164641, 0),\n(2116, 'Aqsu', 42, 'Xinxiang', 164092, 0),\n(2117, 'Jining', 42, 'Inner Mongolia', 163552, 0),\n(2118, 'Xiaoshan', 42, 'Zhejiang', 162930, 0),\n(2119, 'Zaoyang', 42, 'Hubei', 162198, 0),\n(2120, 'Xinghua', 42, 'Jiangsu', 161910, 0),\n(2121, 'Hami', 42, 'Xinxiang', 161315, 0),\n(2122, 'Huizhou', 42, 'Guangdong', 161023, 0),\n(2123, 'Jinmen', 42, 'Hubei', 160794, 0),\n(2124, 'Sanming', 42, 'Fujian', 160691, 0),\n(2125, 'Ulanhot', 42, 'Inner Mongolia', 159538, 0),\n(2126, 'Korla', 42, 'Xinxiang', 159344, 0),\n(2127, 'Wanxian', 42, 'Sichuan', 156823, 0),\n(2128, 'Rui´an', 42, 'Zhejiang', 156468, 0),\n(2129, 'Zhoushan', 42, 'Zhejiang', 156317, 0),\n(2130, 'Liangcheng', 42, 'Shandong', 156307, 0),\n(2131, 'Jiaozhou', 42, 'Shandong', 153364, 0),\n(2132, 'Taizhou', 42, 'Jiangsu', 152442, 0),\n(2133, 'Suzhou', 42, 'Anhui', 151862, 0),\n(2134, 'Yichun', 42, 'Jiangxi', 151585, 0),\n(2135, 'Taonan', 42, 'Jilin', 150168, 0),\n(2136, 'Pingdu', 42, 'Shandong', 150123, 0),\n(2137, 'Ji´an', 42, 'Jiangxi', 148583, 0),\n(2138, 'Longkou', 42, 'Shandong', 148362, 0),\n(2139, 'Langfang', 42, 'Hebei', 148105, 0),\n(2140, 'Zhoukou', 42, 'Henan', 146288, 0),\n(2141, 'Suining', 42, 'Sichuan', 146086, 0);\nINSERT INTO `cities` (`id`, `name`, `countryId`, `district`, `population`, `isCapital`) VALUES\n(2142, 'Yulin', 42, 'Guangxi', 144467, 0),\n(2143, 'Jinhua', 42, 'Zhejiang', 144280, 0),\n(2144, 'Liu´an', 42, 'Anhui', 144248, 0),\n(2145, 'Shuangcheng', 42, 'Heilongjiang', 142659, 0),\n(2146, 'Suizhou', 42, 'Hubei', 142302, 0),\n(2147, 'Ankang', 42, 'Shaanxi', 142170, 0),\n(2148, 'Weinan', 42, 'Shaanxi', 140169, 0),\n(2149, 'Longjing', 42, 'Jilin', 139417, 0),\n(2150, 'Da´an', 42, 'Jilin', 138963, 0),\n(2151, 'Lengshuijiang', 42, 'Hunan', 137994, 0),\n(2152, 'Laiyang', 42, 'Shandong', 137080, 0),\n(2153, 'Xianning', 42, 'Hubei', 136811, 0),\n(2154, 'Dali', 42, 'Yunnan', 136554, 0),\n(2155, 'Anda', 42, 'Heilongjiang', 136446, 0),\n(2156, 'Jincheng', 42, 'Shanxi', 136396, 0),\n(2157, 'Longyan', 42, 'Fujian', 134481, 0),\n(2158, 'Xichang', 42, 'Sichuan', 134419, 0),\n(2159, 'Wendeng', 42, 'Shandong', 133910, 0),\n(2160, 'Hailun', 42, 'Heilongjiang', 133565, 0),\n(2161, 'Binzhou', 42, 'Shandong', 133555, 0),\n(2162, 'Linhe', 42, 'Inner Mongolia', 133183, 0),\n(2163, 'Wuwei', 42, 'Gansu', 133101, 0),\n(2164, 'Duyun', 42, 'Guizhou', 132971, 0),\n(2165, 'Mishan', 42, 'Heilongjiang', 132744, 0),\n(2166, 'Shangrao', 42, 'Jiangxi', 132455, 0),\n(2167, 'Changji', 42, 'Xinxiang', 132260, 0),\n(2168, 'Meixian', 42, 'Guangdong', 132156, 0),\n(2169, 'Yushu', 42, 'Jilin', 131861, 0),\n(2170, 'Tiefa', 42, 'Liaoning', 131807, 0),\n(2171, 'Huai´an', 42, 'Jiangsu', 131149, 0),\n(2172, 'Leiyang', 42, 'Hunan', 130115, 0),\n(2173, 'Zalantun', 42, 'Inner Mongolia', 130031, 0),\n(2174, 'Weihai', 42, 'Shandong', 128888, 0),\n(2175, 'Loudi', 42, 'Hunan', 128418, 0),\n(2176, 'Qingzhou', 42, 'Shandong', 128258, 0),\n(2177, 'Qidong', 42, 'Jiangsu', 126872, 0),\n(2178, 'Huaihua', 42, 'Hunan', 126785, 0),\n(2179, 'Luohe', 42, 'Henan', 126438, 0),\n(2180, 'Chuzhou', 42, 'Anhui', 125341, 0),\n(2181, 'Kaiyuan', 42, 'Liaoning', 124219, 0),\n(2182, 'Linqing', 42, 'Shandong', 123958, 0),\n(2183, 'Chaohu', 42, 'Anhui', 123676, 0),\n(2184, 'Laohekou', 42, 'Hubei', 123366, 0),\n(2185, 'Dujiangyan', 42, 'Sichuan', 123357, 0),\n(2186, 'Zhumadian', 42, 'Henan', 123232, 0),\n(2187, 'Linchuan', 42, 'Jiangxi', 121949, 0),\n(2188, 'Jiaonan', 42, 'Shandong', 121397, 0),\n(2189, 'Sanmenxia', 42, 'Henan', 120523, 0),\n(2190, 'Heyuan', 42, 'Guangdong', 120101, 0),\n(2191, 'Manzhouli', 42, 'Inner Mongolia', 120023, 0),\n(2192, 'Lhasa', 42, 'Tibet', 120000, 0),\n(2193, 'Lianyuan', 42, 'Hunan', 118858, 0),\n(2194, 'Kuytun', 42, 'Xinxiang', 118553, 0),\n(2195, 'Puqi', 42, 'Hubei', 117264, 0),\n(2196, 'Hongjiang', 42, 'Hunan', 116188, 0),\n(2197, 'Qinzhou', 42, 'Guangxi', 114586, 0),\n(2198, 'Renqiu', 42, 'Hebei', 114256, 0),\n(2199, 'Yuyao', 42, 'Zhejiang', 114065, 0),\n(2200, 'Guigang', 42, 'Guangxi', 114025, 0),\n(2201, 'Kaili', 42, 'Guizhou', 113958, 0),\n(2202, 'Yan´an', 42, 'Shaanxi', 113277, 0),\n(2203, 'Beihai', 42, 'Guangxi', 112673, 0),\n(2204, 'Xuangzhou', 42, 'Anhui', 112673, 0),\n(2205, 'Quzhou', 42, 'Zhejiang', 112373, 0),\n(2206, 'Yong´an', 42, 'Fujian', 111762, 0),\n(2207, 'Zixing', 42, 'Hunan', 110048, 0),\n(2208, 'Liyang', 42, 'Jiangsu', 109520, 0),\n(2209, 'Yizheng', 42, 'Jiangsu', 109268, 0),\n(2210, 'Yumen', 42, 'Gansu', 109234, 0),\n(2211, 'Liling', 42, 'Hunan', 108504, 0),\n(2212, 'Yuncheng', 42, 'Shanxi', 108359, 0),\n(2213, 'Shanwei', 42, 'Guangdong', 107847, 0),\n(2214, 'Cixi', 42, 'Zhejiang', 107329, 0),\n(2215, 'Yuanjiang', 42, 'Hunan', 107004, 0),\n(2216, 'Bozhou', 42, 'Anhui', 106346, 0),\n(2217, 'Jinchang', 42, 'Gansu', 105287, 0),\n(2218, 'Fu´an', 42, 'Fujian', 105265, 0),\n(2219, 'Suqian', 42, 'Jiangsu', 105021, 0),\n(2220, 'Shishou', 42, 'Hubei', 104571, 0),\n(2221, 'Hengshui', 42, 'Hebei', 104269, 0),\n(2222, 'Danjiangkou', 42, 'Hubei', 103211, 0),\n(2223, 'Fujin', 42, 'Heilongjiang', 103104, 0),\n(2224, 'Sanya', 42, 'Hainan', 102820, 0),\n(2225, 'Guangshui', 42, 'Hubei', 102770, 0),\n(2226, 'Huangshan', 42, 'Anhui', 102628, 0),\n(2227, 'Xingcheng', 42, 'Liaoning', 102384, 0),\n(2228, 'Zhucheng', 42, 'Shandong', 102134, 0),\n(2229, 'Kunshan', 42, 'Jiangsu', 102052, 0),\n(2230, 'Haining', 42, 'Zhejiang', 100478, 0),\n(2231, 'Pingliang', 42, 'Gansu', 99265, 0),\n(2232, 'Fuqing', 42, 'Fujian', 99193, 0),\n(2233, 'Xinzhou', 42, 'Shanxi', 98667, 0),\n(2234, 'Jieyang', 42, 'Guangdong', 98531, 0),\n(2235, 'Zhangjiagang', 42, 'Jiangsu', 97994, 0),\n(2236, 'Tong Xian', 42, 'Peking', 97168, 0),\n(2237, 'Ya´an', 42, 'Sichuan', 95900, 0),\n(2238, 'Jinzhou', 42, 'Liaoning', 95761, 0),\n(2239, 'Emeishan', 42, 'Sichuan', 94000, 0),\n(2240, 'Enshi', 42, 'Hubei', 93056, 0),\n(2241, 'Bose', 42, 'Guangxi', 93009, 0),\n(2242, 'Yuzhou', 42, 'Henan', 92889, 0),\n(2243, 'Kaiyuan', 42, 'Yunnan', 91999, 0),\n(2244, 'Tumen', 42, 'Jilin', 91471, 0),\n(2245, 'Putian', 42, 'Fujian', 91030, 0),\n(2246, 'Linhai', 42, 'Zhejiang', 90870, 0),\n(2247, 'Xilin Hot', 42, 'Inner Mongolia', 90646, 0),\n(2248, 'Shaowu', 42, 'Fujian', 90286, 0),\n(2249, 'Junan', 42, 'Shandong', 90222, 0),\n(2250, 'Huaying', 42, 'Sichuan', 89400, 0),\n(2251, 'Pingyi', 42, 'Shandong', 89373, 0),\n(2252, 'Huangyan', 42, 'Zhejiang', 89288, 0),\n(2253, 'Bishkek', 113, 'Bishkek shaary', 589400, 1),\n(2254, 'Osh', 113, 'Osh', 222700, 0),\n(2255, 'Bikenibeu', 115, 'South Tarawa', 5055, 0),\n(2256, 'Bairiki', 115, 'South Tarawa', 2226, 1),\n(2257, 'Santafé de Bogotá', 48, 'Santafé de Bogotá', 6260862, 1),\n(2258, 'Cali', 48, 'Valle', 2077386, 0),\n(2259, 'Medellín', 48, 'Antioquia', 1861265, 0),\n(2260, 'Barranquilla', 48, 'Atlántico', 1223260, 0),\n(2261, 'Cartagena', 48, 'Bolívar', 805757, 0),\n(2262, 'Cúcuta', 48, 'Norte de Santander', 606932, 0),\n(2263, 'Bucaramanga', 48, 'Santander', 515555, 0),\n(2264, 'Ibagué', 48, 'Tolima', 393664, 0),\n(2265, 'Pereira', 48, 'Risaralda', 381725, 0),\n(2266, 'Santa Marta', 48, 'Magdalena', 359147, 0),\n(2267, 'Manizales', 48, 'Caldas', 337580, 0),\n(2268, 'Bello', 48, 'Antioquia', 333470, 0),\n(2269, 'Pasto', 48, 'Nariño', 332396, 0),\n(2270, 'Neiva', 48, 'Huila', 300052, 0),\n(2271, 'Soledad', 48, 'Atlántico', 295058, 0),\n(2272, 'Armenia', 48, 'Quindío', 288977, 0),\n(2273, 'Villavicencio', 48, 'Meta', 273140, 0),\n(2274, 'Soacha', 48, 'Cundinamarca', 272058, 0),\n(2275, 'Valledupar', 48, 'Cesar', 263247, 0),\n(2276, 'Montería', 48, 'Córdoba', 248245, 0),\n(2277, 'Itagüí', 48, 'Antioquia', 228985, 0),\n(2278, 'Palmira', 48, 'Valle', 226509, 0),\n(2279, 'Buenaventura', 48, 'Valle', 224336, 0),\n(2280, 'Floridablanca', 48, 'Santander', 221913, 0),\n(2281, 'Sincelejo', 48, 'Sucre', 220704, 0),\n(2282, 'Popayán', 48, 'Cauca', 200719, 0),\n(2283, 'Barrancabermeja', 48, 'Santander', 178020, 0),\n(2284, 'Dos Quebradas', 48, 'Risaralda', 159363, 0),\n(2285, 'Tuluá', 48, 'Valle', 152488, 0),\n(2286, 'Envigado', 48, 'Antioquia', 135848, 0),\n(2287, 'Cartago', 48, 'Valle', 125884, 0),\n(2288, 'Girardot', 48, 'Cundinamarca', 110963, 0),\n(2289, 'Buga', 48, 'Valle', 110699, 0),\n(2290, 'Tunja', 48, 'Boyacá', 109740, 0),\n(2291, 'Florencia', 48, 'Caquetá', 108574, 0),\n(2292, 'Maicao', 48, 'La Guajira', 108053, 0),\n(2293, 'Sogamoso', 48, 'Boyacá', 107728, 0),\n(2294, 'Giron', 48, 'Santander', 90688, 0),\n(2295, 'Moroni', 49, 'Njazidja', 36000, 1),\n(2296, 'Brazzaville', 46, 'Brazzaville', 950000, 1),\n(2297, 'Pointe-Noire', 46, 'Kouilou', 500000, 0),\n(2298, 'Kinshasa', 45, 'Kinshasa', 5064000, 1),\n(2299, 'Lubumbashi', 45, 'Shaba', 851381, 0),\n(2300, 'Mbuji-Mayi', 45, 'East Kasai', 806475, 0),\n(2301, 'Kolwezi', 45, 'Shaba', 417810, 0),\n(2302, 'Kisangani', 45, 'Haute-Zaïre', 417517, 0),\n(2303, 'Kananga', 45, 'West Kasai', 393030, 0),\n(2304, 'Likasi', 45, 'Shaba', 299118, 0),\n(2305, 'Bukavu', 45, 'South Kivu', 201569, 0),\n(2306, 'Kikwit', 45, 'Bandundu', 182142, 0),\n(2307, 'Tshikapa', 45, 'West Kasai', 180860, 0),\n(2308, 'Matadi', 45, 'Bas-Zaïre', 172730, 0),\n(2309, 'Mbandaka', 45, 'Equateur', 169841, 0),\n(2310, 'Mwene-Ditu', 45, 'East Kasai', 137459, 0),\n(2311, 'Boma', 45, 'Bas-Zaïre', 135284, 0),\n(2312, 'Uvira', 45, 'South Kivu', 115590, 0),\n(2313, 'Butembo', 45, 'North Kivu', 109406, 0),\n(2314, 'Goma', 45, 'North Kivu', 109094, 0),\n(2315, 'Kalemie', 45, 'Shaba', 101309, 0),\n(2316, 'Bantam', 39, 'Home Island', 503, 0),\n(2317, 'West Island', 39, 'West Island', 167, 1),\n(2318, 'Pyongyang', 174, 'Pyongyang-si', 2484000, 1),\n(2319, 'Hamhung', 174, 'Hamgyong N', 709730, 0),\n(2320, 'Chongjin', 174, 'Hamgyong P', 582480, 0),\n(2321, 'Nampo', 174, 'Nampo-si', 566200, 0),\n(2322, 'Sinuiju', 174, 'Pyongan P', 326011, 0),\n(2323, 'Wonsan', 174, 'Kangwon', 300148, 0),\n(2324, 'Phyongsong', 174, 'Pyongan N', 272934, 0),\n(2325, 'Sariwon', 174, 'Hwanghae P', 254146, 0),\n(2326, 'Haeju', 174, 'Hwanghae N', 229172, 0),\n(2327, 'Kanggye', 174, 'Chagang', 223410, 0),\n(2328, 'Kimchaek', 174, 'Hamgyong P', 179000, 0),\n(2329, 'Hyesan', 174, 'Yanggang', 178020, 0),\n(2330, 'Kaesong', 174, 'Kaesong-si', 171500, 0),\n(2331, 'Seoul', 117, 'Seoul', 9981619, 1),\n(2332, 'Pusan', 117, 'Pusan', 3804522, 0),\n(2333, 'Inchon', 117, 'Inchon', 2559424, 0),\n(2334, 'Taegu', 117, 'Taegu', 2548568, 0),\n(2335, 'Taejon', 117, 'Taejon', 1425835, 0),\n(2336, 'Kwangju', 117, 'Kwangju', 1368341, 0),\n(2337, 'Ulsan', 117, 'Kyongsangnam', 1084891, 0),\n(2338, 'Songnam', 117, 'Kyonggi', 869094, 0),\n(2339, 'Puchon', 117, 'Kyonggi', 779412, 0),\n(2340, 'Suwon', 117, 'Kyonggi', 755550, 0),\n(2341, 'Anyang', 117, 'Kyonggi', 591106, 0),\n(2342, 'Chonju', 117, 'Chollabuk', 563153, 0),\n(2343, 'Chongju', 117, 'Chungchongbuk', 531376, 0),\n(2344, 'Koyang', 117, 'Kyonggi', 518282, 0),\n(2345, 'Ansan', 117, 'Kyonggi', 510314, 0),\n(2346, 'Pohang', 117, 'Kyongsangbuk', 508899, 0),\n(2347, 'Chang-won', 117, 'Kyongsangnam', 481694, 0),\n(2348, 'Masan', 117, 'Kyongsangnam', 441242, 0),\n(2349, 'Kwangmyong', 117, 'Kyonggi', 350914, 0),\n(2350, 'Chonan', 117, 'Chungchongnam', 330259, 0),\n(2351, 'Chinju', 117, 'Kyongsangnam', 329886, 0),\n(2352, 'Iksan', 117, 'Chollabuk', 322685, 0),\n(2353, 'Pyongtaek', 117, 'Kyonggi', 312927, 0),\n(2354, 'Kumi', 117, 'Kyongsangbuk', 311431, 0),\n(2355, 'Uijongbu', 117, 'Kyonggi', 276111, 0),\n(2356, 'Kyongju', 117, 'Kyongsangbuk', 272968, 0),\n(2357, 'Kunsan', 117, 'Chollabuk', 266569, 0),\n(2358, 'Cheju', 117, 'Cheju', 258511, 0),\n(2359, 'Kimhae', 117, 'Kyongsangnam', 256370, 0),\n(2360, 'Sunchon', 117, 'Chollanam', 249263, 0),\n(2361, 'Mokpo', 117, 'Chollanam', 247452, 0),\n(2362, 'Yong-in', 117, 'Kyonggi', 242643, 0),\n(2363, 'Wonju', 117, 'Kang-won', 237460, 0),\n(2364, 'Kunpo', 117, 'Kyonggi', 235233, 0),\n(2365, 'Chunchon', 117, 'Kang-won', 234528, 0),\n(2366, 'Namyangju', 117, 'Kyonggi', 229060, 0),\n(2367, 'Kangnung', 117, 'Kang-won', 220403, 0),\n(2368, 'Chungju', 117, 'Chungchongbuk', 205206, 0),\n(2369, 'Andong', 117, 'Kyongsangbuk', 188443, 0),\n(2370, 'Yosu', 117, 'Chollanam', 183596, 0),\n(2371, 'Kyongsan', 117, 'Kyongsangbuk', 173746, 0),\n(2372, 'Paju', 117, 'Kyonggi', 163379, 0),\n(2373, 'Yangsan', 117, 'Kyongsangnam', 163351, 0),\n(2374, 'Ichon', 117, 'Kyonggi', 155332, 0),\n(2375, 'Asan', 117, 'Chungchongnam', 154663, 0),\n(2376, 'Koje', 117, 'Kyongsangnam', 147562, 0),\n(2377, 'Kimchon', 117, 'Kyongsangbuk', 147027, 0),\n(2378, 'Nonsan', 117, 'Chungchongnam', 146619, 0),\n(2379, 'Kuri', 117, 'Kyonggi', 142173, 0),\n(2380, 'Chong-up', 117, 'Chollabuk', 139111, 0),\n(2381, 'Chechon', 117, 'Chungchongbuk', 137070, 0),\n(2382, 'Sosan', 117, 'Chungchongnam', 134746, 0),\n(2383, 'Shihung', 117, 'Kyonggi', 133443, 0),\n(2384, 'Tong-yong', 117, 'Kyongsangnam', 131717, 0),\n(2385, 'Kongju', 117, 'Chungchongnam', 131229, 0),\n(2386, 'Yongju', 117, 'Kyongsangbuk', 131097, 0),\n(2387, 'Chinhae', 117, 'Kyongsangnam', 125997, 0),\n(2388, 'Sangju', 117, 'Kyongsangbuk', 124116, 0),\n(2389, 'Poryong', 117, 'Chungchongnam', 122604, 0),\n(2390, 'Kwang-yang', 117, 'Chollanam', 122052, 0),\n(2391, 'Miryang', 117, 'Kyongsangnam', 121501, 0),\n(2392, 'Hanam', 117, 'Kyonggi', 115812, 0),\n(2393, 'Kimje', 117, 'Chollabuk', 115427, 0),\n(2394, 'Yongchon', 117, 'Kyongsangbuk', 113511, 0),\n(2395, 'Sachon', 117, 'Kyongsangnam', 113494, 0),\n(2396, 'Uiwang', 117, 'Kyonggi', 108788, 0),\n(2397, 'Naju', 117, 'Chollanam', 107831, 0),\n(2398, 'Namwon', 117, 'Chollabuk', 103544, 0),\n(2399, 'Tonghae', 117, 'Kang-won', 95472, 0),\n(2400, 'Mun-gyong', 117, 'Kyongsangbuk', 92239, 0),\n(2401, 'Athenai', 86, 'Attika', 772072, 1),\n(2402, 'Thessaloniki', 86, 'Central Macedonia', 383967, 0),\n(2403, 'Pireus', 86, 'Attika', 182671, 0),\n(2404, 'Patras', 86, 'West Greece', 153344, 0),\n(2405, 'Peristerion', 86, 'Attika', 137288, 0),\n(2406, 'Herakleion', 86, 'Crete', 116178, 0),\n(2407, 'Kallithea', 86, 'Attika', 114233, 0),\n(2408, 'Larisa', 86, 'Thessalia', 113090, 0),\n(2409, 'Zagreb', 96, 'Grad Zagreb', 706770, 1),\n(2410, 'Split', 96, 'Split-Dalmatia', 189388, 0),\n(2411, 'Rijeka', 96, 'Primorje-Gorski Kota', 167964, 0),\n(2412, 'Osijek', 96, 'Osijek-Baranja', 104761, 0),\n(2413, 'La Habana', 52, 'La Habana', 2256000, 1),\n(2414, 'Santiago de Cuba', 52, 'Santiago de Cuba', 433180, 0),\n(2415, 'Camagüey', 52, 'Camagüey', 298726, 0),\n(2416, 'Holguín', 52, 'Holguín', 249492, 0),\n(2417, 'Santa Clara', 52, 'Villa Clara', 207350, 0),\n(2418, 'Guantánamo', 52, 'Guantánamo', 205078, 0),\n(2419, 'Pinar del Río', 52, 'Pinar del Río', 142100, 0),\n(2420, 'Bayamo', 52, 'Granma', 141000, 0),\n(2421, 'Cienfuegos', 52, 'Cienfuegos', 132770, 0),\n(2422, 'Victoria de las Tunas', 52, 'Las Tunas', 132350, 0),\n(2423, 'Matanzas', 52, 'Matanzas', 123273, 0),\n(2424, 'Manzanillo', 52, 'Granma', 109350, 0),\n(2425, 'Sancti-Spíritus', 52, 'Sancti-Spíritus', 100751, 0),\n(2426, 'Ciego de Ávila', 52, 'Ciego de Ávila', 98505, 0),\n(2427, 'al-Salimiya', 118, 'Hawalli', 130215, 0),\n(2428, 'Jalib al-Shuyukh', 118, 'Hawalli', 102178, 0),\n(2429, 'Kuwait', 118, 'al-Asima', 28859, 1),\n(2430, 'Nicosia', 55, 'Nicosia', 195000, 1),\n(2431, 'Limassol', 55, 'Limassol', 154400, 0),\n(2432, 'Vientiane', 119, 'Viangchan', 531800, 1),\n(2433, 'Savannakhet', 119, 'Savannakhet', 96652, 0),\n(2434, 'Riga', 129, 'Riika', 764328, 1),\n(2435, 'Daugavpils', 129, 'Daugavpils', 114829, 0),\n(2436, 'Liepaja', 129, 'Liepaja', 89439, 0),\n(2437, 'Maseru', 126, 'Maseru', 297000, 1),\n(2438, 'Beirut', 120, 'Beirut', 1100000, 1),\n(2439, 'Tripoli', 120, 'al-Shamal', 240000, 0),\n(2440, 'Monrovia', 121, 'Montserrado', 850000, 1),\n(2441, 'Tripoli', 122, 'Tripoli', 1682000, 1),\n(2442, 'Bengasi', 122, 'Bengasi', 804000, 0),\n(2443, 'Misrata', 122, 'Misrata', 121669, 0),\n(2444, 'al-Zawiya', 122, 'al-Zawiya', 89338, 0),\n(2445, 'Schaan', 124, 'Schaan', 5346, 0),\n(2446, 'Vaduz', 124, 'Vaduz', 5043, 1),\n(2447, 'Vilnius', 127, 'Vilna', 577969, 1),\n(2448, 'Kaunas', 127, 'Kaunas', 412639, 0),\n(2449, 'Klaipeda', 127, 'Klaipeda', 202451, 0),\n(2450, 'Šiauliai', 127, 'Šiauliai', 146563, 0),\n(2451, 'Panevezys', 127, 'Panevezys', 133695, 0),\n(2452, 'Luxembourg [Luxemburg/Lëtzebuerg]', 128, 'Luxembourg', 80700, 1),\n(2453, 'El-Aaiún', 66, 'El-Aaiún', 169000, 1),\n(2454, 'Macao', 130, 'Macau', 437500, 1),\n(2455, 'Antananarivo', 134, 'Antananarivo', 675669, 1),\n(2456, 'Toamasina', 134, 'Toamasina', 127441, 0),\n(2457, 'Antsirabé', 134, 'Antananarivo', 120239, 0),\n(2458, 'Mahajanga', 134, 'Mahajanga', 100807, 0),\n(2459, 'Fianarantsoa', 134, 'Fianarantsoa', 99005, 0),\n(2460, 'Skopje', 138, 'Skopje', 444299, 1),\n(2461, 'Blantyre', 149, 'Blantyre', 478155, 0),\n(2462, 'Lilongwe', 149, 'Lilongwe', 435964, 1),\n(2463, 'Male', 135, 'Maale', 71000, 1),\n(2464, 'Kuala Lumpur', 150, 'Wilayah Persekutuan', 1297526, 1),\n(2465, 'Ipoh', 150, 'Perak', 382853, 0),\n(2466, 'Johor Baharu', 150, 'Johor', 328436, 0),\n(2467, 'Petaling Jaya', 150, 'Selangor', 254350, 0),\n(2468, 'Kelang', 150, 'Selangor', 243355, 0),\n(2469, 'Kuala Terengganu', 150, 'Terengganu', 228119, 0),\n(2470, 'Pinang', 150, 'Pulau Pinang', 219603, 0),\n(2471, 'Kota Bharu', 150, 'Kelantan', 219582, 0),\n(2472, 'Kuantan', 150, 'Pahang', 199484, 0),\n(2473, 'Taiping', 150, 'Perak', 183261, 0),\n(2474, 'Seremban', 150, 'Negeri Sembilan', 182869, 0),\n(2475, 'Kuching', 150, 'Sarawak', 148059, 0),\n(2476, 'Sibu', 150, 'Sarawak', 126381, 0),\n(2477, 'Sandakan', 150, 'Sabah', 125841, 0),\n(2478, 'Alor Setar', 150, 'Kedah', 124412, 0),\n(2479, 'Selayang Baru', 150, 'Selangor', 124228, 0),\n(2480, 'Sungai Petani', 150, 'Kedah', 114763, 0),\n(2481, 'Shah Alam', 150, 'Selangor', 102019, 0),\n(2482, 'Bamako', 139, 'Bamako', 809552, 1),\n(2483, 'Birkirkara', 140, 'Outer Harbour', 21445, 0),\n(2484, 'Valletta', 140, 'Inner Harbour', 7073, 1),\n(2485, 'Casablanca', 131, 'Casablanca', 2940623, 0),\n(2486, 'Rabat', 131, 'Rabat-Salé-Zammour-Z', 623457, 1),\n(2487, 'Marrakech', 131, 'Marrakech-Tensift-Al', 621914, 0),\n(2488, 'Fès', 131, 'Fès-Boulemane', 541162, 0),\n(2489, 'Tanger', 131, 'Tanger-Tétouan', 521735, 0),\n(2490, 'Salé', 131, 'Rabat-Salé-Zammour-Z', 504420, 0),\n(2491, 'Meknès', 131, 'Meknès-Tafilalet', 460000, 0),\n(2492, 'Oujda', 131, 'Oriental', 365382, 0),\n(2493, 'Kénitra', 131, 'Gharb-Chrarda-Béni H', 292600, 0),\n(2494, 'Tétouan', 131, 'Tanger-Tétouan', 277516, 0),\n(2495, 'Safi', 131, 'Doukkala-Abda', 262300, 0),\n(2496, 'Agadir', 131, 'Souss Massa-Draâ', 155244, 0),\n(2497, 'Mohammedia', 131, 'Casablanca', 154706, 0),\n(2498, 'Khouribga', 131, 'Chaouia-Ouardigha', 152090, 0),\n(2499, 'Beni-Mellal', 131, 'Tadla-Azilal', 140212, 0),\n(2500, 'Témara', 131, 'Rabat-Salé-Zammour-Z', 126303, 0),\n(2501, 'El Jadida', 131, 'Doukkala-Abda', 119083, 0),\n(2502, 'Nador', 131, 'Oriental', 112450, 0),\n(2503, 'Ksar el Kebir', 131, 'Tanger-Tétouan', 107065, 0),\n(2504, 'Settat', 131, 'Chaouia-Ouardigha', 96200, 0),\n(2505, 'Taza', 131, 'Taza-Al Hoceima-Taou', 92700, 0),\n(2506, 'El Araich', 131, 'Tanger-Tétouan', 90400, 0),\n(2507, 'Dalap-Uliga-Darrit', 137, 'Majuro', 28000, 1),\n(2508, 'Fort-de-France', 147, 'Fort-de-France', 94050, 1),\n(2509, 'Nouakchott', 145, 'Nouakchott', 667300, 1),\n(2510, 'Nouâdhibou', 145, 'Dakhlet Nouâdhibou', 97600, 0),\n(2511, 'Port-Louis', 148, 'Port-Louis', 138200, 1),\n(2512, 'Beau Bassin-Rose Hill', 148, 'Plaines Wilhelms', 100616, 0),\n(2513, 'Vacoas-Phoenix', 148, 'Plaines Wilhelms', 98464, 0),\n(2514, 'Mamoutzou', 151, 'Mamoutzou', 12000, 1),\n(2515, 'Ciudad de México', 136, 'Distrito Federal', 8591309, 1),\n(2516, 'Guadalajara', 136, 'Jalisco', 1647720, 0),\n(2517, 'Ecatepec de Morelos', 136, 'México', 1620303, 0),\n(2518, 'Puebla', 136, 'Puebla', 1346176, 0),\n(2519, 'Nezahualcóyotl', 136, 'México', 1224924, 0),\n(2520, 'Juárez', 136, 'Chihuahua', 1217818, 0),\n(2521, 'Tijuana', 136, 'Baja California', 1212232, 0),\n(2522, 'León', 136, 'Guanajuato', 1133576, 0),\n(2523, 'Monterrey', 136, 'Nuevo León', 1108499, 0),\n(2524, 'Zapopan', 136, 'Jalisco', 1002239, 0),\n(2525, 'Naucalpan de Juárez', 136, 'México', 857511, 0),\n(2526, 'Mexicali', 136, 'Baja California', 764902, 0),\n(2527, 'Culiacán', 136, 'Sinaloa', 744859, 0),\n(2528, 'Acapulco de Juárez', 136, 'Guerrero', 721011, 0),\n(2529, 'Tlalnepantla de Baz', 136, 'México', 720755, 0),\n(2530, 'Mérida', 136, 'Yucatán', 703324, 0),\n(2531, 'Chihuahua', 136, 'Chihuahua', 670208, 0),\n(2532, 'San Luis Potosí', 136, 'San Luis Potosí', 669353, 0),\n(2533, 'Guadalupe', 136, 'Nuevo León', 668780, 0),\n(2534, 'Toluca', 136, 'México', 665617, 0),\n(2535, 'Aguascalientes', 136, 'Aguascalientes', 643360, 0),\n(2536, 'Querétaro', 136, 'Querétaro de Arteaga', 639839, 0),\n(2537, 'Morelia', 136, 'Michoacán de Ocampo', 619958, 0),\n(2538, 'Hermosillo', 136, 'Sonora', 608697, 0),\n(2539, 'Saltillo', 136, 'Coahuila de Zaragoza', 577352, 0),\n(2540, 'Torreón', 136, 'Coahuila de Zaragoza', 529093, 0),\n(2541, 'Centro (Villahermosa)', 136, 'Tabasco', 519873, 0),\n(2542, 'San Nicolás de los Garza', 136, 'Nuevo León', 495540, 0),\n(2543, 'Durango', 136, 'Durango', 490524, 0),\n(2544, 'Chimalhuacán', 136, 'México', 490245, 0),\n(2545, 'Tlaquepaque', 136, 'Jalisco', 475472, 0),\n(2546, 'Atizapán de Zaragoza', 136, 'México', 467262, 0),\n(2547, 'Veracruz', 136, 'Veracruz', 457119, 0),\n(2548, 'Cuautitlán Izcalli', 136, 'México', 452976, 0),\n(2549, 'Irapuato', 136, 'Guanajuato', 440039, 0),\n(2550, 'Tuxtla Gutiérrez', 136, 'Chiapas', 433544, 0),\n(2551, 'Tultitlán', 136, 'México', 432411, 0),\n(2552, 'Reynosa', 136, 'Tamaulipas', 419776, 0),\n(2553, 'Benito Juárez', 136, 'Quintana Roo', 419276, 0),\n(2554, 'Matamoros', 136, 'Tamaulipas', 416428, 0),\n(2555, 'Xalapa', 136, 'Veracruz', 390058, 0),\n(2556, 'Celaya', 136, 'Guanajuato', 382140, 0),\n(2557, 'Mazatlán', 136, 'Sinaloa', 380265, 0),\n(2558, 'Ensenada', 136, 'Baja California', 369573, 0),\n(2559, 'Ahome', 136, 'Sinaloa', 358663, 0),\n(2560, 'Cajeme', 136, 'Sonora', 355679, 0),\n(2561, 'Cuernavaca', 136, 'Morelos', 337966, 0),\n(2562, 'Tonalá', 136, 'Jalisco', 336109, 0),\n(2563, 'Valle de Chalco Solidaridad', 136, 'México', 323113, 0),\n(2564, 'Nuevo Laredo', 136, 'Tamaulipas', 310277, 0),\n(2565, 'Tepic', 136, 'Nayarit', 305025, 0),\n(2566, 'Tampico', 136, 'Tamaulipas', 294789, 0),\n(2567, 'Ixtapaluca', 136, 'México', 293160, 0),\n(2568, 'Apodaca', 136, 'Nuevo León', 282941, 0),\n(2569, 'Guasave', 136, 'Sinaloa', 277201, 0),\n(2570, 'Gómez Palacio', 136, 'Durango', 272806, 0),\n(2571, 'Tapachula', 136, 'Chiapas', 271141, 0),\n(2572, 'Nicolás Romero', 136, 'México', 269393, 0),\n(2573, 'Coatzacoalcos', 136, 'Veracruz', 267037, 0),\n(2574, 'Uruapan', 136, 'Michoacán de Ocampo', 265211, 0),\n(2575, 'Victoria', 136, 'Tamaulipas', 262686, 0),\n(2576, 'Oaxaca de Juárez', 136, 'Oaxaca', 256848, 0),\n(2577, 'Coacalco de Berriozábal', 136, 'México', 252270, 0),\n(2578, 'Pachuca de Soto', 136, 'Hidalgo', 244688, 0),\n(2579, 'General Escobedo', 136, 'Nuevo León', 232961, 0),\n(2580, 'Salamanca', 136, 'Guanajuato', 226864, 0),\n(2581, 'Santa Catarina', 136, 'Nuevo León', 226573, 0),\n(2582, 'Tehuacán', 136, 'Puebla', 225943, 0),\n(2583, 'Chalco', 136, 'México', 222201, 0),\n(2584, 'Cárdenas', 136, 'Tabasco', 216903, 0),\n(2585, 'Campeche', 136, 'Campeche', 216735, 0),\n(2586, 'La Paz', 136, 'México', 213045, 0),\n(2587, 'Othón P. Blanco (Chetumal)', 136, 'Quintana Roo', 208014, 0),\n(2588, 'Texcoco', 136, 'México', 203681, 0),\n(2589, 'La Paz', 136, 'Baja California Sur', 196708, 0),\n(2590, 'Metepec', 136, 'México', 194265, 0),\n(2591, 'Monclova', 136, 'Coahuila de Zaragoza', 193657, 0),\n(2592, 'Huixquilucan', 136, 'México', 193156, 0),\n(2593, 'Chilpancingo de los Bravo', 136, 'Guerrero', 192509, 0),\n(2594, 'Puerto Vallarta', 136, 'Jalisco', 183741, 0),\n(2595, 'Fresnillo', 136, 'Zacatecas', 182744, 0),\n(2596, 'Ciudad Madero', 136, 'Tamaulipas', 182012, 0),\n(2597, 'Soledad de Graciano Sánchez', 136, 'San Luis Potosí', 179956, 0),\n(2598, 'San Juan del Río', 136, 'Querétaro', 179300, 0),\n(2599, 'San Felipe del Progreso', 136, 'México', 177330, 0),\n(2600, 'Córdoba', 136, 'Veracruz', 176952, 0),\n(2601, 'Tecámac', 136, 'México', 172410, 0),\n(2602, 'Ocosingo', 136, 'Chiapas', 171495, 0),\n(2603, 'Carmen', 136, 'Campeche', 171367, 0),\n(2604, 'Lázaro Cárdenas', 136, 'Michoacán de Ocampo', 170878, 0),\n(2605, 'Jiutepec', 136, 'Morelos', 170428, 0),\n(2606, 'Papantla', 136, 'Veracruz', 170123, 0),\n(2607, 'Comalcalco', 136, 'Tabasco', 164640, 0),\n(2608, 'Zamora', 136, 'Michoacán de Ocampo', 161191, 0),\n(2609, 'Nogales', 136, 'Sonora', 159103, 0),\n(2610, 'Huimanguillo', 136, 'Tabasco', 158335, 0),\n(2611, 'Cuautla', 136, 'Morelos', 153132, 0),\n(2612, 'Minatitlán', 136, 'Veracruz', 152983, 0),\n(2613, 'Poza Rica de Hidalgo', 136, 'Veracruz', 152678, 0),\n(2614, 'Ciudad Valles', 136, 'San Luis Potosí', 146411, 0),\n(2615, 'Navolato', 136, 'Sinaloa', 145396, 0),\n(2616, 'San Luis Río Colorado', 136, 'Sonora', 145276, 0),\n(2617, 'Pénjamo', 136, 'Guanajuato', 143927, 0),\n(2618, 'San Andrés Tuxtla', 136, 'Veracruz', 142251, 0),\n(2619, 'Guanajuato', 136, 'Guanajuato', 141215, 0),\n(2620, 'Navojoa', 136, 'Sonora', 140495, 0),\n(2621, 'Zitácuaro', 136, 'Michoacán de Ocampo', 137970, 0),\n(2622, 'Boca del Río', 136, 'Veracruz-Llave', 135721, 0),\n(2623, 'Allende', 136, 'Guanajuato', 134645, 0),\n(2624, 'Silao', 136, 'Guanajuato', 134037, 0),\n(2625, 'Macuspana', 136, 'Tabasco', 133795, 0),\n(2626, 'San Juan Bautista Tuxtepec', 136, 'Oaxaca', 133675, 0),\n(2627, 'San Cristóbal de las Casas', 136, 'Chiapas', 132317, 0),\n(2628, 'Valle de Santiago', 136, 'Guanajuato', 130557, 0),\n(2629, 'Guaymas', 136, 'Sonora', 130108, 0),\n(2630, 'Colima', 136, 'Colima', 129454, 0),\n(2631, 'Dolores Hidalgo', 136, 'Guanajuato', 128675, 0),\n(2632, 'Lagos de Moreno', 136, 'Jalisco', 127949, 0),\n(2633, 'Piedras Negras', 136, 'Coahuila de Zaragoza', 127898, 0),\n(2634, 'Altamira', 136, 'Tamaulipas', 127490, 0),\n(2635, 'Túxpam', 136, 'Veracruz', 126475, 0),\n(2636, 'San Pedro Garza García', 136, 'Nuevo León', 126147, 0),\n(2637, 'Cuauhtémoc', 136, 'Chihuahua', 124279, 0),\n(2638, 'Manzanillo', 136, 'Colima', 124014, 0),\n(2639, 'Iguala de la Independencia', 136, 'Guerrero', 123883, 0),\n(2640, 'Zacatecas', 136, 'Zacatecas', 123700, 0),\n(2641, 'Tlajomulco de Zúñiga', 136, 'Jalisco', 123220, 0),\n(2642, 'Tulancingo de Bravo', 136, 'Hidalgo', 121946, 0),\n(2643, 'Zinacantepec', 136, 'México', 121715, 0),\n(2644, 'San Martín Texmelucan', 136, 'Puebla', 121093, 0),\n(2645, 'Tepatitlán de Morelos', 136, 'Jalisco', 118948, 0),\n(2646, 'Martínez de la Torre', 136, 'Veracruz', 118815, 0),\n(2647, 'Orizaba', 136, 'Veracruz', 118488, 0),\n(2648, 'Apatzingán', 136, 'Michoacán de Ocampo', 117849, 0),\n(2649, 'Atlixco', 136, 'Puebla', 117019, 0),\n(2650, 'Delicias', 136, 'Chihuahua', 116132, 0),\n(2651, 'Ixtlahuaca', 136, 'México', 115548, 0),\n(2652, 'El Mante', 136, 'Tamaulipas', 112453, 0),\n(2653, 'Lerdo', 136, 'Durango', 112272, 0),\n(2654, 'Almoloya de Juárez', 136, 'México', 110550, 0),\n(2655, 'Acámbaro', 136, 'Guanajuato', 110487, 0),\n(2656, 'Acuña', 136, 'Coahuila de Zaragoza', 110388, 0),\n(2657, 'Guadalupe', 136, 'Zacatecas', 108881, 0),\n(2658, 'Huejutla de Reyes', 136, 'Hidalgo', 108017, 0),\n(2659, 'Hidalgo', 136, 'Michoacán de Ocampo', 106198, 0),\n(2660, 'Los Cabos', 136, 'Baja California Sur', 105199, 0),\n(2661, 'Comitán de Domínguez', 136, 'Chiapas', 104986, 0),\n(2662, 'Cunduacán', 136, 'Tabasco', 104164, 0),\n(2663, 'Río Bravo', 136, 'Tamaulipas', 103901, 0),\n(2664, 'Temapache', 136, 'Veracruz', 102824, 0),\n(2665, 'Chilapa de Alvarez', 136, 'Guerrero', 102716, 0),\n(2666, 'Hidalgo del Parral', 136, 'Chihuahua', 100881, 0),\n(2667, 'San Francisco del Rincón', 136, 'Guanajuato', 100149, 0),\n(2668, 'Taxco de Alarcón', 136, 'Guerrero', 99907, 0),\n(2669, 'Zumpango', 136, 'México', 99781, 0),\n(2670, 'San Pedro Cholula', 136, 'Puebla', 99734, 0),\n(2671, 'Lerma', 136, 'México', 99714, 0),\n(2672, 'Tecomán', 136, 'Colima', 99296, 0),\n(2673, 'Las Margaritas', 136, 'Chiapas', 97389, 0),\n(2674, 'Cosoleacaque', 136, 'Veracruz', 97199, 0),\n(2675, 'San Luis de la Paz', 136, 'Guanajuato', 96763, 0),\n(2676, 'José Azueta', 136, 'Guerrero', 95448, 0),\n(2677, 'Santiago Ixcuintla', 136, 'Nayarit', 95311, 0),\n(2678, 'San Felipe', 136, 'Guanajuato', 95305, 0),\n(2679, 'Tejupilco', 136, 'México', 94934, 0),\n(2680, 'Tantoyuca', 136, 'Veracruz', 94709, 0),\n(2681, 'Salvatierra', 136, 'Guanajuato', 94322, 0),\n(2682, 'Tultepec', 136, 'México', 93364, 0),\n(2683, 'Temixco', 136, 'Morelos', 92686, 0),\n(2684, 'Matamoros', 136, 'Coahuila de Zaragoza', 91858, 0),\n(2685, 'Pánuco', 136, 'Veracruz', 90551, 0),\n(2686, 'El Fuerte', 136, 'Sinaloa', 89556, 0),\n(2687, 'Tierra Blanca', 136, 'Veracruz', 89143, 0),\n(2688, 'Weno', 75, 'Chuuk', 22000, 0),\n(2689, 'Palikir', 75, 'Pohnpei', 8600, 1),\n(2690, 'Chisinau', 133, 'Chisinau', 719900, 1),\n(2691, 'Tiraspol', 133, 'Dnjestria', 194300, 0),\n(2692, 'Balti', 133, 'Balti', 153400, 0),\n(2693, 'Bender (Tîghina)', 133, 'Bender (Tîghina)', 125700, 0),\n(2694, 'Monte-Carlo', 132, '–', 13154, 0),\n(2695, 'Monaco-Ville', 132, '–', 1234, 1),\n(2696, 'Ulan Bator', 142, 'Ulaanbaatar', 773700, 1),\n(2697, 'Plymouth', 146, 'Plymouth', 2000, 1),\n(2698, 'Maputo', 144, 'Maputo', 1018938, 1),\n(2699, 'Matola', 144, 'Maputo', 424662, 0),\n(2700, 'Beira', 144, 'Sofala', 397368, 0),\n(2701, 'Nampula', 144, 'Nampula', 303346, 0),\n(2702, 'Chimoio', 144, 'Manica', 171056, 0),\n(2703, 'Naçala-Porto', 144, 'Nampula', 158248, 0),\n(2704, 'Quelimane', 144, 'Zambézia', 150116, 0),\n(2705, 'Mocuba', 144, 'Zambézia', 124700, 0),\n(2706, 'Tete', 144, 'Tete', 101984, 0),\n(2707, 'Xai-Xai', 144, 'Gaza', 99442, 0),\n(2708, 'Gurue', 144, 'Zambézia', 99300, 0),\n(2709, 'Maxixe', 144, 'Inhambane', 93985, 0),\n(2710, 'Rangoon (Yangon)', 141, 'Rangoon [Yangon]', 3361700, 1),\n(2711, 'Mandalay', 141, 'Mandalay', 885300, 0),\n(2712, 'Moulmein (Mawlamyine)', 141, 'Mon', 307900, 0),\n(2713, 'Pegu (Bago)', 141, 'Pegu [Bago]', 190900, 0),\n(2714, 'Bassein (Pathein)', 141, 'Irrawaddy [Ayeyarwad', 183900, 0),\n(2715, 'Monywa', 141, 'Sagaing', 138600, 0),\n(2716, 'Sittwe (Akyab)', 141, 'Rakhine', 137600, 0),\n(2717, 'Taunggyi (Taunggye)', 141, 'Shan', 131500, 0),\n(2718, 'Meikhtila', 141, 'Mandalay', 129700, 0),\n(2719, 'Mergui (Myeik)', 141, 'Tenasserim [Tanintha', 122700, 0),\n(2720, 'Lashio (Lasho)', 141, 'Shan', 107600, 0),\n(2721, 'Prome (Pyay)', 141, 'Pegu [Bago]', 105700, 0),\n(2722, 'Henzada (Hinthada)', 141, 'Irrawaddy [Ayeyarwad', 104700, 0),\n(2723, 'Myingyan', 141, 'Mandalay', 103600, 0),\n(2724, 'Tavoy (Dawei)', 141, 'Tenasserim [Tanintha', 96800, 0),\n(2725, 'Pagakku (Pakokku)', 141, 'Magwe [Magway]', 94800, 0),\n(2726, 'Windhoek', 152, 'Khomas', 169000, 1),\n(2727, 'Yangor', 162, '–', 4050, 0),\n(2728, 'Yaren', 162, '–', 559, 1),\n(2729, 'Kathmandu', 161, 'Central', 591835, 1),\n(2730, 'Biratnagar', 161, 'Eastern', 157764, 0),\n(2731, 'Pokhara', 161, 'Western', 146318, 0),\n(2732, 'Lalitapur', 161, 'Central', 145847, 0),\n(2733, 'Birgunj', 161, 'Central', 90639, 0),\n(2734, 'Managua', 157, 'Managua', 959000, 1),\n(2735, 'León', 157, 'León', 123865, 0),\n(2736, 'Chinandega', 157, 'Chinandega', 97387, 0),\n(2737, 'Masaya', 157, 'Masaya', 88971, 0),\n(2738, 'Niamey', 154, 'Niamey', 420000, 1),\n(2739, 'Zinder', 154, 'Zinder', 120892, 0),\n(2740, 'Maradi', 154, 'Maradi', 112965, 0),\n(2741, 'Lagos', 156, 'Lagos', 1518000, 0),\n(2742, 'Ibadan', 156, 'Oyo & Osun', 1432000, 0),\n(2743, 'Ogbomosho', 156, 'Oyo & Osun', 730000, 0),\n(2744, 'Kano', 156, 'Kano & Jigawa', 674100, 0),\n(2745, 'Oshogbo', 156, 'Oyo & Osun', 476800, 0),\n(2746, 'Ilorin', 156, 'Kwara & Kogi', 475800, 0),\n(2747, 'Abeokuta', 156, 'Ogun', 427400, 0),\n(2748, 'Port Harcourt', 156, 'Rivers & Bayelsa', 410000, 0),\n(2749, 'Zaria', 156, 'Kaduna', 379200, 0),\n(2750, 'Ilesha', 156, 'Oyo & Osun', 378400, 0),\n(2751, 'Onitsha', 156, 'Anambra & Enugu & Eb', 371900, 0),\n(2752, 'Iwo', 156, 'Oyo & Osun', 362000, 0),\n(2753, 'Ado-Ekiti', 156, 'Ondo & Ekiti', 359400, 0),\n(2754, 'Abuja', 156, 'Federal Capital Dist', 350100, 1),\n(2755, 'Kaduna', 156, 'Kaduna', 342200, 0),\n(2756, 'Mushin', 156, 'Lagos', 333200, 0),\n(2757, 'Maiduguri', 156, 'Borno & Yobe', 320000, 0),\n(2758, 'Enugu', 156, 'Anambra & Enugu & Eb', 316100, 0),\n(2759, 'Ede', 156, 'Oyo & Osun', 307100, 0),\n(2760, 'Aba', 156, 'Imo & Abia', 298900, 0),\n(2761, 'Ife', 156, 'Oyo & Osun', 296800, 0),\n(2762, 'Ila', 156, 'Oyo & Osun', 264000, 0),\n(2763, 'Oyo', 156, 'Oyo & Osun', 256400, 0),\n(2764, 'Ikerre', 156, 'Ondo & Ekiti', 244600, 0),\n(2765, 'Benin City', 156, 'Edo & Delta', 229400, 0),\n(2766, 'Iseyin', 156, 'Oyo & Osun', 217300, 0),\n(2767, 'Katsina', 156, 'Katsina', 206500, 0),\n(2768, 'Jos', 156, 'Plateau & Nassarawa', 206300, 0),\n(2769, 'Sokoto', 156, 'Sokoto & Kebbi & Zam', 204900, 0),\n(2770, 'Ilobu', 156, 'Oyo & Osun', 199000, 0),\n(2771, 'Offa', 156, 'Kwara & Kogi', 197200, 0),\n(2772, 'Ikorodu', 156, 'Lagos', 184900, 0),\n(2773, 'Ilawe-Ekiti', 156, 'Ondo & Ekiti', 184500, 0),\n(2774, 'Owo', 156, 'Ondo & Ekiti', 183500, 0),\n(2775, 'Ikirun', 156, 'Oyo & Osun', 181400, 0),\n(2776, 'Shaki', 156, 'Oyo & Osun', 174500, 0),\n(2777, 'Calabar', 156, 'Cross River', 174400, 0),\n(2778, 'Ondo', 156, 'Ondo & Ekiti', 173600, 0),\n(2779, 'Akure', 156, 'Ondo & Ekiti', 162300, 0),\n(2780, 'Gusau', 156, 'Sokoto & Kebbi & Zam', 158000, 0),\n(2781, 'Ijebu-Ode', 156, 'Ogun', 156400, 0),\n(2782, 'Effon-Alaiye', 156, 'Oyo & Osun', 153100, 0),\n(2783, 'Kumo', 156, 'Bauchi & Gombe', 148000, 0),\n(2784, 'Shomolu', 156, 'Lagos', 147700, 0),\n(2785, 'Oka-Akoko', 156, 'Ondo & Ekiti', 142900, 0),\n(2786, 'Ikare', 156, 'Ondo & Ekiti', 140800, 0),\n(2787, 'Sapele', 156, 'Edo & Delta', 139200, 0),\n(2788, 'Deba Habe', 156, 'Bauchi & Gombe', 138600, 0),\n(2789, 'Minna', 156, 'Niger', 136900, 0),\n(2790, 'Warri', 156, 'Edo & Delta', 126100, 0),\n(2791, 'Bida', 156, 'Niger', 125500, 0),\n(2792, 'Ikire', 156, 'Oyo & Osun', 123300, 0),\n(2793, 'Makurdi', 156, 'Benue', 123100, 0),\n(2794, 'Lafia', 156, 'Plateau & Nassarawa', 122500, 0),\n(2795, 'Inisa', 156, 'Oyo & Osun', 119800, 0),\n(2796, 'Shagamu', 156, 'Ogun', 117200, 0),\n(2797, 'Awka', 156, 'Anambra & Enugu & Eb', 111200, 0),\n(2798, 'Gombe', 156, 'Bauchi & Gombe', 107800, 0),\n(2799, 'Igboho', 156, 'Oyo & Osun', 106800, 0),\n(2800, 'Ejigbo', 156, 'Oyo & Osun', 105900, 0),\n(2801, 'Agege', 156, 'Lagos', 105000, 0),\n(2802, 'Ise-Ekiti', 156, 'Ondo & Ekiti', 103400, 0),\n(2803, 'Ugep', 156, 'Cross River', 102600, 0),\n(2804, 'Epe', 156, 'Lagos', 101000, 0),\n(2805, 'Alofi', 158, '–', 682, 1),\n(2806, 'Kingston', 155, '–', 800, 1),\n(2807, 'Oslo', 160, 'Oslo', 508726, 1),\n(2808, 'Bergen', 160, 'Hordaland', 230948, 0),\n(2809, 'Trondheim', 160, 'Sør-Trøndelag', 150166, 0),\n(2810, 'Stavanger', 160, 'Rogaland', 108848, 0),\n(2811, 'Bærum', 160, 'Akershus', 101340, 0),\n(2812, 'Abidjan', 43, 'Abidjan', 2500000, 0),\n(2813, 'Bouaké', 43, 'Bouaké', 329850, 0),\n(2814, 'Yamoussoukro', 43, 'Yamoussoukro', 130000, 1),\n(2815, 'Daloa', 43, 'Daloa', 121842, 0),\n(2816, 'Korhogo', 43, 'Korhogo', 109445, 0),\n(2817, 'al-Sib', 164, 'Masqat', 155000, 0),\n(2818, 'Salala', 164, 'Zufar', 131813, 0),\n(2819, 'Bawshar', 164, 'Masqat', 107500, 0),\n(2820, 'Suhar', 164, 'al-Batina', 90814, 0),\n(2821, 'Masqat', 164, 'Masqat', 51969, 1),\n(2822, 'Karachi', 165, 'Sindh', 9269265, 0),\n(2823, 'Lahore', 165, 'Punjab', 5063499, 0),\n(2824, 'Faisalabad', 165, 'Punjab', 1977246, 0),\n(2825, 'Rawalpindi', 165, 'Punjab', 1406214, 0),\n(2826, 'Multan', 165, 'Punjab', 1182441, 0),\n(2827, 'Hyderabad', 165, 'Sindh', 1151274, 0),\n(2828, 'Gujranwala', 165, 'Punjab', 1124749, 0),\n(2829, 'Peshawar', 165, 'Nothwest Border Prov', 988005, 0),\n(2830, 'Quetta', 165, 'Baluchistan', 560307, 0),\n(2831, 'Islamabad', 165, 'Islamabad', 524500, 1),\n(2832, 'Sargodha', 165, 'Punjab', 455360, 0),\n(2833, 'Sialkot', 165, 'Punjab', 417597, 0),\n(2834, 'Bahawalpur', 165, 'Punjab', 403408, 0),\n(2835, 'Sukkur', 165, 'Sindh', 329176, 0),\n(2836, 'Jhang', 165, 'Punjab', 292214, 0),\n(2837, 'Sheikhupura', 165, 'Punjab', 271875, 0),\n(2838, 'Larkana', 165, 'Sindh', 270366, 0),\n(2839, 'Gujrat', 165, 'Punjab', 250121, 0),\n(2840, 'Mardan', 165, 'Nothwest Border Prov', 244511, 0),\n(2841, 'Kasur', 165, 'Punjab', 241649, 0),\n(2842, 'Rahim Yar Khan', 165, 'Punjab', 228479, 0),\n(2843, 'Sahiwal', 165, 'Punjab', 207388, 0),\n(2844, 'Okara', 165, 'Punjab', 200901, 0),\n(2845, 'Wah', 165, 'Punjab', 198400, 0),\n(2846, 'Dera Ghazi Khan', 165, 'Punjab', 188100, 0),\n(2847, 'Mirpur Khas', 165, 'Sind', 184500, 0),\n(2848, 'Nawabshah', 165, 'Sind', 183100, 0),\n(2849, 'Mingora', 165, 'Nothwest Border Prov', 174500, 0),\n(2850, 'Chiniot', 165, 'Punjab', 169300, 0),\n(2851, 'Kamoke', 165, 'Punjab', 151000, 0),\n(2852, 'Mandi Burewala', 165, 'Punjab', 149900, 0),\n(2853, 'Jhelum', 165, 'Punjab', 145800, 0),\n(2854, 'Sadiqabad', 165, 'Punjab', 141500, 0),\n(2855, 'Jacobabad', 165, 'Sind', 137700, 0),\n(2856, 'Shikarpur', 165, 'Sind', 133300, 0),\n(2857, 'Khanewal', 165, 'Punjab', 133000, 0),\n(2858, 'Hafizabad', 165, 'Punjab', 130200, 0),\n(2859, 'Kohat', 165, 'Nothwest Border Prov', 125300, 0),\n(2860, 'Muzaffargarh', 165, 'Punjab', 121600, 0),\n(2861, 'Khanpur', 165, 'Punjab', 117800, 0),\n(2862, 'Gojra', 165, 'Punjab', 115000, 0),\n(2863, 'Bahawalnagar', 165, 'Punjab', 109600, 0),\n(2864, 'Muridke', 165, 'Punjab', 108600, 0),\n(2865, 'Pak Pattan', 165, 'Punjab', 107800, 0),\n(2866, 'Abottabad', 165, 'Nothwest Border Prov', 106000, 0),\n(2867, 'Tando Adam', 165, 'Sind', 103400, 0),\n(2868, 'Jaranwala', 165, 'Punjab', 103300, 0),\n(2869, 'Khairpur', 165, 'Sind', 102200, 0),\n(2870, 'Chishtian Mandi', 165, 'Punjab', 101700, 0),\n(2871, 'Daska', 165, 'Punjab', 101500, 0),\n(2872, 'Dadu', 165, 'Sind', 98600, 0),\n(2873, 'Mandi Bahauddin', 165, 'Punjab', 97300, 0),\n(2874, 'Ahmadpur East', 165, 'Punjab', 96000, 0),\n(2875, 'Kamalia', 165, 'Punjab', 95300, 0),\n(2876, 'Khuzdar', 165, 'Baluchistan', 93100, 0),\n(2877, 'Vihari', 165, 'Punjab', 92300, 0),\n(2878, 'Dera Ismail Khan', 165, 'Nothwest Border Prov', 90400, 0),\n(2879, 'Wazirabad', 165, 'Punjab', 89700, 0),\n(2880, 'Nowshera', 165, 'Nothwest Border Prov', 89400, 0),\n(2881, 'Koror', 170, 'Koror', 12000, 1),\n(2882, 'Ciudad de Panamá', 166, 'Panamá', 471373, 1),\n(2883, 'San Miguelito', 166, 'San Miguelito', 315382, 0),\n(2884, 'Port Moresby', 171, 'National Capital Dis', 247000, 1),\n(2885, 'Asunción', 176, 'Asunción', 557776, 1),\n(2886, 'Ciudad del Este', 176, 'Alto Paraná', 133881, 0),\n(2887, 'San Lorenzo', 176, 'Central', 133395, 0),\n(2888, 'Lambaré', 176, 'Central', 99681, 0),\n(2889, 'Fernando de la Mora', 176, 'Central', 95287, 0),\n(2890, 'Lima', 168, 'Lima', 6464693, 1),\n(2891, 'Arequipa', 168, 'Arequipa', 762000, 0),\n(2892, 'Trujillo', 168, 'La Libertad', 652000, 0),\n(2893, 'Chiclayo', 168, 'Lambayeque', 517000, 0),\n(2894, 'Callao', 168, 'Callao', 424294, 0),\n(2895, 'Iquitos', 168, 'Loreto', 367000, 0),\n(2896, 'Chimbote', 168, 'Ancash', 336000, 0),\n(2897, 'Huancayo', 168, 'Junín', 327000, 0),\n(2898, 'Piura', 168, 'Piura', 325000, 0),\n(2899, 'Cusco', 168, 'Cusco', 291000, 0),\n(2900, 'Pucallpa', 168, 'Ucayali', 220866, 0),\n(2901, 'Tacna', 168, 'Tacna', 215683, 0),\n(2902, 'Ica', 168, 'Ica', 194820, 0),\n(2903, 'Sullana', 168, 'Piura', 147361, 0),\n(2904, 'Juliaca', 168, 'Puno', 142576, 0),\n(2905, 'Huánuco', 168, 'Huanuco', 129688, 0),\n(2906, 'Ayacucho', 168, 'Ayacucho', 118960, 0),\n(2907, 'Chincha Alta', 168, 'Ica', 110016, 0),\n(2908, 'Cajamarca', 168, 'Cajamarca', 108009, 0),\n(2909, 'Puno', 168, 'Puno', 101578, 0),\n(2910, 'Ventanilla', 168, 'Callao', 101056, 0),\n(2911, 'Castilla', 168, 'Piura', 90642, 0),\n(2912, 'Adamstown', 167, '–', 42, 1),\n(2913, 'Garapan', 143, 'Saipan', 9200, 1),\n(2914, 'Lisboa', 175, 'Lisboa', 563210, 1),\n(2915, 'Porto', 175, 'Porto', 273060, 0),\n(2916, 'Amadora', 175, 'Lisboa', 122106, 0),\n(2917, 'Coímbra', 175, 'Coímbra', 96100, 0),\n(2918, 'Braga', 175, 'Braga', 90535, 0),\n(2919, 'San Juan', 173, 'San Juan', 434374, 1),\n(2920, 'Bayamón', 173, 'Bayamón', 224044, 0),\n(2921, 'Ponce', 173, 'Ponce', 186475, 0),\n(2922, 'Carolina', 173, 'Carolina', 186076, 0),\n(2923, 'Caguas', 173, 'Caguas', 140502, 0),\n(2924, 'Arecibo', 173, 'Arecibo', 100131, 0),\n(2925, 'Guaynabo', 173, 'Guaynabo', 100053, 0),\n(2926, 'Mayagüez', 173, 'Mayagüez', 98434, 0),\n(2927, 'Toa Baja', 173, 'Toa Baja', 94085, 0),\n(2928, 'Warszawa', 172, 'Mazowieckie', 1615369, 1),\n(2929, 'Lódz', 172, 'Lodzkie', 800110, 0),\n(2930, 'Kraków', 172, 'Malopolskie', 738150, 0),\n(2931, 'Wroclaw', 172, 'Dolnoslaskie', 636765, 0),\n(2932, 'Poznan', 172, 'Wielkopolskie', 576899, 0),\n(2933, 'Gdansk', 172, 'Pomorskie', 458988, 0),\n(2934, 'Szczecin', 172, 'Zachodnio-Pomorskie', 416988, 0),\n(2935, 'Bydgoszcz', 172, 'Kujawsko-Pomorskie', 386855, 0),\n(2936, 'Lublin', 172, 'Lubelskie', 356251, 0),\n(2937, 'Katowice', 172, 'Slaskie', 345934, 0),\n(2938, 'Bialystok', 172, 'Podlaskie', 283937, 0),\n(2939, 'Czestochowa', 172, 'Slaskie', 257812, 0),\n(2940, 'Gdynia', 172, 'Pomorskie', 253521, 0),\n(2941, 'Sosnowiec', 172, 'Slaskie', 244102, 0),\n(2942, 'Radom', 172, 'Mazowieckie', 232262, 0),\n(2943, 'Kielce', 172, 'Swietokrzyskie', 212383, 0),\n(2944, 'Gliwice', 172, 'Slaskie', 212164, 0),\n(2945, 'Torun', 172, 'Kujawsko-Pomorskie', 206158, 0),\n(2946, 'Bytom', 172, 'Slaskie', 205560, 0),\n(2947, 'Zabrze', 172, 'Slaskie', 200177, 0),\n(2948, 'Bielsko-Biala', 172, 'Slaskie', 180307, 0),\n(2949, 'Olsztyn', 172, 'Warminsko-Mazurskie', 170904, 0),\n(2950, 'Rzeszów', 172, 'Podkarpackie', 162049, 0),\n(2951, 'Ruda Slaska', 172, 'Slaskie', 159665, 0),\n(2952, 'Rybnik', 172, 'Slaskie', 144582, 0),\n(2953, 'Walbrzych', 172, 'Dolnoslaskie', 136923, 0),\n(2954, 'Tychy', 172, 'Slaskie', 133178, 0),\n(2955, 'Dabrowa Górnicza', 172, 'Slaskie', 131037, 0),\n(2956, 'Plock', 172, 'Mazowieckie', 131011, 0),\n(2957, 'Elblag', 172, 'Warminsko-Mazurskie', 129782, 0),\n(2958, 'Opole', 172, 'Opolskie', 129553, 0),\n(2959, 'Gorzów Wielkopolski', 172, 'Lubuskie', 126019, 0),\n(2960, 'Wloclawek', 172, 'Kujawsko-Pomorskie', 123373, 0),\n(2961, 'Chorzów', 172, 'Slaskie', 121708, 0),\n(2962, 'Tarnów', 172, 'Malopolskie', 121494, 0),\n(2963, 'Zielona Góra', 172, 'Lubuskie', 118182, 0),\n(2964, 'Koszalin', 172, 'Zachodnio-Pomorskie', 112375, 0),\n(2965, 'Legnica', 172, 'Dolnoslaskie', 109335, 0),\n(2966, 'Kalisz', 172, 'Wielkopolskie', 106641, 0),\n(2967, 'Grudziadz', 172, 'Kujawsko-Pomorskie', 102434, 0),\n(2968, 'Slupsk', 172, 'Pomorskie', 102370, 0),\n(2969, 'Jastrzebie-Zdrój', 172, 'Slaskie', 102294, 0),\n(2970, 'Jaworzno', 172, 'Slaskie', 97929, 0),\n(2971, 'Jelenia Góra', 172, 'Dolnoslaskie', 93901, 0),\n(2972, 'Malabo', 85, 'Bioko', 40000, 1),\n(2973, 'Doha', 179, 'Doha', 355000, 1),\n(2974, 'Paris', 73, 'Île-de-France', 2125246, 1),\n(2975, 'Marseille', 73, 'Provence-Alpes-Côte', 798430, 0),\n(2976, 'Lyon', 73, 'Rhône-Alpes', 445452, 0),\n(2977, 'Toulouse', 73, 'Midi-Pyrénées', 390350, 0),\n(2978, 'Nice', 73, 'Provence-Alpes-Côte', 342738, 0),\n(2979, 'Nantes', 73, 'Pays de la Loire', 270251, 0),\n(2980, 'Strasbourg', 73, 'Alsace', 264115, 0),\n(2981, 'Montpellier', 73, 'Languedoc-Roussillon', 225392, 0),\n(2982, 'Bordeaux', 73, 'Aquitaine', 215363, 0),\n(2983, 'Rennes', 73, 'Haute-Normandie', 206229, 0),\n(2984, 'Le Havre', 73, 'Champagne-Ardenne', 190905, 0),\n(2985, 'Reims', 73, 'Nord-Pas-de-Calais', 187206, 0),\n(2986, 'Lille', 73, 'Rhône-Alpes', 184657, 0),\n(2987, 'St-Étienne', 73, 'Bretagne', 180210, 0),\n(2988, 'Toulon', 73, 'Provence-Alpes-Côte', 160639, 0),\n(2989, 'Grenoble', 73, 'Rhône-Alpes', 153317, 0),\n(2990, 'Angers', 73, 'Pays de la Loire', 151279, 0),\n(2991, 'Dijon', 73, 'Bourgogne', 149867, 0),\n(2992, 'Brest', 73, 'Bretagne', 149634, 0),\n(2993, 'Le Mans', 73, 'Pays de la Loire', 146105, 0),\n(2994, 'Clermont-Ferrand', 73, 'Auvergne', 137140, 0),\n(2995, 'Amiens', 73, 'Picardie', 135501, 0),\n(2996, 'Aix-en-Provence', 73, 'Provence-Alpes-Côte', 134222, 0),\n(2997, 'Limoges', 73, 'Limousin', 133968, 0),\n(2998, 'Nîmes', 73, 'Languedoc-Roussillon', 133424, 0),\n(2999, 'Tours', 73, 'Centre', 132820, 0),\n(3000, 'Villeurbanne', 73, 'Rhône-Alpes', 124215, 0),\n(3001, 'Metz', 73, 'Lorraine', 123776, 0),\n(3002, 'Besançon', 73, 'Franche-Comté', 117733, 0),\n(3003, 'Caen', 73, 'Basse-Normandie', 113987, 0),\n(3004, 'Orléans', 73, 'Centre', 113126, 0),\n(3005, 'Mulhouse', 73, 'Alsace', 110359, 0),\n(3006, 'Rouen', 73, 'Haute-Normandie', 106592, 0),\n(3007, 'Boulogne-Billancourt', 73, 'Île-de-France', 106367, 0),\n(3008, 'Perpignan', 73, 'Languedoc-Roussillon', 105115, 0),\n(3009, 'Nancy', 73, 'Lorraine', 103605, 0),\n(3010, 'Roubaix', 73, 'Nord-Pas-de-Calais', 96984, 0),\n(3011, 'Argenteuil', 73, 'Île-de-France', 93961, 0),\n(3012, 'Tourcoing', 73, 'Nord-Pas-de-Calais', 93540, 0),\n(3013, 'Montreuil', 73, 'Île-de-France', 90674, 0),\n(3014, 'Cayenne', 90, 'Cayenne', 50699, 1),\n(3015, 'Faaa', 178, 'Tahiti', 25888, 0),\n(3016, 'Papeete', 178, 'Tahiti', 25553, 1),\n(3017, 'Saint-Denis', 180, 'Saint-Denis', 131480, 1),\n(3018, 'Bucuresti', 181, 'Bukarest', 2016131, 1),\n(3019, 'Iasi', 181, 'Iasi', 348070, 0),\n(3020, 'Constanta', 181, 'Constanta', 342264, 0),\n(3021, 'Cluj-Napoca', 181, 'Cluj', 332498, 0),\n(3022, 'Galati', 181, 'Galati', 330276, 0),\n(3023, 'Timisoara', 181, 'Timis', 324304, 0),\n(3024, 'Brasov', 181, 'Brasov', 314225, 0),\n(3025, 'Craiova', 181, 'Dolj', 313530, 0),\n(3026, 'Ploiesti', 181, 'Prahova', 251348, 0),\n(3027, 'Braila', 181, 'Braila', 233756, 0),\n(3028, 'Oradea', 181, 'Bihor', 222239, 0),\n(3029, 'Bacau', 181, 'Bacau', 209235, 0),\n(3030, 'Pitesti', 181, 'Arges', 187170, 0),\n(3031, 'Arad', 181, 'Arad', 184408, 0),\n(3032, 'Sibiu', 181, 'Sibiu', 169611, 0),\n(3033, 'Târgu Mures', 181, 'Mures', 165153, 0),\n(3034, 'Baia Mare', 181, 'Maramures', 149665, 0),\n(3035, 'Buzau', 181, 'Buzau', 148372, 0),\n(3036, 'Satu Mare', 181, 'Satu Mare', 130059, 0),\n(3037, 'Botosani', 181, 'Botosani', 128730, 0),\n(3038, 'Piatra Neamt', 181, 'Neamt', 125070, 0),\n(3039, 'Râmnicu Vâlcea', 181, 'Vâlcea', 119741, 0),\n(3040, 'Suceava', 181, 'Suceava', 118549, 0),\n(3041, 'Drobeta-Turnu Severin', 181, 'Mehedinti', 117865, 0),\n(3042, 'Târgoviste', 181, 'Dâmbovita', 98980, 0),\n(3043, 'Focsani', 181, 'Vrancea', 98979, 0),\n(3044, 'Târgu Jiu', 181, 'Gorj', 98524, 0),\n(3045, 'Tulcea', 181, 'Tulcea', 96278, 0),\n(3046, 'Resita', 181, 'Caras-Severin', 93976, 0),\n(3047, 'Kigali', 183, 'Kigali', 286000, 1),\n(3048, 'Stockholm', 201, 'Lisboa', 750348, 1),\n(3049, 'Gothenburg [Göteborg]', 201, 'West Götanmaan län', 466990, 0),\n(3050, 'Malmö', 201, 'Skåne län', 259579, 0),\n(3051, 'Uppsala', 201, 'Uppsala län', 189569, 0),\n(3052, 'Linköping', 201, 'East Götanmaan län', 133168, 0),\n(3053, 'Västerås', 201, 'Västmanlands län', 126328, 0),\n(3054, 'Örebro', 201, 'Örebros län', 124207, 0),\n(3055, 'Norrköping', 201, 'East Götanmaan län', 122199, 0),\n(3056, 'Helsingborg', 201, 'Skåne län', 117737, 0),\n(3057, 'Jönköping', 201, 'Jönköpings län', 117095, 0),\n(3058, 'Umeå', 201, 'Västerbottens län', 104512, 0),\n(3059, 'Lund', 201, 'Skåne län', 98948, 0),\n(3060, 'Borås', 201, 'West Götanmaan län', 96883, 0),\n(3061, 'Sundsvall', 201, 'Västernorrlands län', 93126, 0),\n(3062, 'Gävle', 201, 'Gävleborgs län', 90742, 0),\n(3063, 'Jamestown', 189, 'Saint Helena', 1500, 1),\n(3064, 'Basseterre', 116, 'St George Basseterre', 11600, 1),\n(3065, 'Castries', 123, 'Castries', 2301, 1),\n(3066, 'Kingstown', 227, 'St George', 17100, 1),\n(3067, 'Saint-Pierre', 196, 'Saint-Pierre', 5808, 1),\n(3068, 'Berlin', 57, 'Berliini', 3386667, 1),\n(3069, 'Hamburg', 57, 'Hamburg', 1704735, 0),\n(3070, 'Munich [München]', 57, 'Baijeri', 1194560, 0),\n(3071, 'Köln', 57, 'Nordrhein-Westfalen', 962507, 0),\n(3072, 'Frankfurt am Main', 57, 'Hessen', 643821, 0),\n(3073, 'Essen', 57, 'Nordrhein-Westfalen', 599515, 0),\n(3074, 'Dortmund', 57, 'Nordrhein-Westfalen', 590213, 0),\n(3075, 'Stuttgart', 57, 'Baden-Württemberg', 582443, 0),\n(3076, 'Düsseldorf', 57, 'Nordrhein-Westfalen', 568855, 0),\n(3077, 'Bremen', 57, 'Bremen', 540330, 0),\n(3078, 'Duisburg', 57, 'Nordrhein-Westfalen', 519793, 0),\n(3079, 'Hannover', 57, 'Niedersachsen', 514718, 0),\n(3080, 'Leipzig', 57, 'Saksi', 489532, 0),\n(3081, 'Nürnberg', 57, 'Baijeri', 486628, 0),\n(3082, 'Dresden', 57, 'Saksi', 476668, 0),\n(3083, 'Bochum', 57, 'Nordrhein-Westfalen', 392830, 0),\n(3084, 'Wuppertal', 57, 'Nordrhein-Westfalen', 368993, 0),\n(3085, 'Bielefeld', 57, 'Nordrhein-Westfalen', 321125, 0),\n(3086, 'Mannheim', 57, 'Baden-Württemberg', 307730, 0),\n(3087, 'Bonn', 57, 'Nordrhein-Westfalen', 301048, 0),\n(3088, 'Gelsenkirchen', 57, 'Nordrhein-Westfalen', 281979, 0),\n(3089, 'Karlsruhe', 57, 'Baden-Württemberg', 277204, 0),\n(3090, 'Wiesbaden', 57, 'Hessen', 268716, 0),\n(3091, 'Münster', 57, 'Nordrhein-Westfalen', 264670, 0),\n(3092, 'Mönchengladbach', 57, 'Nordrhein-Westfalen', 263697, 0),\n(3093, 'Chemnitz', 57, 'Saksi', 263222, 0),\n(3094, 'Augsburg', 57, 'Baijeri', 254867, 0),\n(3095, 'Halle/Saale', 57, 'Anhalt Sachsen', 254360, 0),\n(3096, 'Braunschweig', 57, 'Niedersachsen', 246322, 0),\n(3097, 'Aachen', 57, 'Nordrhein-Westfalen', 243825, 0),\n(3098, 'Krefeld', 57, 'Nordrhein-Westfalen', 241769, 0),\n(3099, 'Magdeburg', 57, 'Anhalt Sachsen', 235073, 0),\n(3100, 'Kiel', 57, 'Schleswig-Holstein', 233795, 0),\n(3101, 'Oberhausen', 57, 'Nordrhein-Westfalen', 222349, 0),\n(3102, 'Lübeck', 57, 'Schleswig-Holstein', 213326, 0),\n(3103, 'Hagen', 57, 'Nordrhein-Westfalen', 205201, 0),\n(3104, 'Rostock', 57, 'Mecklenburg-Vorpomme', 203279, 0),\n(3105, 'Freiburg im Breisgau', 57, 'Baden-Württemberg', 202455, 0),\n(3106, 'Erfurt', 57, 'Thüringen', 201267, 0),\n(3107, 'Kassel', 57, 'Hessen', 196211, 0),\n(3108, 'Saarbrücken', 57, 'Saarland', 183836, 0),\n(3109, 'Mainz', 57, 'Rheinland-Pfalz', 183134, 0),\n(3110, 'Hamm', 57, 'Nordrhein-Westfalen', 181804, 0),\n(3111, 'Herne', 57, 'Nordrhein-Westfalen', 175661, 0),\n(3112, 'Mülheim an der Ruhr', 57, 'Nordrhein-Westfalen', 173895, 0),\n(3113, 'Solingen', 57, 'Nordrhein-Westfalen', 165583, 0),\n(3114, 'Osnabrück', 57, 'Niedersachsen', 164539, 0),\n(3115, 'Ludwigshafen am Rhein', 57, 'Rheinland-Pfalz', 163771, 0),\n(3116, 'Leverkusen', 57, 'Nordrhein-Westfalen', 160841, 0),\n(3117, 'Oldenburg', 57, 'Niedersachsen', 154125, 0),\n(3118, 'Neuss', 57, 'Nordrhein-Westfalen', 149702, 0),\n(3119, 'Heidelberg', 57, 'Baden-Württemberg', 139672, 0),\n(3120, 'Darmstadt', 57, 'Hessen', 137776, 0),\n(3121, 'Paderborn', 57, 'Nordrhein-Westfalen', 137647, 0),\n(3122, 'Potsdam', 57, 'Brandenburg', 128983, 0),\n(3123, 'Würzburg', 57, 'Baijeri', 127350, 0),\n(3124, 'Regensburg', 57, 'Baijeri', 125236, 0),\n(3125, 'Recklinghausen', 57, 'Nordrhein-Westfalen', 125022, 0),\n(3126, 'Göttingen', 57, 'Niedersachsen', 124775, 0),\n(3127, 'Bremerhaven', 57, 'Bremen', 122735, 0),\n(3128, 'Wolfsburg', 57, 'Niedersachsen', 121954, 0),\n(3129, 'Bottrop', 57, 'Nordrhein-Westfalen', 121097, 0),\n(3130, 'Remscheid', 57, 'Nordrhein-Westfalen', 120125, 0),\n(3131, 'Heilbronn', 57, 'Baden-Württemberg', 119526, 0),\n(3132, 'Pforzheim', 57, 'Baden-Württemberg', 117227, 0),\n(3133, 'Offenbach am Main', 57, 'Hessen', 116627, 0),\n(3134, 'Ulm', 57, 'Baden-Württemberg', 116103, 0),\n(3135, 'Ingolstadt', 57, 'Baijeri', 114826, 0),\n(3136, 'Gera', 57, 'Thüringen', 114718, 0),\n(3137, 'Salzgitter', 57, 'Niedersachsen', 112934, 0),\n(3138, 'Cottbus', 57, 'Brandenburg', 110894, 0),\n(3139, 'Reutlingen', 57, 'Baden-Württemberg', 110343, 0),\n(3140, 'Fürth', 57, 'Baijeri', 109771, 0),\n(3141, 'Siegen', 57, 'Nordrhein-Westfalen', 109225, 0),\n(3142, 'Koblenz', 57, 'Rheinland-Pfalz', 108003, 0),\n(3143, 'Moers', 57, 'Nordrhein-Westfalen', 106837, 0),\n(3144, 'Bergisch Gladbach', 57, 'Nordrhein-Westfalen', 106150, 0),\n(3145, 'Zwickau', 57, 'Saksi', 104146, 0),\n(3146, 'Hildesheim', 57, 'Niedersachsen', 104013, 0),\n(3147, 'Witten', 57, 'Nordrhein-Westfalen', 103384, 0),\n(3148, 'Schwerin', 57, 'Mecklenburg-Vorpomme', 102878, 0),\n(3149, 'Erlangen', 57, 'Baijeri', 100750, 0),\n(3150, 'Kaiserslautern', 57, 'Rheinland-Pfalz', 100025, 0),\n(3151, 'Trier', 57, 'Rheinland-Pfalz', 99891, 0),\n(3152, 'Jena', 57, 'Thüringen', 99779, 0),\n(3153, 'Iserlohn', 57, 'Nordrhein-Westfalen', 99474, 0),\n(3154, 'Gütersloh', 57, 'Nordrhein-Westfalen', 95028, 0),\n(3155, 'Marl', 57, 'Nordrhein-Westfalen', 93735, 0),\n(3156, 'Lünen', 57, 'Nordrhein-Westfalen', 92044, 0),\n(3157, 'Düren', 57, 'Nordrhein-Westfalen', 91092, 0),\n(3158, 'Ratingen', 57, 'Nordrhein-Westfalen', 90951, 0),\n(3159, 'Velbert', 57, 'Nordrhein-Westfalen', 89881, 0),\n(3160, 'Esslingen am Neckar', 57, 'Baden-Württemberg', 89667, 0),\n(3161, 'Honiara', 191, 'Honiara', 50100, 1),\n(3162, 'Lusaka', 238, 'Lusaka', 1317000, 1),\n(3163, 'Ndola', 238, 'Copperbelt', 329200, 0),\n(3164, 'Kitwe', 238, 'Copperbelt', 288600, 0),\n(3165, 'Kabwe', 238, 'Central', 154300, 0),\n(3166, 'Chingola', 238, 'Copperbelt', 142400, 0),\n(3167, 'Mufulira', 238, 'Copperbelt', 123900, 0),\n(3168, 'Luanshya', 238, 'Copperbelt', 118100, 0),\n(3169, 'Apia', 234, 'Upolu', 35900, 1),\n(3170, 'Serravalle', 194, 'Serravalle/Dogano', 4802, 0),\n(3171, 'San Marino', 194, 'San Marino', 2294, 1),\n(3172, 'São Tomé', 197, 'Aqua Grande', 49541, 1),\n(3173, 'Riyadh', 184, 'Riyadh', 3324000, 1),\n(3174, 'Jedda', 184, 'Mekka', 2046300, 0),\n(3175, 'Mekka', 184, 'Mekka', 965700, 0),\n(3176, 'Medina', 184, 'Medina', 608300, 0),\n(3177, 'al-Dammam', 184, 'al-Sharqiya', 482300, 0),\n(3178, 'al-Taif', 184, 'Mekka', 416100, 0),\n(3179, 'Tabuk', 184, 'Tabuk', 292600, 0),\n(3180, 'Burayda', 184, 'al-Qasim', 248600, 0),\n(3181, 'al-Hufuf', 184, 'al-Sharqiya', 225800, 0),\n(3182, 'al-Mubarraz', 184, 'al-Sharqiya', 219100, 0),\n(3183, 'Khamis Mushayt', 184, 'Asir', 217900, 0),\n(3184, 'Hail', 184, 'Hail', 176800, 0),\n(3185, 'al-Kharj', 184, 'Riad', 152100, 0),\n(3186, 'al-Khubar', 184, 'al-Sharqiya', 141700, 0),\n(3187, 'Jubayl', 184, 'al-Sharqiya', 140800, 0),\n(3188, 'Hafar al-Batin', 184, 'al-Sharqiya', 137800, 0),\n(3189, 'al-Tuqba', 184, 'al-Sharqiya', 125700, 0),\n(3190, 'Yanbu', 184, 'Medina', 119800, 0),\n(3191, 'Abha', 184, 'Asir', 112300, 0),\n(3192, 'Ara´ar', 184, 'al-Khudud al-Samaliy', 108100, 0),\n(3193, 'al-Qatif', 184, 'al-Sharqiya', 98900, 0);\nINSERT INTO `cities` (`id`, `name`, `countryId`, `district`, `population`, `isCapital`) VALUES\n(3194, 'al-Hawiya', 184, 'Mekka', 93900, 0),\n(3195, 'Unayza', 184, 'Qasim', 91100, 0),\n(3196, 'Najran', 184, 'Najran', 91000, 0),\n(3197, 'Pikine', 186, 'Cap-Vert', 855287, 0),\n(3198, 'Dakar', 186, 'Cap-Vert', 785071, 1),\n(3199, 'Thiès', 186, 'Thiès', 248000, 0),\n(3200, 'Kaolack', 186, 'Kaolack', 199000, 0),\n(3201, 'Ziguinchor', 186, 'Ziguinchor', 192000, 0),\n(3202, 'Rufisque', 186, 'Cap-Vert', 150000, 0),\n(3203, 'Saint-Louis', 186, 'Saint-Louis', 132400, 0),\n(3204, 'Mbour', 186, 'Thiès', 109300, 0),\n(3205, 'Diourbel', 186, 'Diourbel', 99400, 0),\n(3206, 'Victoria', 203, 'Mahé', 41000, 1),\n(3207, 'Freetown', 192, 'Western', 850000, 1),\n(3208, 'Singapore', 187, '–', 4017733, 1),\n(3209, 'Bratislava', 199, 'Bratislava', 448292, 1),\n(3210, 'Košice', 199, 'Východné Slovensko', 241874, 0),\n(3211, 'Prešov', 199, 'Východné Slovensko', 93977, 0),\n(3212, 'Ljubljana', 200, 'Osrednjeslovenska', 270986, 1),\n(3213, 'Maribor', 200, 'Podravska', 115532, 0),\n(3214, 'Mogadishu', 195, 'Banaadir', 997000, 1),\n(3215, 'Hargeysa', 195, 'Woqooyi Galbeed', 90000, 0),\n(3216, 'Kismaayo', 195, 'Jubbada Hoose', 90000, 0),\n(3217, 'Colombo', 125, 'Western', 645000, 1),\n(3218, 'Dehiwala', 125, 'Western', 203000, 0),\n(3219, 'Moratuwa', 125, 'Western', 190000, 0),\n(3220, 'Jaffna', 125, 'Northern', 149000, 0),\n(3221, 'Kandy', 125, 'Central', 140000, 0),\n(3222, 'Sri Jayawardenepura Kotte', 125, 'Western', 118000, 0),\n(3223, 'Negombo', 125, 'Western', 100000, 0),\n(3224, 'Omdurman', 185, 'Khartum', 1271403, 0),\n(3225, 'Khartum', 185, 'Khartum', 947483, 1),\n(3226, 'Sharq al-Nil', 185, 'Khartum', 700887, 0),\n(3227, 'Port Sudan', 185, 'al-Bahr al-Ahmar', 308195, 0),\n(3228, 'Kassala', 185, 'Kassala', 234622, 0),\n(3229, 'Obeid', 185, 'Kurdufan al-Shamaliy', 229425, 0),\n(3230, 'Nyala', 185, 'Darfur al-Janubiya', 227183, 0),\n(3231, 'Wad Madani', 185, 'al-Jazira', 211362, 0),\n(3232, 'al-Qadarif', 185, 'al-Qadarif', 191164, 0),\n(3233, 'Kusti', 185, 'al-Bahr al-Abyad', 173599, 0),\n(3234, 'al-Fashir', 185, 'Darfur al-Shamaliya', 141884, 0),\n(3235, 'Juba', 185, 'Bahr al-Jabal', 114980, 0),\n(3236, 'Helsinki [Helsingfors]', 70, 'Newmaa', 555474, 1),\n(3237, 'Espoo', 70, 'Newmaa', 213271, 0),\n(3238, 'Tampere', 70, 'Pirkanmaa', 195468, 0),\n(3239, 'Vantaa', 70, 'Newmaa', 178471, 0),\n(3240, 'Turku [Åbo]', 70, 'Varsinais-Suomi', 172561, 0),\n(3241, 'Oulu', 70, 'Pohjois-Pohjanmaa', 120753, 0),\n(3242, 'Lahti', 70, 'Päijät-Häme', 96921, 0),\n(3243, 'Paramaribo', 198, 'Paramaribo', 112000, 1),\n(3244, 'Mbabane', 202, 'Hhohho', 61000, 1),\n(3245, 'Zürich', 40, 'Zürich', 336800, 0),\n(3246, 'Geneve', 40, 'Geneve', 173500, 0),\n(3247, 'Basel', 40, 'Basel-Stadt', 166700, 0),\n(3248, 'Bern', 40, 'Bern', 122700, 1),\n(3249, 'Lausanne', 40, 'Vaud', 114500, 0),\n(3250, 'Damascus', 204, 'Damascus', 1347000, 1),\n(3251, 'Aleppo', 204, 'Aleppo', 1261983, 0),\n(3252, 'Hims', 204, 'Hims', 507404, 0),\n(3253, 'Hama', 204, 'Hama', 343361, 0),\n(3254, 'Latakia', 204, 'Latakia', 264563, 0),\n(3255, 'al-Qamishliya', 204, 'al-Hasaka', 144286, 0),\n(3256, 'Dayr al-Zawr', 204, 'Dayr al-Zawr', 140459, 0),\n(3257, 'Jaramana', 204, 'Damaskos', 138469, 0),\n(3258, 'Duma', 204, 'Damaskos', 131158, 0),\n(3259, 'al-Raqqa', 204, 'al-Raqqa', 108020, 0),\n(3260, 'Idlib', 204, 'Idlib', 91081, 0),\n(3261, 'Dushanbe', 209, 'Karotegin', 524000, 1),\n(3262, 'Khujand', 209, 'Khujand', 161500, 0),\n(3263, 'Taipei', 218, 'Taipei', 2641312, 1),\n(3264, 'Kaohsiung', 218, 'Kaohsiung', 1475505, 0),\n(3265, 'Taichung', 218, 'Taichung', 940589, 0),\n(3266, 'Tainan', 218, 'Tainan', 728060, 0),\n(3267, 'Panchiao', 218, 'Taipei', 523850, 0),\n(3268, 'Chungho', 218, 'Taipei', 392176, 0),\n(3269, 'Keelung (Chilung)', 218, 'Keelung', 385201, 0),\n(3270, 'Sanchung', 218, 'Taipei', 380084, 0),\n(3271, 'Hsinchuang', 218, 'Taipei', 365048, 0),\n(3272, 'Hsinchu', 218, 'Hsinchu', 361958, 0),\n(3273, 'Chungli', 218, 'Taoyuan', 318649, 0),\n(3274, 'Fengshan', 218, 'Kaohsiung', 318562, 0),\n(3275, 'Taoyuan', 218, 'Taoyuan', 316438, 0),\n(3276, 'Chiayi', 218, 'Chiayi', 265109, 0),\n(3277, 'Hsintien', 218, 'Taipei', 263603, 0),\n(3278, 'Changhwa', 218, 'Changhwa', 227715, 0),\n(3279, 'Yungho', 218, 'Taipei', 227700, 0),\n(3280, 'Tucheng', 218, 'Taipei', 224897, 0),\n(3281, 'Pingtung', 218, 'Pingtung', 214727, 0),\n(3282, 'Yungkang', 218, 'Tainan', 193005, 0),\n(3283, 'Pingchen', 218, 'Taoyuan', 188344, 0),\n(3284, 'Tali', 218, 'Taichung', 171940, 0),\n(3285, 'Taiping', 218, '', 165524, 0),\n(3286, 'Pate', 218, 'Taoyuan', 161700, 0),\n(3287, 'Fengyuan', 218, 'Taichung', 161032, 0),\n(3288, 'Luchou', 218, 'Taipei', 160516, 0),\n(3289, 'Hsichuh', 218, 'Taipei', 154976, 0),\n(3290, 'Shulin', 218, 'Taipei', 151260, 0),\n(3291, 'Yuanlin', 218, 'Changhwa', 126402, 0),\n(3292, 'Yangmei', 218, 'Taoyuan', 126323, 0),\n(3293, 'Taliao', 218, '', 115897, 0),\n(3294, 'Kueishan', 218, '', 112195, 0),\n(3295, 'Tanshui', 218, 'Taipei', 111882, 0),\n(3296, 'Taitung', 218, 'Taitung', 111039, 0),\n(3297, 'Hualien', 218, 'Hualien', 108407, 0),\n(3298, 'Nantou', 218, 'Nantou', 104723, 0),\n(3299, 'Lungtan', 218, 'Taipei', 103088, 0),\n(3300, 'Touliu', 218, 'Yünlin', 98900, 0),\n(3301, 'Tsaotun', 218, 'Nantou', 96800, 0),\n(3302, 'Kangshan', 218, 'Kaohsiung', 92200, 0),\n(3303, 'Ilan', 218, 'Ilan', 92000, 0),\n(3304, 'Miaoli', 218, 'Miaoli', 90000, 0),\n(3305, 'Dar es Salaam', 219, 'Dar es Salaam', 1747000, 0),\n(3306, 'Dodoma', 219, 'Dodoma', 189000, 1),\n(3307, 'Mwanza', 219, 'Mwanza', 172300, 0),\n(3308, 'Zanzibar', 219, 'Zanzibar West', 157634, 0),\n(3309, 'Tanga', 219, 'Tanga', 137400, 0),\n(3310, 'Mbeya', 219, 'Mbeya', 130800, 0),\n(3311, 'Morogoro', 219, 'Morogoro', 117800, 0),\n(3312, 'Arusha', 219, 'Arusha', 102500, 0),\n(3313, 'Moshi', 219, 'Kilimanjaro', 96800, 0),\n(3314, 'Tabora', 219, 'Tabora', 92800, 0),\n(3315, 'København', 60, 'København', 495699, 1),\n(3316, 'Århus', 60, 'Århus', 284846, 0),\n(3317, 'Odense', 60, 'Fyn', 183912, 0),\n(3318, 'Aalborg', 60, 'Nordjylland', 161161, 0),\n(3319, 'Frederiksberg', 60, 'Frederiksberg', 90327, 0),\n(3320, 'Bangkok', 208, 'Bangkok', 6320174, 1),\n(3321, 'Nonthaburi', 208, 'Nonthaburi', 292100, 0),\n(3322, 'Nakhon Ratchasima', 208, 'Nakhon Ratchasima', 181400, 0),\n(3323, 'Chiang Mai', 208, 'Chiang Mai', 171100, 0),\n(3324, 'Udon Thani', 208, 'Udon Thani', 158100, 0),\n(3325, 'Hat Yai', 208, 'Songkhla', 148632, 0),\n(3326, 'Khon Kaen', 208, 'Khon Kaen', 126500, 0),\n(3327, 'Pak Kret', 208, 'Nonthaburi', 126055, 0),\n(3328, 'Nakhon Sawan', 208, 'Nakhon Sawan', 123800, 0),\n(3329, 'Ubon Ratchathani', 208, 'Ubon Ratchathani', 116300, 0),\n(3330, 'Songkhla', 208, 'Songkhla', 94900, 0),\n(3331, 'Nakhon Pathom', 208, 'Nakhon Pathom', 94100, 0),\n(3332, 'Lomé', 207, 'Maritime', 375000, 1),\n(3333, 'Fakaofo', 210, 'Fakaofo', 300, 1),\n(3334, 'Nuku´alofa', 213, 'Tongatapu', 22400, 1),\n(3335, 'Chaguanas', 214, 'Caroni', 56601, 0),\n(3336, 'Port-of-Spain', 214, 'Port-of-Spain', 43396, 1),\n(3337, 'N´Djaména', 206, 'Chari-Baguirmi', 530965, 1),\n(3338, 'Moundou', 206, 'Logone Occidental', 99500, 0),\n(3339, 'Praha', 56, 'Hlavní mesto Praha', 1181126, 1),\n(3340, 'Brno', 56, 'Jizní Morava', 381862, 0),\n(3341, 'Ostrava', 56, 'Severní Morava', 320041, 0),\n(3342, 'Plzen', 56, 'Zapadní Cechy', 166759, 0),\n(3343, 'Olomouc', 56, 'Severní Morava', 102702, 0),\n(3344, 'Liberec', 56, 'Severní Cechy', 99155, 0),\n(3345, 'Ceské Budejovice', 56, 'Jizní Cechy', 98186, 0),\n(3346, 'Hradec Králové', 56, 'Východní Cechy', 98080, 0),\n(3347, 'Ústí nad Labem', 56, 'Severní Cechy', 95491, 0),\n(3348, 'Pardubice', 56, 'Východní Cechy', 91309, 0),\n(3349, 'Tunis', 215, 'Tunis', 690600, 1),\n(3350, 'Sfax', 215, 'Sfax', 257800, 0),\n(3351, 'Ariana', 215, 'Ariana', 197000, 0),\n(3352, 'Ettadhamen', 215, 'Ariana', 178600, 0),\n(3353, 'Sousse', 215, 'Sousse', 145900, 0),\n(3354, 'Kairouan', 215, 'Kairouan', 113100, 0),\n(3355, 'Biserta', 215, 'Biserta', 108900, 0),\n(3356, 'Gabès', 215, 'Gabès', 106600, 0),\n(3357, 'Istanbul', 216, 'Istanbul', 8787958, 0),\n(3358, 'Ankara', 216, 'Ankara', 3038159, 1),\n(3359, 'Izmir', 216, 'Izmir', 2130359, 0),\n(3360, 'Adana', 216, 'Adana', 1131198, 0),\n(3361, 'Bursa', 216, 'Bursa', 1095842, 0),\n(3362, 'Gaziantep', 216, 'Gaziantep', 789056, 0),\n(3363, 'Konya', 216, 'Konya', 628364, 0),\n(3364, 'Mersin (Içel)', 216, 'Içel', 587212, 0),\n(3365, 'Antalya', 216, 'Antalya', 564914, 0),\n(3366, 'Diyarbakir', 216, 'Diyarbakir', 479884, 0),\n(3367, 'Kayseri', 216, 'Kayseri', 475657, 0),\n(3368, 'Eskisehir', 216, 'Eskisehir', 470781, 0),\n(3369, 'Sanliurfa', 216, 'Sanliurfa', 405905, 0),\n(3370, 'Samsun', 216, 'Samsun', 339871, 0),\n(3371, 'Malatya', 216, 'Malatya', 330312, 0),\n(3372, 'Gebze', 216, 'Kocaeli', 264170, 0),\n(3373, 'Denizli', 216, 'Denizli', 253848, 0),\n(3374, 'Sivas', 216, 'Sivas', 246642, 0),\n(3375, 'Erzurum', 216, 'Erzurum', 246535, 0),\n(3376, 'Tarsus', 216, 'Adana', 246206, 0),\n(3377, 'Kahramanmaras', 216, 'Kahramanmaras', 245772, 0),\n(3378, 'Elâzig', 216, 'Elâzig', 228815, 0),\n(3379, 'Van', 216, 'Van', 219319, 0),\n(3380, 'Sultanbeyli', 216, 'Istanbul', 211068, 0),\n(3381, 'Izmit (Kocaeli)', 216, 'Kocaeli', 210068, 0),\n(3382, 'Manisa', 216, 'Manisa', 207148, 0),\n(3383, 'Batman', 216, 'Batman', 203793, 0),\n(3384, 'Balikesir', 216, 'Balikesir', 196382, 0),\n(3385, 'Sakarya (Adapazari)', 216, 'Sakarya', 190641, 0),\n(3386, 'Iskenderun', 216, 'Hatay', 153022, 0),\n(3387, 'Osmaniye', 216, 'Osmaniye', 146003, 0),\n(3388, 'Çorum', 216, 'Çorum', 145495, 0),\n(3389, 'Kütahya', 216, 'Kütahya', 144761, 0),\n(3390, 'Hatay (Antakya)', 216, 'Hatay', 143982, 0),\n(3391, 'Kirikkale', 216, 'Kirikkale', 142044, 0),\n(3392, 'Adiyaman', 216, 'Adiyaman', 141529, 0),\n(3393, 'Trabzon', 216, 'Trabzon', 138234, 0),\n(3394, 'Ordu', 216, 'Ordu', 133642, 0),\n(3395, 'Aydin', 216, 'Aydin', 128651, 0),\n(3396, 'Usak', 216, 'Usak', 128162, 0),\n(3397, 'Edirne', 216, 'Edirne', 123383, 0),\n(3398, 'Çorlu', 216, 'Tekirdag', 123300, 0),\n(3399, 'Isparta', 216, 'Isparta', 121911, 0),\n(3400, 'Karabük', 216, 'Karabük', 118285, 0),\n(3401, 'Kilis', 216, 'Kilis', 118245, 0),\n(3402, 'Alanya', 216, 'Antalya', 117300, 0),\n(3403, 'Kiziltepe', 216, 'Mardin', 112000, 0),\n(3404, 'Zonguldak', 216, 'Zonguldak', 111542, 0),\n(3405, 'Siirt', 216, 'Siirt', 107100, 0),\n(3406, 'Viransehir', 216, 'Sanliurfa', 106400, 0),\n(3407, 'Tekirdag', 216, 'Tekirdag', 106077, 0),\n(3408, 'Karaman', 216, 'Karaman', 104200, 0),\n(3409, 'Afyon', 216, 'Afyon', 103984, 0),\n(3410, 'Aksaray', 216, 'Aksaray', 102681, 0),\n(3411, 'Ceyhan', 216, 'Adana', 102412, 0),\n(3412, 'Erzincan', 216, 'Erzincan', 102304, 0),\n(3413, 'Bismil', 216, 'Diyarbakir', 101400, 0),\n(3414, 'Nazilli', 216, 'Aydin', 99900, 0),\n(3415, 'Tokat', 216, 'Tokat', 99500, 0),\n(3416, 'Kars', 216, 'Kars', 93000, 0),\n(3417, 'Inegöl', 216, 'Bursa', 90500, 0),\n(3418, 'Bandirma', 216, 'Balikesir', 90200, 0),\n(3419, 'Ashgabat', 211, 'Ahal', 540600, 1),\n(3420, 'Chärjew', 211, 'Lebap', 189200, 0),\n(3421, 'Dashhowuz', 211, 'Dashhowuz', 141800, 0),\n(3422, 'Mary', 211, 'Mary', 101000, 0),\n(3423, 'Cockburn Town', 205, 'Grand Turk', 4800, 1),\n(3424, 'Funafuti', 217, 'Funafuti', 4600, 1),\n(3425, 'Kampala', 220, 'Central', 890800, 1),\n(3426, 'Kyiv', 221, 'Kiova', 2624000, 1),\n(3427, 'Harkova [Harkiv]', 221, 'Harkova', 1500000, 0),\n(3428, 'Dnipropetrovsk', 221, 'Dnipropetrovsk', 1103000, 0),\n(3429, 'Donetsk', 221, 'Donetsk', 1050000, 0),\n(3430, 'Odesa', 221, 'Odesa', 1011000, 0),\n(3431, 'Zaporizzja', 221, 'Zaporizzja', 848000, 0),\n(3432, 'Lviv', 221, 'Lviv', 788000, 0),\n(3433, 'Kryvyi Rig', 221, 'Dnipropetrovsk', 703000, 0),\n(3434, 'Mykolajiv', 221, 'Mykolajiv', 508000, 0),\n(3435, 'Mariupol', 221, 'Donetsk', 490000, 0),\n(3436, 'Lugansk', 221, 'Lugansk', 469000, 0),\n(3437, 'Vinnytsja', 221, 'Vinnytsja', 391000, 0),\n(3438, 'Makijivka', 221, 'Donetsk', 384000, 0),\n(3439, 'Herson', 221, 'Herson', 353000, 0),\n(3440, 'Sevastopol', 221, 'Krim', 348000, 0),\n(3441, 'Simferopol', 221, 'Krim', 339000, 0),\n(3442, 'Pultava [Poltava]', 221, 'Pultava', 313000, 0),\n(3443, 'Tšernigiv', 221, 'Tšernigiv', 313000, 0),\n(3444, 'Tšerkasy', 221, 'Tšerkasy', 309000, 0),\n(3445, 'Gorlivka', 221, 'Donetsk', 299000, 0),\n(3446, 'Zytomyr', 221, 'Zytomyr', 297000, 0),\n(3447, 'Sumy', 221, 'Sumy', 294000, 0),\n(3448, 'Dniprodzerzynsk', 221, 'Dnipropetrovsk', 270000, 0),\n(3449, 'Kirovograd', 221, 'Kirovograd', 265000, 0),\n(3450, 'Hmelnytskyi', 221, 'Hmelnytskyi', 262000, 0),\n(3451, 'Tšernivtsi', 221, 'Tšernivtsi', 259000, 0),\n(3452, 'Rivne', 221, 'Rivne', 245000, 0),\n(3453, 'Krementšuk', 221, 'Pultava', 239000, 0),\n(3454, 'Ivano-Frankivsk', 221, 'Ivano-Frankivsk', 237000, 0),\n(3455, 'Ternopil', 221, 'Ternopil', 236000, 0),\n(3456, 'Lutsk', 221, 'Volynia', 217000, 0),\n(3457, 'Bila Tserkva', 221, 'Kiova', 215000, 0),\n(3458, 'Kramatorsk', 221, 'Donetsk', 186000, 0),\n(3459, 'Melitopol', 221, 'Zaporizzja', 169000, 0),\n(3460, 'Kertš', 221, 'Krim', 162000, 0),\n(3461, 'Nikopol', 221, 'Dnipropetrovsk', 149000, 0),\n(3462, 'Berdjansk', 221, 'Zaporizzja', 130000, 0),\n(3463, 'Pavlograd', 221, 'Dnipropetrovsk', 127000, 0),\n(3464, 'Sjeverodonetsk', 221, 'Lugansk', 127000, 0),\n(3465, 'Slovjansk', 221, 'Donetsk', 127000, 0),\n(3466, 'Uzgorod', 221, 'Taka-Karpatia', 127000, 0),\n(3467, 'Altševsk', 221, 'Lugansk', 119000, 0),\n(3468, 'Lysytšansk', 221, 'Lugansk', 116000, 0),\n(3469, 'Jevpatorija', 221, 'Krim', 112000, 0),\n(3470, 'Kamjanets-Podilskyi', 221, 'Hmelnytskyi', 109000, 0),\n(3471, 'Jenakijeve', 221, 'Donetsk', 105000, 0),\n(3472, 'Krasnyi Lutš', 221, 'Lugansk', 101000, 0),\n(3473, 'Stahanov', 221, 'Lugansk', 101000, 0),\n(3474, 'Oleksandrija', 221, 'Kirovograd', 99000, 0),\n(3475, 'Konotop', 221, 'Sumy', 96000, 0),\n(3476, 'Kostjantynivka', 221, 'Donetsk', 95000, 0),\n(3477, 'Berdytšiv', 221, 'Zytomyr', 90000, 0),\n(3478, 'Izmajil', 221, 'Odesa', 90000, 0),\n(3479, 'Šostka', 221, 'Sumy', 90000, 0),\n(3480, 'Uman', 221, 'Tšerkasy', 90000, 0),\n(3481, 'Brovary', 221, 'Kiova', 89000, 0),\n(3482, 'Mukatševe', 221, 'Taka-Karpatia', 89000, 0),\n(3483, 'Budapest', 98, 'Budapest', 1811552, 1),\n(3484, 'Debrecen', 98, 'Hajdú-Bihar', 203648, 0),\n(3485, 'Miskolc', 98, 'Borsod-Abaúj-Zemplén', 172357, 0),\n(3486, 'Szeged', 98, 'Csongrád', 158158, 0),\n(3487, 'Pécs', 98, 'Baranya', 157332, 0),\n(3488, 'Györ', 98, 'Györ-Moson-Sopron', 127119, 0),\n(3489, 'Nyiregyháza', 98, 'Szabolcs-Szatmár-Ber', 112419, 0),\n(3490, 'Kecskemét', 98, 'Bács-Kiskun', 105606, 0),\n(3491, 'Székesfehérvár', 98, 'Fejér', 105119, 0),\n(3492, 'Montevideo', 223, 'Montevideo', 1236000, 1),\n(3493, 'Nouméa', 153, '–', 76293, 1),\n(3494, 'Auckland', 163, 'Auckland', 381800, 0),\n(3495, 'Christchurch', 163, 'Canterbury', 324200, 0),\n(3496, 'Manukau', 163, 'Auckland', 281800, 0),\n(3497, 'North Shore', 163, 'Auckland', 187700, 0),\n(3498, 'Waitakere', 163, 'Auckland', 170600, 0),\n(3499, 'Wellington', 163, 'Wellington', 166700, 1),\n(3500, 'Dunedin', 163, 'Dunedin', 119600, 0),\n(3501, 'Hamilton', 163, 'Hamilton', 117100, 0),\n(3502, 'Lower Hutt', 163, 'Wellington', 98100, 0),\n(3503, 'Toskent', 225, 'Toskent Shahri', 2117500, 1),\n(3504, 'Namangan', 225, 'Namangan', 370500, 0),\n(3505, 'Samarkand', 225, 'Samarkand', 361800, 0),\n(3506, 'Andijon', 225, 'Andijon', 318600, 0),\n(3507, 'Buhoro', 225, 'Buhoro', 237100, 0),\n(3508, 'Karsi', 225, 'Qashqadaryo', 194100, 0),\n(3509, 'Nukus', 225, 'Karakalpakistan', 194100, 0),\n(3510, 'Kükon', 225, 'Fargona', 190100, 0),\n(3511, 'Fargona', 225, 'Fargona', 180500, 0),\n(3512, 'Circik', 225, 'Toskent', 146400, 0),\n(3513, 'Margilon', 225, 'Fargona', 140800, 0),\n(3514, 'Ürgenc', 225, 'Khorazm', 138900, 0),\n(3515, 'Angren', 225, 'Toskent', 128000, 0),\n(3516, 'Cizah', 225, 'Cizah', 124800, 0),\n(3517, 'Navoi', 225, 'Navoi', 116300, 0),\n(3518, 'Olmalik', 225, 'Toskent', 114900, 0),\n(3519, 'Termiz', 225, 'Surkhondaryo', 109500, 0),\n(3520, 'Minsk', 27, 'Horad Minsk', 1674000, 1),\n(3521, 'Gomel', 27, 'Gomel', 475000, 0),\n(3522, 'Mogiljov', 27, 'Mogiljov', 356000, 0),\n(3523, 'Vitebsk', 27, 'Vitebsk', 340000, 0),\n(3524, 'Grodno', 27, 'Grodno', 302000, 0),\n(3525, 'Brest', 27, 'Brest', 286000, 0),\n(3526, 'Bobruisk', 27, 'Mogiljov', 221000, 0),\n(3527, 'Baranovitši', 27, 'Brest', 167000, 0),\n(3528, 'Borisov', 27, 'Minsk', 151000, 0),\n(3529, 'Pinsk', 27, 'Brest', 130000, 0),\n(3530, 'Orša', 27, 'Vitebsk', 124000, 0),\n(3531, 'Mozyr', 27, 'Gomel', 110000, 0),\n(3532, 'Novopolotsk', 27, 'Vitebsk', 106000, 0),\n(3533, 'Lida', 27, 'Grodno', 101000, 0),\n(3534, 'Soligorsk', 27, 'Minsk', 101000, 0),\n(3535, 'Molodetšno', 27, 'Minsk', 97000, 0),\n(3536, 'Mata-Utu', 233, 'Wallis', 1137, 1),\n(3537, 'Port-Vila', 232, 'Shefa', 33700, 1),\n(3538, 'Città del Vaticano', 226, '–', 455, 1),\n(3539, 'Caracas', 228, 'Distrito Federal', 1975294, 1),\n(3540, 'Maracaíbo', 228, 'Zulia', 1304776, 0),\n(3541, 'Barquisimeto', 228, 'Lara', 877239, 0),\n(3542, 'Valencia', 228, 'Carabobo', 794246, 0),\n(3543, 'Ciudad Guayana', 228, 'Bolívar', 663713, 0),\n(3544, 'Petare', 228, 'Miranda', 488868, 0),\n(3545, 'Maracay', 228, 'Aragua', 444443, 0),\n(3546, 'Barcelona', 228, 'Anzoátegui', 322267, 0),\n(3547, 'Maturín', 228, 'Monagas', 319726, 0),\n(3548, 'San Cristóbal', 228, 'Táchira', 319373, 0),\n(3549, 'Ciudad Bolívar', 228, 'Bolívar', 301107, 0),\n(3550, 'Cumaná', 228, 'Sucre', 293105, 0),\n(3551, 'Mérida', 228, 'Mérida', 224887, 0),\n(3552, 'Cabimas', 228, 'Zulia', 221329, 0),\n(3553, 'Barinas', 228, 'Barinas', 217831, 0),\n(3554, 'Turmero', 228, 'Aragua', 217499, 0),\n(3555, 'Baruta', 228, 'Miranda', 207290, 0),\n(3556, 'Puerto Cabello', 228, 'Carabobo', 187722, 0),\n(3557, 'Santa Ana de Coro', 228, 'Falcón', 185766, 0),\n(3558, 'Los Teques', 228, 'Miranda', 178784, 0),\n(3559, 'Punto Fijo', 228, 'Falcón', 167215, 0),\n(3560, 'Guarenas', 228, 'Miranda', 165889, 0),\n(3561, 'Acarigua', 228, 'Portuguesa', 158954, 0),\n(3562, 'Puerto La Cruz', 228, 'Anzoátegui', 155700, 0),\n(3563, 'Ciudad Losada', 228, '', 134501, 0),\n(3564, 'Guacara', 228, 'Carabobo', 131334, 0),\n(3565, 'Valera', 228, 'Trujillo', 130281, 0),\n(3566, 'Guanare', 228, 'Portuguesa', 125621, 0),\n(3567, 'Carúpano', 228, 'Sucre', 119639, 0),\n(3568, 'Catia La Mar', 228, 'Distrito Federal', 117012, 0),\n(3569, 'El Tigre', 228, 'Anzoátegui', 116256, 0),\n(3570, 'Guatire', 228, 'Miranda', 109121, 0),\n(3571, 'Calabozo', 228, 'Guárico', 107146, 0),\n(3572, 'Pozuelos', 228, 'Anzoátegui', 105690, 0),\n(3573, 'Ciudad Ojeda', 228, 'Zulia', 99354, 0),\n(3574, 'Ocumare del Tuy', 228, 'Miranda', 97168, 0),\n(3575, 'Valle de la Pascua', 228, 'Guárico', 95927, 0),\n(3576, 'Araure', 228, 'Portuguesa', 94269, 0),\n(3577, 'San Fernando de Apure', 228, 'Apure', 93809, 0),\n(3578, 'San Felipe', 228, 'Yaracuy', 90940, 0),\n(3579, 'El Limón', 228, 'Aragua', 90000, 0),\n(3580, 'Moscow', 182, 'Moscow (City)', 8389200, 1),\n(3581, 'St Petersburg', 182, 'Pietari', 4694000, 0),\n(3582, 'Novosibirsk', 182, 'Novosibirsk', 1398800, 0),\n(3583, 'Nizni Novgorod', 182, 'Nizni Novgorod', 1357000, 0),\n(3584, 'Jekaterinburg', 182, 'Sverdlovsk', 1266300, 0),\n(3585, 'Samara', 182, 'Samara', 1156100, 0),\n(3586, 'Omsk', 182, 'Omsk', 1148900, 0),\n(3587, 'Kazan', 182, 'Tatarstan', 1101000, 0),\n(3588, 'Ufa', 182, 'Baškortostan', 1091200, 0),\n(3589, 'Tšeljabinsk', 182, 'Tšeljabinsk', 1083200, 0),\n(3590, 'Rostov-na-Donu', 182, 'Rostov-na-Donu', 1012700, 0),\n(3591, 'Perm', 182, 'Perm', 1009700, 0),\n(3592, 'Volgograd', 182, 'Volgograd', 993400, 0),\n(3593, 'Voronez', 182, 'Voronez', 907700, 0),\n(3594, 'Krasnojarsk', 182, 'Krasnojarsk', 875500, 0),\n(3595, 'Saratov', 182, 'Saratov', 874000, 0),\n(3596, 'Toljatti', 182, 'Samara', 722900, 0),\n(3597, 'Uljanovsk', 182, 'Uljanovsk', 667400, 0),\n(3598, 'Izevsk', 182, 'Udmurtia', 652800, 0),\n(3599, 'Krasnodar', 182, 'Krasnodar', 639000, 0),\n(3600, 'Jaroslavl', 182, 'Jaroslavl', 616700, 0),\n(3601, 'Habarovsk', 182, 'Habarovsk', 609400, 0),\n(3602, 'Vladivostok', 182, 'Primorje', 606200, 0),\n(3603, 'Irkutsk', 182, 'Irkutsk', 593700, 0),\n(3604, 'Barnaul', 182, 'Altai', 580100, 0),\n(3605, 'Novokuznetsk', 182, 'Kemerovo', 561600, 0),\n(3606, 'Penza', 182, 'Penza', 532200, 0),\n(3607, 'Rjazan', 182, 'Rjazan', 529900, 0),\n(3608, 'Orenburg', 182, 'Orenburg', 523600, 0),\n(3609, 'Lipetsk', 182, 'Lipetsk', 521000, 0),\n(3610, 'Nabereznyje Tšelny', 182, 'Tatarstan', 514700, 0),\n(3611, 'Tula', 182, 'Tula', 506100, 0),\n(3612, 'Tjumen', 182, 'Tjumen', 503400, 0),\n(3613, 'Kemerovo', 182, 'Kemerovo', 492700, 0),\n(3614, 'Astrahan', 182, 'Astrahan', 486100, 0),\n(3615, 'Tomsk', 182, 'Tomsk', 482100, 0),\n(3616, 'Kirov', 182, 'Kirov', 466200, 0),\n(3617, 'Ivanovo', 182, 'Ivanovo', 459200, 0),\n(3618, 'Tšeboksary', 182, 'Tšuvassia', 459200, 0),\n(3619, 'Brjansk', 182, 'Brjansk', 457400, 0),\n(3620, 'Tver', 182, 'Tver', 454900, 0),\n(3621, 'Kursk', 182, 'Kursk', 443500, 0),\n(3622, 'Magnitogorsk', 182, 'Tšeljabinsk', 427900, 0),\n(3623, 'Kaliningrad', 182, 'Kaliningrad', 424400, 0),\n(3624, 'Nizni Tagil', 182, 'Sverdlovsk', 390900, 0),\n(3625, 'Murmansk', 182, 'Murmansk', 376300, 0),\n(3626, 'Ulan-Ude', 182, 'Burjatia', 370400, 0),\n(3627, 'Kurgan', 182, 'Kurgan', 364700, 0),\n(3628, 'Arkangeli', 182, 'Arkangeli', 361800, 0),\n(3629, 'Sotši', 182, 'Krasnodar', 358600, 0),\n(3630, 'Smolensk', 182, 'Smolensk', 353400, 0),\n(3631, 'Orjol', 182, 'Orjol', 344500, 0),\n(3632, 'Stavropol', 182, 'Stavropol', 343300, 0),\n(3633, 'Belgorod', 182, 'Belgorod', 342000, 0),\n(3634, 'Kaluga', 182, 'Kaluga', 339300, 0),\n(3635, 'Vladimir', 182, 'Vladimir', 337100, 0),\n(3636, 'Mahatškala', 182, 'Dagestan', 332800, 0),\n(3637, 'Tšerepovets', 182, 'Vologda', 324400, 0),\n(3638, 'Saransk', 182, 'Mordva', 314800, 0),\n(3639, 'Tambov', 182, 'Tambov', 312000, 0),\n(3640, 'Vladikavkaz', 182, 'North Ossetia-Alania', 310100, 0),\n(3641, 'Tšita', 182, 'Tšita', 309900, 0),\n(3642, 'Vologda', 182, 'Vologda', 302500, 0),\n(3643, 'Veliki Novgorod', 182, 'Novgorod', 299500, 0),\n(3644, 'Komsomolsk-na-Amure', 182, 'Habarovsk', 291600, 0),\n(3645, 'Kostroma', 182, 'Kostroma', 288100, 0),\n(3646, 'Volzski', 182, 'Volgograd', 286900, 0),\n(3647, 'Taganrog', 182, 'Rostov-na-Donu', 284400, 0),\n(3648, 'Petroskoi', 182, 'Karjala', 282100, 0),\n(3649, 'Bratsk', 182, 'Irkutsk', 277600, 0),\n(3650, 'Dzerzinsk', 182, 'Nizni Novgorod', 277100, 0),\n(3651, 'Surgut', 182, 'Hanti-Mansia', 274900, 0),\n(3652, 'Orsk', 182, 'Orenburg', 273900, 0),\n(3653, 'Sterlitamak', 182, 'Baškortostan', 265200, 0),\n(3654, 'Angarsk', 182, 'Irkutsk', 264700, 0),\n(3655, 'Joškar-Ola', 182, 'Marinmaa', 249200, 0),\n(3656, 'Rybinsk', 182, 'Jaroslavl', 239600, 0),\n(3657, 'Prokopjevsk', 182, 'Kemerovo', 237300, 0),\n(3658, 'Niznevartovsk', 182, 'Hanti-Mansia', 233900, 0),\n(3659, 'Naltšik', 182, 'Kabardi-Balkaria', 233400, 0),\n(3660, 'Syktyvkar', 182, 'Komi', 229700, 0),\n(3661, 'Severodvinsk', 182, 'Arkangeli', 229300, 0),\n(3662, 'Bijsk', 182, 'Altai', 225000, 0),\n(3663, 'Niznekamsk', 182, 'Tatarstan', 223400, 0),\n(3664, 'Blagoveštšensk', 182, 'Amur', 222000, 0),\n(3665, 'Šahty', 182, 'Rostov-na-Donu', 221800, 0),\n(3666, 'Staryi Oskol', 182, 'Belgorod', 213800, 0),\n(3667, 'Zelenograd', 182, 'Moscow (City)', 207100, 0),\n(3668, 'Balakovo', 182, 'Saratov', 206000, 0),\n(3669, 'Novorossijsk', 182, 'Krasnodar', 203300, 0),\n(3670, 'Pihkova', 182, 'Pihkova', 201500, 0),\n(3671, 'Zlatoust', 182, 'Tšeljabinsk', 196900, 0),\n(3672, 'Jakutsk', 182, 'Saha (Jakutia)', 195400, 0),\n(3673, 'Podolsk', 182, 'Moskova', 194300, 0),\n(3674, 'Petropavlovsk-Kamtšatski', 182, 'Kamtšatka', 194100, 0),\n(3675, 'Kamensk-Uralski', 182, 'Sverdlovsk', 190600, 0),\n(3676, 'Engels', 182, 'Saratov', 189000, 0),\n(3677, 'Syzran', 182, 'Samara', 186900, 0),\n(3678, 'Grozny', 182, 'Tšetšenia', 186000, 0),\n(3679, 'Novotšerkassk', 182, 'Rostov-na-Donu', 184400, 0),\n(3680, 'Berezniki', 182, 'Perm', 181900, 0),\n(3681, 'Juzno-Sahalinsk', 182, 'Sahalin', 179200, 0),\n(3682, 'Volgodonsk', 182, 'Rostov-na-Donu', 178200, 0),\n(3683, 'Abakan', 182, 'Hakassia', 169200, 0),\n(3684, 'Maikop', 182, 'Adygea', 167300, 0),\n(3685, 'Miass', 182, 'Tšeljabinsk', 166200, 0),\n(3686, 'Armavir', 182, 'Krasnodar', 164900, 0),\n(3687, 'Ljubertsy', 182, 'Moskova', 163900, 0),\n(3688, 'Rubtsovsk', 182, 'Altai', 162600, 0),\n(3689, 'Kovrov', 182, 'Vladimir', 159900, 0),\n(3690, 'Nahodka', 182, 'Primorje', 157700, 0),\n(3691, 'Ussurijsk', 182, 'Primorje', 157300, 0),\n(3692, 'Salavat', 182, 'Baškortostan', 156800, 0),\n(3693, 'Mytištši', 182, 'Moskova', 155700, 0),\n(3694, 'Kolomna', 182, 'Moskova', 150700, 0),\n(3695, 'Elektrostal', 182, 'Moskova', 147000, 0),\n(3696, 'Murom', 182, 'Vladimir', 142400, 0),\n(3697, 'Kolpino', 182, 'Pietari', 141200, 0),\n(3698, 'Norilsk', 182, 'Krasnojarsk', 140800, 0),\n(3699, 'Almetjevsk', 182, 'Tatarstan', 140700, 0),\n(3700, 'Novomoskovsk', 182, 'Tula', 138100, 0),\n(3701, 'Dimitrovgrad', 182, 'Uljanovsk', 137000, 0),\n(3702, 'Pervouralsk', 182, 'Sverdlovsk', 136100, 0),\n(3703, 'Himki', 182, 'Moskova', 133700, 0),\n(3704, 'Balašiha', 182, 'Moskova', 132900, 0),\n(3705, 'Nevinnomyssk', 182, 'Stavropol', 132600, 0),\n(3706, 'Pjatigorsk', 182, 'Stavropol', 132500, 0),\n(3707, 'Korolev', 182, 'Moskova', 132400, 0),\n(3708, 'Serpuhov', 182, 'Moskova', 132000, 0),\n(3709, 'Odintsovo', 182, 'Moskova', 127400, 0),\n(3710, 'Orehovo-Zujevo', 182, 'Moskova', 124900, 0),\n(3711, 'Kamyšin', 182, 'Volgograd', 124600, 0),\n(3712, 'Novotšeboksarsk', 182, 'Tšuvassia', 123400, 0),\n(3713, 'Tšerkessk', 182, 'Karatšai-Tšerkessia', 121700, 0),\n(3714, 'Atšinsk', 182, 'Krasnojarsk', 121600, 0),\n(3715, 'Magadan', 182, 'Magadan', 121000, 0),\n(3716, 'Mitšurinsk', 182, 'Tambov', 120700, 0),\n(3717, 'Kislovodsk', 182, 'Stavropol', 120400, 0),\n(3718, 'Jelets', 182, 'Lipetsk', 119400, 0),\n(3719, 'Seversk', 182, 'Tomsk', 118600, 0),\n(3720, 'Noginsk', 182, 'Moskova', 117200, 0),\n(3721, 'Velikije Luki', 182, 'Pihkova', 116300, 0),\n(3722, 'Novokuibyševsk', 182, 'Samara', 116200, 0),\n(3723, 'Neftekamsk', 182, 'Baškortostan', 115700, 0),\n(3724, 'Leninsk-Kuznetski', 182, 'Kemerovo', 113800, 0),\n(3725, 'Oktjabrski', 182, 'Baškortostan', 111500, 0),\n(3726, 'Sergijev Posad', 182, 'Moskova', 111100, 0),\n(3727, 'Arzamas', 182, 'Nizni Novgorod', 110700, 0),\n(3728, 'Kiseljovsk', 182, 'Kemerovo', 110000, 0),\n(3729, 'Novotroitsk', 182, 'Orenburg', 109600, 0),\n(3730, 'Obninsk', 182, 'Kaluga', 108300, 0),\n(3731, 'Kansk', 182, 'Krasnojarsk', 107400, 0),\n(3732, 'Glazov', 182, 'Udmurtia', 106300, 0),\n(3733, 'Solikamsk', 182, 'Perm', 106000, 0),\n(3734, 'Sarapul', 182, 'Udmurtia', 105700, 0),\n(3735, 'Ust-Ilimsk', 182, 'Irkutsk', 105200, 0),\n(3736, 'Štšolkovo', 182, 'Moskova', 104900, 0),\n(3737, 'Mezduretšensk', 182, 'Kemerovo', 104400, 0),\n(3738, 'Usolje-Sibirskoje', 182, 'Irkutsk', 103500, 0),\n(3739, 'Elista', 182, 'Kalmykia', 103300, 0),\n(3740, 'Novošahtinsk', 182, 'Rostov-na-Donu', 101900, 0),\n(3741, 'Votkinsk', 182, 'Udmurtia', 101700, 0),\n(3742, 'Kyzyl', 182, 'Tyva', 101100, 0),\n(3743, 'Serov', 182, 'Sverdlovsk', 100400, 0),\n(3744, 'Zelenodolsk', 182, 'Tatarstan', 100200, 0),\n(3745, 'Zeleznodoroznyi', 182, 'Moskova', 100100, 0),\n(3746, 'Kinešma', 182, 'Ivanovo', 100000, 0),\n(3747, 'Kuznetsk', 182, 'Penza', 98200, 0),\n(3748, 'Uhta', 182, 'Komi', 98000, 0),\n(3749, 'Jessentuki', 182, 'Stavropol', 97900, 0),\n(3750, 'Tobolsk', 182, 'Tjumen', 97600, 0),\n(3751, 'Neftejugansk', 182, 'Hanti-Mansia', 97400, 0),\n(3752, 'Bataisk', 182, 'Rostov-na-Donu', 97300, 0),\n(3753, 'Nojabrsk', 182, 'Yamalin Nenetsia', 97300, 0),\n(3754, 'Balašov', 182, 'Saratov', 97100, 0),\n(3755, 'Zeleznogorsk', 182, 'Kursk', 96900, 0),\n(3756, 'Zukovski', 182, 'Moskova', 96500, 0),\n(3757, 'Anzero-Sudzensk', 182, 'Kemerovo', 96100, 0),\n(3758, 'Bugulma', 182, 'Tatarstan', 94100, 0),\n(3759, 'Zeleznogorsk', 182, 'Krasnojarsk', 94000, 0),\n(3760, 'Novouralsk', 182, 'Sverdlovsk', 93300, 0),\n(3761, 'Puškin', 182, 'Pietari', 92900, 0),\n(3762, 'Vorkuta', 182, 'Komi', 92600, 0),\n(3763, 'Derbent', 182, 'Dagestan', 92300, 0),\n(3764, 'Kirovo-Tšepetsk', 182, 'Kirov', 91600, 0),\n(3765, 'Krasnogorsk', 182, 'Moskova', 91000, 0),\n(3766, 'Klin', 182, 'Moskova', 90000, 0),\n(3767, 'Tšaikovski', 182, 'Perm', 90000, 0),\n(3768, 'Novyi Urengoi', 182, 'Yamalin Nenetsia', 89800, 0),\n(3769, 'Ho Chi Minh City', 231, 'Ho Chi Minh City', 3980000, 0),\n(3770, 'Hanoi', 231, 'Hanoi', 1410000, 1),\n(3771, 'Haiphong', 231, 'Haiphong', 783133, 0),\n(3772, 'Da Nang', 231, 'Quang Nam-Da Nang', 382674, 0),\n(3773, 'Biên Hoa', 231, 'Dong Nai', 282095, 0),\n(3774, 'Nha Trang', 231, 'Khanh Hoa', 221331, 0),\n(3775, 'Hue', 231, 'Thua Thien-Hue', 219149, 0),\n(3776, 'Can Tho', 231, 'Can Tho', 215587, 0),\n(3777, 'Cam Pha', 231, 'Quang Binh', 209086, 0),\n(3778, 'Nam Dinh', 231, 'Nam Ha', 171699, 0),\n(3779, 'Quy Nhon', 231, 'Binh Dinh', 163385, 0),\n(3780, 'Vung Tau', 231, 'Ba Ria-Vung Tau', 145145, 0),\n(3781, 'Rach Gia', 231, 'Kien Giang', 141132, 0),\n(3782, 'Long Xuyen', 231, 'An Giang', 132681, 0),\n(3783, 'Thai Nguyen', 231, 'Bac Thai', 127643, 0),\n(3784, 'Hong Gai', 231, 'Quang Ninh', 127484, 0),\n(3785, 'Phan Thiêt', 231, 'Binh Thuan', 114236, 0),\n(3786, 'Cam Ranh', 231, 'Khanh Hoa', 114041, 0),\n(3787, 'Vinh', 231, 'Nghe An', 112455, 0),\n(3788, 'My Tho', 231, 'Tien Giang', 108404, 0),\n(3789, 'Da Lat', 231, 'Lam Dong', 106409, 0),\n(3790, 'Buon Ma Thuot', 231, 'Dac Lac', 97044, 0),\n(3791, 'Tallinn', 68, 'Harjumaa', 403981, 1),\n(3792, 'Tartu', 68, 'Tartumaa', 101246, 0),\n(3793, 'New York', 224, 'New York', 8008278, 0),\n(3794, 'Los Angeles', 224, 'California', 3694820, 0),\n(3795, 'Chicago', 224, 'Illinois', 2896016, 0),\n(3796, 'Houston', 224, 'Texas', 1953631, 0),\n(3797, 'Philadelphia', 224, 'Pennsylvania', 1517550, 0),\n(3798, 'Phoenix', 224, 'Arizona', 1321045, 0),\n(3799, 'San Diego', 224, 'California', 1223400, 0),\n(3800, 'Dallas', 224, 'Texas', 1188580, 0),\n(3801, 'San Antonio', 224, 'Texas', 1144646, 0),\n(3802, 'Detroit', 224, 'Michigan', 951270, 0),\n(3803, 'San Jose', 224, 'California', 894943, 0),\n(3804, 'Indianapolis', 224, 'Indiana', 791926, 0),\n(3805, 'San Francisco', 224, 'California', 776733, 0),\n(3806, 'Jacksonville', 224, 'Florida', 735167, 0),\n(3807, 'Columbus', 224, 'Ohio', 711470, 0),\n(3808, 'Austin', 224, 'Texas', 656562, 0),\n(3809, 'Baltimore', 224, 'Maryland', 651154, 0),\n(3810, 'Memphis', 224, 'Tennessee', 650100, 0),\n(3811, 'Milwaukee', 224, 'Wisconsin', 596974, 0),\n(3812, 'Boston', 224, 'Massachusetts', 589141, 0),\n(3813, 'Washington', 224, 'District of Columbia', 572059, 1),\n(3814, 'Nashville-Davidson', 224, 'Tennessee', 569891, 0),\n(3815, 'El Paso', 224, 'Texas', 563662, 0),\n(3816, 'Seattle', 224, 'Washington', 563374, 0),\n(3817, 'Denver', 224, 'Colorado', 554636, 0),\n(3818, 'Charlotte', 224, 'North Carolina', 540828, 0),\n(3819, 'Fort Worth', 224, 'Texas', 534694, 0),\n(3820, 'Portland', 224, 'Oregon', 529121, 0),\n(3821, 'Oklahoma City', 224, 'Oklahoma', 506132, 0),\n(3822, 'Tucson', 224, 'Arizona', 486699, 0),\n(3823, 'New Orleans', 224, 'Louisiana', 484674, 0),\n(3824, 'Las Vegas', 224, 'Nevada', 478434, 0),\n(3825, 'Cleveland', 224, 'Ohio', 478403, 0),\n(3826, 'Long Beach', 224, 'California', 461522, 0),\n(3827, 'Albuquerque', 224, 'New Mexico', 448607, 0),\n(3828, 'Kansas City', 224, 'Missouri', 441545, 0),\n(3829, 'Fresno', 224, 'California', 427652, 0),\n(3830, 'Virginia Beach', 224, 'Virginia', 425257, 0),\n(3831, 'Atlanta', 224, 'Georgia', 416474, 0),\n(3832, 'Sacramento', 224, 'California', 407018, 0),\n(3833, 'Oakland', 224, 'California', 399484, 0),\n(3834, 'Mesa', 224, 'Arizona', 396375, 0),\n(3835, 'Tulsa', 224, 'Oklahoma', 393049, 0),\n(3836, 'Omaha', 224, 'Nebraska', 390007, 0),\n(3837, 'Minneapolis', 224, 'Minnesota', 382618, 0),\n(3838, 'Honolulu', 224, 'Hawaii', 371657, 0),\n(3839, 'Miami', 224, 'Florida', 362470, 0),\n(3840, 'Colorado Springs', 224, 'Colorado', 360890, 0),\n(3841, 'Saint Louis', 224, 'Missouri', 348189, 0),\n(3842, 'Wichita', 224, 'Kansas', 344284, 0),\n(3843, 'Santa Ana', 224, 'California', 337977, 0),\n(3844, 'Pittsburgh', 224, 'Pennsylvania', 334563, 0),\n(3845, 'Arlington', 224, 'Texas', 332969, 0),\n(3846, 'Cincinnati', 224, 'Ohio', 331285, 0),\n(3847, 'Anaheim', 224, 'California', 328014, 0),\n(3848, 'Toledo', 224, 'Ohio', 313619, 0),\n(3849, 'Tampa', 224, 'Florida', 303447, 0),\n(3850, 'Buffalo', 224, 'New York', 292648, 0),\n(3851, 'Saint Paul', 224, 'Minnesota', 287151, 0),\n(3852, 'Corpus Christi', 224, 'Texas', 277454, 0),\n(3853, 'Aurora', 224, 'Colorado', 276393, 0),\n(3854, 'Raleigh', 224, 'North Carolina', 276093, 0),\n(3855, 'Newark', 224, 'New Jersey', 273546, 0),\n(3856, 'Lexington-Fayette', 224, 'Kentucky', 260512, 0),\n(3857, 'Anchorage', 224, 'Alaska', 260283, 0),\n(3858, 'Louisville', 224, 'Kentucky', 256231, 0),\n(3859, 'Riverside', 224, 'California', 255166, 0),\n(3860, 'Saint Petersburg', 224, 'Florida', 248232, 0),\n(3861, 'Bakersfield', 224, 'California', 247057, 0),\n(3862, 'Stockton', 224, 'California', 243771, 0),\n(3863, 'Birmingham', 224, 'Alabama', 242820, 0),\n(3864, 'Jersey City', 224, 'New Jersey', 240055, 0),\n(3865, 'Norfolk', 224, 'Virginia', 234403, 0),\n(3866, 'Baton Rouge', 224, 'Louisiana', 227818, 0),\n(3867, 'Hialeah', 224, 'Florida', 226419, 0),\n(3868, 'Lincoln', 224, 'Nebraska', 225581, 0),\n(3869, 'Greensboro', 224, 'North Carolina', 223891, 0),\n(3870, 'Plano', 224, 'Texas', 222030, 0),\n(3871, 'Rochester', 224, 'New York', 219773, 0),\n(3872, 'Glendale', 224, 'Arizona', 218812, 0),\n(3873, 'Akron', 224, 'Ohio', 217074, 0),\n(3874, 'Garland', 224, 'Texas', 215768, 0),\n(3875, 'Madison', 224, 'Wisconsin', 208054, 0),\n(3876, 'Fort Wayne', 224, 'Indiana', 205727, 0),\n(3877, 'Fremont', 224, 'California', 203413, 0),\n(3878, 'Scottsdale', 224, 'Arizona', 202705, 0),\n(3879, 'Montgomery', 224, 'Alabama', 201568, 0),\n(3880, 'Shreveport', 224, 'Louisiana', 200145, 0),\n(3881, 'Augusta-Richmond County', 224, 'Georgia', 199775, 0),\n(3882, 'Lubbock', 224, 'Texas', 199564, 0),\n(3883, 'Chesapeake', 224, 'Virginia', 199184, 0),\n(3884, 'Mobile', 224, 'Alabama', 198915, 0),\n(3885, 'Des Moines', 224, 'Iowa', 198682, 0),\n(3886, 'Grand Rapids', 224, 'Michigan', 197800, 0),\n(3887, 'Richmond', 224, 'Virginia', 197790, 0),\n(3888, 'Yonkers', 224, 'New York', 196086, 0),\n(3889, 'Spokane', 224, 'Washington', 195629, 0),\n(3890, 'Glendale', 224, 'California', 194973, 0),\n(3891, 'Tacoma', 224, 'Washington', 193556, 0),\n(3892, 'Irving', 224, 'Texas', 191615, 0),\n(3893, 'Huntington Beach', 224, 'California', 189594, 0),\n(3894, 'Modesto', 224, 'California', 188856, 0),\n(3895, 'Durham', 224, 'North Carolina', 187035, 0),\n(3896, 'Columbus', 224, 'Georgia', 186291, 0),\n(3897, 'Orlando', 224, 'Florida', 185951, 0),\n(3898, 'Boise City', 224, 'Idaho', 185787, 0),\n(3899, 'Winston-Salem', 224, 'North Carolina', 185776, 0),\n(3900, 'San Bernardino', 224, 'California', 185401, 0),\n(3901, 'Jackson', 224, 'Mississippi', 184256, 0),\n(3902, 'Little Rock', 224, 'Arkansas', 183133, 0),\n(3903, 'Salt Lake City', 224, 'Utah', 181743, 0),\n(3904, 'Reno', 224, 'Nevada', 180480, 0),\n(3905, 'Newport News', 224, 'Virginia', 180150, 0),\n(3906, 'Chandler', 224, 'Arizona', 176581, 0),\n(3907, 'Laredo', 224, 'Texas', 176576, 0),\n(3908, 'Henderson', 224, 'Nevada', 175381, 0),\n(3909, 'Arlington', 224, 'Virginia', 174838, 0),\n(3910, 'Knoxville', 224, 'Tennessee', 173890, 0),\n(3911, 'Amarillo', 224, 'Texas', 173627, 0),\n(3912, 'Providence', 224, 'Rhode Island', 173618, 0),\n(3913, 'Chula Vista', 224, 'California', 173556, 0),\n(3914, 'Worcester', 224, 'Massachusetts', 172648, 0),\n(3915, 'Oxnard', 224, 'California', 170358, 0),\n(3916, 'Dayton', 224, 'Ohio', 166179, 0),\n(3917, 'Garden Grove', 224, 'California', 165196, 0),\n(3918, 'Oceanside', 224, 'California', 161029, 0),\n(3919, 'Tempe', 224, 'Arizona', 158625, 0),\n(3920, 'Huntsville', 224, 'Alabama', 158216, 0),\n(3921, 'Ontario', 224, 'California', 158007, 0),\n(3922, 'Chattanooga', 224, 'Tennessee', 155554, 0),\n(3923, 'Fort Lauderdale', 224, 'Florida', 152397, 0),\n(3924, 'Springfield', 224, 'Massachusetts', 152082, 0),\n(3925, 'Springfield', 224, 'Missouri', 151580, 0),\n(3926, 'Santa Clarita', 224, 'California', 151088, 0),\n(3927, 'Salinas', 224, 'California', 151060, 0),\n(3928, 'Tallahassee', 224, 'Florida', 150624, 0),\n(3929, 'Rockford', 224, 'Illinois', 150115, 0),\n(3930, 'Pomona', 224, 'California', 149473, 0),\n(3931, 'Metairie', 224, 'Louisiana', 149428, 0),\n(3932, 'Paterson', 224, 'New Jersey', 149222, 0),\n(3933, 'Overland Park', 224, 'Kansas', 149080, 0),\n(3934, 'Santa Rosa', 224, 'California', 147595, 0),\n(3935, 'Syracuse', 224, 'New York', 147306, 0),\n(3936, 'Kansas City', 224, 'Kansas', 146866, 0),\n(3937, 'Hampton', 224, 'Virginia', 146437, 0),\n(3938, 'Lakewood', 224, 'Colorado', 144126, 0),\n(3939, 'Vancouver', 224, 'Washington', 143560, 0),\n(3940, 'Irvine', 224, 'California', 143072, 0),\n(3941, 'Aurora', 224, 'Illinois', 142990, 0),\n(3942, 'Moreno Valley', 224, 'California', 142381, 0),\n(3943, 'Pasadena', 224, 'California', 141674, 0),\n(3944, 'Hayward', 224, 'California', 140030, 0),\n(3945, 'Brownsville', 224, 'Texas', 139722, 0),\n(3946, 'Bridgeport', 224, 'Connecticut', 139529, 0),\n(3947, 'Hollywood', 224, 'Florida', 139357, 0),\n(3948, 'Warren', 224, 'Michigan', 138247, 0),\n(3949, 'Torrance', 224, 'California', 137946, 0),\n(3950, 'Eugene', 224, 'Oregon', 137893, 0),\n(3951, 'Pembroke Pines', 224, 'Florida', 137427, 0),\n(3952, 'Salem', 224, 'Oregon', 136924, 0),\n(3953, 'Pasadena', 224, 'Texas', 133936, 0),\n(3954, 'Escondido', 224, 'California', 133559, 0),\n(3955, 'Sunnyvale', 224, 'California', 131760, 0),\n(3956, 'Savannah', 224, 'Georgia', 131510, 0),\n(3957, 'Fontana', 224, 'California', 128929, 0),\n(3958, 'Orange', 224, 'California', 128821, 0),\n(3959, 'Naperville', 224, 'Illinois', 128358, 0),\n(3960, 'Alexandria', 224, 'Virginia', 128283, 0),\n(3961, 'Rancho Cucamonga', 224, 'California', 127743, 0),\n(3962, 'Grand Prairie', 224, 'Texas', 127427, 0),\n(3963, 'East Los Angeles', 224, 'California', 126379, 0),\n(3964, 'Fullerton', 224, 'California', 126003, 0),\n(3965, 'Corona', 224, 'California', 124966, 0),\n(3966, 'Flint', 224, 'Michigan', 124943, 0),\n(3967, 'Paradise', 224, 'Nevada', 124682, 0),\n(3968, 'Mesquite', 224, 'Texas', 124523, 0),\n(3969, 'Sterling Heights', 224, 'Michigan', 124471, 0),\n(3970, 'Sioux Falls', 224, 'South Dakota', 123975, 0),\n(3971, 'New Haven', 224, 'Connecticut', 123626, 0),\n(3972, 'Topeka', 224, 'Kansas', 122377, 0),\n(3973, 'Concord', 224, 'California', 121780, 0),\n(3974, 'Evansville', 224, 'Indiana', 121582, 0),\n(3975, 'Hartford', 224, 'Connecticut', 121578, 0),\n(3976, 'Fayetteville', 224, 'North Carolina', 121015, 0),\n(3977, 'Cedar Rapids', 224, 'Iowa', 120758, 0),\n(3978, 'Elizabeth', 224, 'New Jersey', 120568, 0),\n(3979, 'Lansing', 224, 'Michigan', 119128, 0),\n(3980, 'Lancaster', 224, 'California', 118718, 0),\n(3981, 'Fort Collins', 224, 'Colorado', 118652, 0),\n(3982, 'Coral Springs', 224, 'Florida', 117549, 0),\n(3983, 'Stamford', 224, 'Connecticut', 117083, 0),\n(3984, 'Thousand Oaks', 224, 'California', 117005, 0),\n(3985, 'Vallejo', 224, 'California', 116760, 0),\n(3986, 'Palmdale', 224, 'California', 116670, 0),\n(3987, 'Columbia', 224, 'South Carolina', 116278, 0),\n(3988, 'El Monte', 224, 'California', 115965, 0),\n(3989, 'Abilene', 224, 'Texas', 115930, 0),\n(3990, 'North Las Vegas', 224, 'Nevada', 115488, 0),\n(3991, 'Ann Arbor', 224, 'Michigan', 114024, 0),\n(3992, 'Beaumont', 224, 'Texas', 113866, 0),\n(3993, 'Waco', 224, 'Texas', 113726, 0),\n(3994, 'Macon', 224, 'Georgia', 113336, 0),\n(3995, 'Independence', 224, 'Missouri', 113288, 0),\n(3996, 'Peoria', 224, 'Illinois', 112936, 0),\n(3997, 'Inglewood', 224, 'California', 112580, 0),\n(3998, 'Springfield', 224, 'Illinois', 111454, 0),\n(3999, 'Simi Valley', 224, 'California', 111351, 0),\n(4000, 'Lafayette', 224, 'Louisiana', 110257, 0),\n(4001, 'Gilbert', 224, 'Arizona', 109697, 0),\n(4002, 'Carrollton', 224, 'Texas', 109576, 0),\n(4003, 'Bellevue', 224, 'Washington', 109569, 0),\n(4004, 'West Valley City', 224, 'Utah', 108896, 0),\n(4005, 'Clarksville', 224, 'Tennessee', 108787, 0),\n(4006, 'Costa Mesa', 224, 'California', 108724, 0),\n(4007, 'Peoria', 224, 'Arizona', 108364, 0),\n(4008, 'South Bend', 224, 'Indiana', 107789, 0),\n(4009, 'Downey', 224, 'California', 107323, 0),\n(4010, 'Waterbury', 224, 'Connecticut', 107271, 0),\n(4011, 'Manchester', 224, 'New Hampshire', 107006, 0),\n(4012, 'Allentown', 224, 'Pennsylvania', 106632, 0),\n(4013, 'McAllen', 224, 'Texas', 106414, 0),\n(4014, 'Joliet', 224, 'Illinois', 106221, 0),\n(4015, 'Lowell', 224, 'Massachusetts', 105167, 0),\n(4016, 'Provo', 224, 'Utah', 105166, 0),\n(4017, 'West Covina', 224, 'California', 105080, 0),\n(4018, 'Wichita Falls', 224, 'Texas', 104197, 0),\n(4019, 'Erie', 224, 'Pennsylvania', 103717, 0),\n(4020, 'Daly City', 224, 'California', 103621, 0),\n(4021, 'Citrus Heights', 224, 'California', 103455, 0),\n(4022, 'Norwalk', 224, 'California', 103298, 0),\n(4023, 'Gary', 224, 'Indiana', 102746, 0),\n(4024, 'Berkeley', 224, 'California', 102743, 0),\n(4025, 'Santa Clara', 224, 'California', 102361, 0),\n(4026, 'Green Bay', 224, 'Wisconsin', 102313, 0),\n(4027, 'Cape Coral', 224, 'Florida', 102286, 0),\n(4028, 'Arvada', 224, 'Colorado', 102153, 0),\n(4029, 'Pueblo', 224, 'Colorado', 102121, 0),\n(4030, 'Sandy', 224, 'Utah', 101853, 0),\n(4031, 'Athens-Clarke County', 224, 'Georgia', 101489, 0),\n(4032, 'Cambridge', 224, 'Massachusetts', 101355, 0),\n(4033, 'Westminster', 224, 'Colorado', 100940, 0),\n(4034, 'San Buenaventura', 224, 'California', 100916, 0),\n(4035, 'Portsmouth', 224, 'Virginia', 100565, 0),\n(4036, 'Livonia', 224, 'Michigan', 100545, 0),\n(4037, 'Burbank', 224, 'California', 100316, 0),\n(4038, 'Clearwater', 224, 'Florida', 99936, 0),\n(4039, 'Midland', 224, 'Texas', 98293, 0),\n(4040, 'Davenport', 224, 'Iowa', 98256, 0),\n(4041, 'Mission Viejo', 224, 'California', 98049, 0),\n(4042, 'Miami Beach', 224, 'Florida', 97855, 0),\n(4043, 'Sunrise Manor', 224, 'Nevada', 95362, 0),\n(4044, 'New Bedford', 224, 'Massachusetts', 94780, 0),\n(4045, 'El Cajon', 224, 'California', 94578, 0),\n(4046, 'Norman', 224, 'Oklahoma', 94193, 0),\n(4047, 'Richmond', 224, 'California', 94100, 0),\n(4048, 'Albany', 224, 'New York', 93994, 0),\n(4049, 'Brockton', 224, 'Massachusetts', 93653, 0),\n(4050, 'Roanoke', 224, 'Virginia', 93357, 0),\n(4051, 'Billings', 224, 'Montana', 92988, 0),\n(4052, 'Compton', 224, 'California', 92864, 0),\n(4053, 'Gainesville', 224, 'Florida', 92291, 0),\n(4054, 'Fairfield', 224, 'California', 92256, 0),\n(4055, 'Arden-Arcade', 224, 'California', 92040, 0),\n(4056, 'San Mateo', 224, 'California', 91799, 0),\n(4057, 'Visalia', 224, 'California', 91762, 0),\n(4058, 'Boulder', 224, 'Colorado', 91238, 0),\n(4059, 'Cary', 224, 'North Carolina', 91213, 0),\n(4060, 'Santa Monica', 224, 'California', 91084, 0),\n(4061, 'Fall River', 224, 'Massachusetts', 90555, 0),\n(4062, 'Kenosha', 224, 'Wisconsin', 89447, 0),\n(4063, 'Elgin', 224, 'Illinois', 89408, 0),\n(4064, 'Odessa', 224, 'Texas', 89293, 0),\n(4065, 'Carson', 224, 'California', 89089, 0),\n(4066, 'Charleston', 224, 'South Carolina', 89063, 0),\n(4067, 'Charlotte Amalie', 230, 'St Thomas', 13000, 1),\n(4068, 'Harare', 239, 'Harare', 1410000, 1),\n(4069, 'Bulawayo', 239, 'Bulawayo', 621742, 0),\n(4070, 'Chitungwiza', 239, 'Harare', 274912, 0),\n(4071, 'Mount Darwin', 239, 'Harare', 164362, 0),\n(4072, 'Mutare', 239, 'Manicaland', 131367, 0),\n(4073, 'Gweru', 239, 'Midlands', 128037, 0),\n(4074, 'Gaza', 177, 'Gaza', 353632, 1),\n(4075, 'Khan Yunis', 177, 'Khan Yunis', 123175, 0),\n(4076, 'Hebron', 177, 'Hebron', 119401, 0),\n(4077, 'Jabaliya', 177, 'North Gaza', 113901, 0),\n(4078, 'Nablus', 177, 'Nablus', 100231, 0),\n(4079, 'Rafah', 177, 'Rafah', 92020, 0);\n\n-- --------------------------------------------------------\n\n--\n-- Tábla szerkezet ehhez a táblához `countries`\n--\n\nCREATE TABLE `countries` (\n  `id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `continent` varchar(255) NOT NULL,\n  `population` int NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\n--\n-- A tábla adatainak kiíratása `countries`\n--\n\nINSERT INTO `countries` (`id`, `name`, `continent`, `population`) VALUES\n(1, 'Aruba', 'North America', 103000),\n(2, 'Afghanistan', 'Asia', 22720000),\n(3, 'Angola', 'Africa', 12878000),\n(4, 'Anguilla', 'North America', 8000),\n(5, 'Albania', 'Europe', 3401200),\n(6, 'Andorra', 'Europe', 78000),\n(7, 'Netherlands Antilles', 'North America', 217000),\n(8, 'United Arab Emirates', 'Asia', 2441000),\n(9, 'Argentina', 'South America', 37032000),\n(10, 'Armenia', 'Asia', 3520000),\n(11, 'American Samoa', 'Oceania', 68000),\n(12, 'Antarctica', 'Antarctica', 0),\n(13, 'French Southern territories', 'Antarctica', 0),\n(14, 'Antigua and Barbuda', 'North America', 68000),\n(15, 'Australia', 'Oceania', 18886000),\n(16, 'Austria', 'Europe', 8091800),\n(17, 'Azerbaijan', 'Asia', 7734000),\n(18, 'Burundi', 'Africa', 6695000),\n(19, 'Belgium', 'Europe', 10239000),\n(20, 'Benin', 'Africa', 6097000),\n(21, 'Burkina Faso', 'Africa', 11937000),\n(22, 'Bangladesh', 'Asia', 129155000),\n(23, 'Bulgaria', 'Europe', 8190900),\n(24, 'Bahrain', 'Asia', 617000),\n(25, 'Bahamas', 'North America', 307000),\n(26, 'Bosnia and Herzegovina', 'Europe', 3972000),\n(27, 'Belarus', 'Europe', 10236000),\n(28, 'Belize', 'North America', 241000),\n(29, 'Bermuda', 'North America', 65000),\n(30, 'Bolivia', 'South America', 8329000),\n(31, 'Brazil', 'South America', 170115000),\n(32, 'Barbados', 'North America', 270000),\n(33, 'Brunei', 'Asia', 328000),\n(34, 'Bhutan', 'Asia', 2124000),\n(35, 'Bouvet Island', 'Antarctica', 0),\n(36, 'Botswana', 'Africa', 1622000),\n(37, 'Central African Republic', 'Africa', 3615000),\n(38, 'Canada', 'North America', 31147000),\n(39, 'Cocos (Keeling) Islands', 'Oceania', 600),\n(40, 'Switzerland', 'Europe', 7160400),\n(41, 'Chile', 'South America', 15211000),\n(42, 'China', 'Asia', 1277558000),\n(43, 'Côte d’Ivoire', 'Africa', 14786000),\n(44, 'Cameroon', 'Africa', 15085000),\n(45, 'Congo, The Democratic Republic of the', 'Africa', 51654000),\n(46, 'Congo', 'Africa', 2943000),\n(47, 'Cook Islands', 'Oceania', 20000),\n(48, 'Colombia', 'South America', 42321000),\n(49, 'Comoros', 'Africa', 578000),\n(50, 'Cape Verde', 'Africa', 428000),\n(51, 'Costa Rica', 'North America', 4023000),\n(52, 'Cuba', 'North America', 11201000),\n(53, 'Christmas Island', 'Oceania', 2500),\n(54, 'Cayman Islands', 'North America', 38000),\n(55, 'Cyprus', 'Asia', 754700),\n(56, 'Czech Republic', 'Europe', 10278100),\n(57, 'Germany', 'Europe', 82164700),\n(58, 'Djibouti', 'Africa', 638000),\n(59, 'Dominica', 'North America', 71000),\n(60, 'Denmark', 'Europe', 5330000),\n(61, 'Dominican Republic', 'North America', 8495000),\n(62, 'Algeria', 'Africa', 31471000),\n(63, 'Ecuador', 'South America', 12646000),\n(64, 'Egypt', 'Africa', 68470000),\n(65, 'Eritrea', 'Africa', 3850000),\n(66, 'Western Sahara', 'Africa', 293000),\n(67, 'Spain', 'Europe', 39441700),\n(68, 'Estonia', 'Europe', 1439200),\n(69, 'Ethiopia', 'Africa', 62565000),\n(70, 'Finland', 'Europe', 5171300),\n(71, 'Fiji Islands', 'Oceania', 817000),\n(72, 'Falkland Islands', 'South America', 2000),\n(73, 'France', 'Europe', 59225700),\n(74, 'Faroe Islands', 'Europe', 43000),\n(75, 'Micronesia, Federated States of', 'Oceania', 119000),\n(76, 'Gabon', 'Africa', 1226000),\n(77, 'United Kingdom', 'Europe', 59623400),\n(78, 'Georgia', 'Asia', 4968000),\n(79, 'Ghana', 'Africa', 20212000),\n(80, 'Gibraltar', 'Europe', 25000),\n(81, 'Guinea', 'Africa', 7430000),\n(82, 'Guadeloupe', 'North America', 456000),\n(83, 'Gambia', 'Africa', 1305000),\n(84, 'Guinea-Bissau', 'Africa', 1213000),\n(85, 'Equatorial Guinea', 'Africa', 453000),\n(86, 'Greece', 'Europe', 10545700),\n(87, 'Grenada', 'North America', 94000),\n(88, 'Greenland', 'North America', 56000),\n(89, 'Guatemala', 'North America', 11385000),\n(90, 'French Guiana', 'South America', 181000),\n(91, 'Guam', 'Oceania', 168000),\n(92, 'Guyana', 'South America', 861000),\n(93, 'Hong Kong', 'Asia', 6782000),\n(94, 'Heard Island and McDonald Islands', 'Antarctica', 0),\n(95, 'Honduras', 'North America', 6485000),\n(96, 'Croatia', 'Europe', 4473000),\n(97, 'Haiti', 'North America', 8222000),\n(98, 'Hungary', 'Europe', 10043200),\n(99, 'Indonesia', 'Asia', 212107000),\n(100, 'India', 'Asia', 1013662000),\n(101, 'British Indian Ocean Territory', 'Africa', 0),\n(102, 'Ireland', 'Europe', 3775100),\n(103, 'Iran', 'Asia', 67702000),\n(104, 'Iraq', 'Asia', 23115000),\n(105, 'Iceland', 'Europe', 279000),\n(106, 'Israel', 'Asia', 6217000),\n(107, 'Italy', 'Europe', 57680000),\n(108, 'Jamaica', 'North America', 2583000),\n(109, 'Jordan', 'Asia', 5083000),\n(110, 'Japan', 'Asia', 126714000),\n(111, 'Kazakstan', 'Asia', 16223000),\n(112, 'Kenya', 'Africa', 30080000),\n(113, 'Kyrgyzstan', 'Asia', 4699000),\n(114, 'Cambodia', 'Asia', 11168000),\n(115, 'Kiribati', 'Oceania', 83000),\n(116, 'Saint Kitts and Nevis', 'North America', 38000),\n(117, 'South Korea', 'Asia', 46844000),\n(118, 'Kuwait', 'Asia', 1972000),\n(119, 'Laos', 'Asia', 5433000),\n(120, 'Lebanon', 'Asia', 3282000),\n(121, 'Liberia', 'Africa', 3154000),\n(122, 'Libyan Arab Jamahiriya', 'Africa', 5605000),\n(123, 'Saint Lucia', 'North America', 154000),\n(124, 'Liechtenstein', 'Europe', 32300),\n(125, 'Sri Lanka', 'Asia', 18827000),\n(126, 'Lesotho', 'Africa', 2153000),\n(127, 'Lithuania', 'Europe', 3698500),\n(128, 'Luxembourg', 'Europe', 435700),\n(129, 'Latvia', 'Europe', 2424200),\n(130, 'Macao', 'Asia', 473000),\n(131, 'Morocco', 'Africa', 28351000),\n(132, 'Monaco', 'Europe', 34000),\n(133, 'Moldova', 'Europe', 4380000),\n(134, 'Madagascar', 'Africa', 15942000),\n(135, 'Maldives', 'Asia', 286000),\n(136, 'Mexico', 'North America', 98881000),\n(137, 'Marshall Islands', 'Oceania', 64000),\n(138, 'Macedonia', 'Europe', 2024000),\n(139, 'Mali', 'Africa', 11234000),\n(140, 'Malta', 'Europe', 380200),\n(141, 'Myanmar', 'Asia', 45611000),\n(142, 'Mongolia', 'Asia', 2662000),\n(143, 'Northern Mariana Islands', 'Oceania', 78000),\n(144, 'Mozambique', 'Africa', 19680000),\n(145, 'Mauritania', 'Africa', 2670000),\n(146, 'Montserrat', 'North America', 11000),\n(147, 'Martinique', 'North America', 395000),\n(148, 'Mauritius', 'Africa', 1158000),\n(149, 'Malawi', 'Africa', 10925000),\n(150, 'Malaysia', 'Asia', 22244000),\n(151, 'Mayotte', 'Africa', 149000),\n(152, 'Namibia', 'Africa', 1726000),\n(153, 'New Caledonia', 'Oceania', 214000),\n(154, 'Niger', 'Africa', 10730000),\n(155, 'Norfolk Island', 'Oceania', 2000),\n(156, 'Nigeria', 'Africa', 111506000),\n(157, 'Nicaragua', 'North America', 5074000),\n(158, 'Niue', 'Oceania', 2000),\n(159, 'Netherlands', 'Europe', 15864000),\n(160, 'Norway', 'Europe', 4478500),\n(161, 'Nepal', 'Asia', 23930000),\n(162, 'Nauru', 'Oceania', 12000),\n(163, 'New Zealand', 'Oceania', 3862000),\n(164, 'Oman', 'Asia', 2542000),\n(165, 'Pakistan', 'Asia', 156483000),\n(166, 'Panama', 'North America', 2856000),\n(167, 'Pitcairn', 'Oceania', 50),\n(168, 'Peru', 'South America', 25662000),\n(169, 'Philippines', 'Asia', 75967000),\n(170, 'Palau', 'Oceania', 19000),\n(171, 'Papua New Guinea', 'Oceania', 4807000),\n(172, 'Poland', 'Europe', 38653600),\n(173, 'Puerto Rico', 'North America', 3869000),\n(174, 'North Korea', 'Asia', 24039000),\n(175, 'Portugal', 'Europe', 9997600),\n(176, 'Paraguay', 'South America', 5496000),\n(177, 'Palestine', 'Asia', 3101000),\n(178, 'French Polynesia', 'Oceania', 235000),\n(179, 'Qatar', 'Asia', 599000),\n(180, 'Réunion', 'Africa', 699000),\n(181, 'Romania', 'Europe', 22455500),\n(182, 'Russian Federation', 'Europe', 146934000),\n(183, 'Rwanda', 'Africa', 7733000),\n(184, 'Saudi Arabia', 'Asia', 21607000),\n(185, 'Sudan', 'Africa', 29490000),\n(186, 'Senegal', 'Africa', 9481000),\n(187, 'Singapore', 'Asia', 3567000),\n(188, 'South Georgia and the South Sandwich Islands', 'Antarctica', 0),\n(189, 'Saint Helena', 'Africa', 6000),\n(190, 'Svalbard and Jan Mayen', 'Europe', 3200),\n(191, 'Solomon Islands', 'Oceania', 444000),\n(192, 'Sierra Leone', 'Africa', 4854000),\n(193, 'El Salvador', 'North America', 6276000),\n(194, 'San Marino', 'Europe', 27000),\n(195, 'Somalia', 'Africa', 10097000),\n(196, 'Saint Pierre and Miquelon', 'North America', 7000),\n(197, 'Sao Tome and Principe', 'Africa', 147000),\n(198, 'Suriname', 'South America', 417000),\n(199, 'Slovakia', 'Europe', 5398700),\n(200, 'Slovenia', 'Europe', 1987800),\n(201, 'Sweden', 'Europe', 8861400),\n(202, 'Swaziland', 'Africa', 1008000),\n(203, 'Seychelles', 'Africa', 77000),\n(204, 'Syria', 'Asia', 16125000),\n(205, 'Turks and Caicos Islands', 'North America', 17000),\n(206, 'Chad', 'Africa', 7651000),\n(207, 'Togo', 'Africa', 4629000),\n(208, 'Thailand', 'Asia', 61399000),\n(209, 'Tajikistan', 'Asia', 6188000),\n(210, 'Tokelau', 'Oceania', 2000),\n(211, 'Turkmenistan', 'Asia', 4459000),\n(212, 'East Timor', 'Asia', 885000),\n(213, 'Tonga', 'Oceania', 99000),\n(214, 'Trinidad and Tobago', 'North America', 1295000),\n(215, 'Tunisia', 'Africa', 9586000),\n(216, 'Turkey', 'Asia', 66591000),\n(217, 'Tuvalu', 'Oceania', 12000),\n(218, 'Taiwan', 'Asia', 22256000),\n(219, 'Tanzania', 'Africa', 33517000),\n(220, 'Uganda', 'Africa', 21778000),\n(221, 'Ukraine', 'Europe', 50456000),\n(222, 'United States Minor Outlying Islands', 'Oceania', 0),\n(223, 'Uruguay', 'South America', 3337000),\n(224, 'United States', 'North America', 278357000),\n(225, 'Uzbekistan', 'Asia', 24318000),\n(226, 'Holy See (Vatican City State)', 'Europe', 1000),\n(227, 'Saint Vincent and the Grenadines', 'North America', 114000),\n(228, 'Venezuela', 'South America', 24170000),\n(229, 'Virgin Islands, British', 'North America', 21000),\n(230, 'Virgin Islands, U.S.', 'North America', 93000),\n(231, 'Vietnam', 'Asia', 79832000),\n(232, 'Vanuatu', 'Oceania', 190000),\n(233, 'Wallis and Futuna', 'Oceania', 15000),\n(234, 'Samoa', 'Oceania', 180000),\n(235, 'Yemen', 'Asia', 18112000),\n(236, 'Yugoslavia', 'Europe', 10640000),\n(237, 'South Africa', 'Africa', 40377000),\n(238, 'Zambia', 'Africa', 9169000),\n(239, 'Zimbabwe', 'Africa', 11669000);\n\n-- --------------------------------------------------------\n\n--\n-- Tábla szerkezet ehhez a táblához `countryLanguages`\n--\n\nCREATE TABLE `countryLanguages` (\n  `id` int NOT NULL,\n  `countryId` int NOT NULL,\n  `languageId` int NOT NULL,\n  `isOfficial` tinyint(1) NOT NULL,\n  `percentage` float NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\n--\n-- A tábla adatainak kiíratása `countryLanguages`\n--\n\nINSERT INTO `countryLanguages` (`id`, `countryId`, `languageId`, `isOfficial`, `percentage`) VALUES\n(1, 1, 105, 1, 5.3),\n(2, 1, 110, 0, 9.5),\n(3, 1, 329, 0, 76.7),\n(4, 1, 389, 0, 7.4),\n(5, 2, 31, 0, 0.9),\n(6, 2, 96, 1, 32.1),\n(7, 2, 331, 1, 52.4),\n(8, 2, 428, 0, 1.9),\n(9, 2, 436, 0, 8.8),\n(10, 3, 11, 0, 2.4),\n(11, 3, 79, 0, 4.2),\n(12, 3, 203, 0, 13.2),\n(13, 3, 226, 0, 2.4),\n(14, 3, 230, 0, 5.4),\n(15, 3, 233, 0, 3.6),\n(16, 3, 273, 0, 21.6),\n(17, 3, 314, 0, 5.4),\n(18, 3, 324, 0, 37.2),\n(19, 4, 110, 1, 0),\n(20, 5, 10, 1, 97.9),\n(21, 5, 143, 0, 1.8),\n(22, 5, 235, 0, 0.1),\n(23, 6, 66, 1, 32.3),\n(24, 6, 119, 0, 6.2),\n(25, 6, 339, 0, 10.8),\n(26, 6, 389, 0, 44.6),\n(27, 7, 105, 1, 0),\n(28, 7, 110, 0, 7.8),\n(29, 7, 329, 1, 86.2),\n(30, 8, 15, 1, 42),\n(31, 8, 164, 0, 0),\n(32, 9, 174, 0, 0.3),\n(33, 9, 176, 0, 1.7),\n(34, 9, 389, 1, 96.8),\n(35, 10, 20, 1, 93.4),\n(36, 10, 25, 0, 2.6),\n(37, 11, 110, 1, 3.1),\n(38, 11, 356, 1, 90.6),\n(39, 11, 418, 0, 3.1),\n(40, 14, 88, 0, 95.7),\n(41, 14, 110, 1, 0),\n(42, 15, 15, 0, 1),\n(43, 15, 62, 0, 1.1),\n(44, 15, 110, 1, 81.2),\n(45, 15, 135, 0, 0.6),\n(46, 15, 143, 0, 1.6),\n(47, 15, 176, 0, 2.2),\n(48, 15, 366, 0, 0.6),\n(49, 15, 438, 0, 0.8),\n(50, 16, 92, 0, 0.2),\n(51, 16, 135, 1, 92),\n(52, 16, 167, 0, 0.4),\n(53, 16, 337, 0, 0.2),\n(54, 16, 348, 0, 0.2),\n(55, 16, 366, 0, 2.2),\n(56, 16, 378, 0, 0.4),\n(57, 16, 427, 0, 1.5),\n(58, 17, 20, 0, 2),\n(59, 17, 25, 1, 89),\n(60, 17, 218, 0, 2.3),\n(61, 17, 352, 0, 3),\n(62, 18, 119, 1, 0),\n(63, 18, 201, 1, 98.1),\n(64, 18, 394, 0, 0),\n(65, 19, 15, 0, 1.6),\n(66, 19, 105, 1, 59.2),\n(67, 19, 119, 1, 32.6),\n(68, 19, 135, 1, 1),\n(69, 19, 176, 0, 2.4),\n(70, 19, 427, 0, 0.9),\n(71, 20, 3, 0, 11.1),\n(72, 20, 8, 0, 8.7),\n(73, 20, 37, 0, 8.7),\n(74, 20, 118, 0, 39.8),\n(75, 20, 123, 0, 5.6),\n(76, 20, 179, 0, 12.2),\n(77, 20, 381, 0, 6.7),\n(78, 21, 60, 0, 3.5),\n(79, 21, 94, 0, 3.1),\n(80, 21, 106, 0, 2.6),\n(81, 21, 123, 0, 9.7),\n(82, 21, 150, 0, 5.7),\n(83, 21, 291, 0, 50.2),\n(84, 22, 45, 1, 97.7),\n(85, 22, 69, 0, 0.4),\n(86, 22, 132, 0, 0.1),\n(87, 22, 194, 0, 0.1),\n(88, 22, 263, 0, 0.2),\n(89, 22, 360, 0, 0.1),\n(90, 22, 419, 0, 0.1),\n(91, 23, 55, 1, 83.2),\n(92, 23, 235, 0, 2.6),\n(93, 23, 347, 0, 3.7),\n(94, 23, 427, 0, 9.4),\n(95, 24, 15, 1, 67.7),\n(96, 24, 110, 0, 0),\n(97, 25, 88, 0, 89.7),\n(98, 25, 89, 0, 10.3),\n(99, 26, 366, 1, 99.2),\n(100, 27, 43, 1, 65.6),\n(101, 27, 337, 0, 0.6),\n(102, 27, 352, 1, 32),\n(103, 27, 433, 0, 1.3),\n(104, 28, 110, 1, 50.8),\n(105, 28, 131, 0, 6.8),\n(106, 28, 267, 0, 9.6),\n(107, 28, 389, 0, 31.6),\n(108, 29, 110, 1, 100),\n(109, 30, 6, 1, 3.2),\n(110, 30, 145, 0, 0.1),\n(111, 30, 193, 1, 8.1),\n(112, 30, 389, 1, 87.7),\n(113, 31, 135, 0, 0.5),\n(114, 31, 174, 0, 0.2),\n(115, 31, 176, 0, 0.4),\n(116, 31, 177, 0, 0.4),\n(117, 31, 339, 1, 97.5),\n(118, 32, 27, 0, 95.1),\n(119, 32, 110, 1, 0),\n(120, 33, 77, 0, 9.3),\n(121, 33, 110, 0, 3.1),\n(122, 33, 245, 1, 45.5),\n(123, 33, 246, 0, 28.8),\n(124, 34, 21, 0, 15.2),\n(125, 34, 107, 1, 50),\n(126, 34, 299, 0, 34.8),\n(127, 36, 196, 0, 2.5),\n(128, 36, 298, 0, 1.3),\n(129, 36, 358, 0, 3.5),\n(130, 36, 371, 0, 12.3),\n(131, 36, 423, 0, 75.5),\n(132, 37, 34, 0, 23.5),\n(133, 37, 133, 0, 23.8),\n(134, 37, 254, 0, 14.8),\n(135, 37, 272, 0, 6.4),\n(136, 37, 302, 0, 7.5),\n(137, 37, 361, 0, 6.4),\n(138, 38, 77, 0, 2.5),\n(139, 38, 105, 0, 0.5),\n(140, 38, 110, 1, 60.4),\n(141, 38, 111, 0, 0.1),\n(142, 38, 119, 1, 23.4),\n(143, 38, 135, 0, 1.6),\n(144, 38, 176, 0, 1.7),\n(145, 38, 337, 0, 0.7),\n(146, 38, 339, 0, 0.7),\n(147, 38, 340, 0, 0.7),\n(148, 38, 389, 0, 0.7),\n(149, 38, 433, 0, 0.6),\n(150, 39, 110, 1, 0),\n(151, 39, 245, 0, 0),\n(152, 40, 119, 1, 19.2),\n(153, 40, 135, 1, 63.6),\n(154, 40, 176, 1, 7.7),\n(155, 40, 349, 1, 0.6),\n(156, 41, 6, 0, 0.5),\n(157, 41, 18, 0, 9.6),\n(158, 41, 346, 0, 0.2),\n(159, 41, 389, 1, 89.7),\n(160, 42, 77, 1, 92),\n(161, 42, 101, 0, 0.2),\n(162, 42, 166, 0, 0.8),\n(163, 42, 257, 0, 0.9),\n(164, 42, 276, 0, 0.7),\n(165, 42, 287, 0, 0.4),\n(166, 42, 343, 0, 0.2),\n(167, 42, 412, 0, 0.4),\n(168, 42, 424, 0, 0.5),\n(169, 42, 432, 0, 0.6),\n(170, 42, 450, 0, 0.6),\n(171, 42, 455, 0, 1.4),\n(172, 43, 9, 0, 30),\n(173, 43, 148, 0, 11.7),\n(174, 43, 209, 0, 10.5),\n(175, 43, 248, 0, 11.4),\n(176, 43, 457, 0, 7.7),\n(177, 44, 33, 0, 18.6),\n(178, 44, 103, 0, 10.9),\n(179, 44, 114, 0, 19.7),\n(180, 44, 123, 0, 9.6),\n(181, 44, 240, 0, 4.9),\n(182, 44, 252, 0, 5.7),\n(183, 44, 266, 0, 3.9),\n(184, 44, 415, 0, 7.4),\n(185, 45, 51, 0, 2.3),\n(186, 45, 79, 0, 1.8),\n(187, 45, 203, 0, 16),\n(188, 45, 225, 0, 18),\n(189, 45, 286, 0, 13.5),\n(190, 45, 301, 0, 5.8),\n(191, 45, 351, 0, 3.8),\n(192, 45, 353, 0, 10.3),\n(193, 45, 405, 0, 2.7),\n(194, 45, 452, 0, 6.1),\n(195, 46, 203, 0, 51.5),\n(196, 46, 270, 0, 4.8),\n(197, 46, 271, 0, 11.4),\n(198, 46, 341, 0, 2.9),\n(199, 46, 359, 0, 2.6),\n(200, 46, 405, 0, 17.3),\n(201, 47, 110, 0, 0),\n(202, 47, 258, 1, 0),\n(203, 48, 19, 0, 0.1),\n(204, 48, 64, 0, 0.1),\n(205, 48, 73, 0, 0.4),\n(206, 48, 88, 0, 0.1),\n(207, 48, 389, 1, 99),\n(208, 49, 83, 1, 75),\n(209, 49, 84, 0, 1.6),\n(210, 49, 85, 0, 12.9),\n(211, 49, 87, 0, 5.5),\n(212, 49, 86, 0, 0.5),\n(213, 50, 90, 0, 100),\n(214, 50, 339, 1, 0),\n(215, 51, 73, 0, 0.3),\n(216, 51, 77, 0, 0.2),\n(217, 51, 88, 0, 2),\n(218, 51, 389, 1, 97.5),\n(219, 52, 389, 1, 100),\n(220, 53, 77, 0, 0),\n(221, 53, 110, 1, 0),\n(222, 54, 110, 1, 0),\n(223, 55, 143, 1, 74.1),\n(224, 55, 427, 1, 22.4),\n(225, 56, 92, 1, 81.2),\n(226, 56, 135, 0, 0.5),\n(227, 56, 167, 0, 0.2),\n(228, 56, 288, 0, 12.9),\n(229, 56, 337, 0, 0.6),\n(230, 56, 347, 0, 0.3),\n(231, 56, 373, 0, 0.4),\n(232, 56, 377, 0, 3.1),\n(233, 57, 135, 1, 91.3),\n(234, 57, 143, 0, 0.4),\n(235, 57, 176, 0, 0.7),\n(236, 57, 337, 0, 0.3),\n(237, 57, 387, 0, 1.4),\n(238, 57, 427, 0, 2.6),\n(239, 58, 4, 0, 34.8),\n(240, 58, 15, 1, 10.6),\n(241, 58, 380, 0, 43.9),\n(242, 59, 88, 0, 100),\n(243, 59, 89, 0, 0),\n(244, 60, 15, 0, 0.7),\n(245, 60, 95, 1, 93.5),\n(246, 60, 110, 0, 0.3),\n(247, 60, 135, 0, 0.5),\n(248, 60, 307, 0, 0.3),\n(249, 60, 396, 0, 0.3),\n(250, 60, 427, 0, 0.8),\n(251, 61, 89, 0, 2),\n(252, 61, 389, 1, 98),\n(253, 62, 15, 1, 86),\n(254, 62, 46, 0, 14),\n(255, 63, 193, 0, 7),\n(256, 63, 389, 1, 93),\n(257, 64, 15, 1, 98.8),\n(258, 64, 374, 0, 0),\n(259, 65, 4, 0, 4.3),\n(260, 65, 49, 0, 3),\n(261, 65, 153, 0, 3.8),\n(262, 65, 355, 0, 3),\n(263, 65, 413, 0, 31.7),\n(264, 65, 414, 1, 49.1),\n(265, 66, 15, 1, 100),\n(266, 67, 39, 0, 1.6),\n(267, 67, 66, 0, 16.9),\n(268, 67, 129, 0, 6.4),\n(269, 67, 389, 1, 74.4),\n(270, 68, 43, 0, 1.4),\n(271, 68, 112, 1, 65.3),\n(272, 68, 117, 0, 0.7),\n(273, 68, 352, 0, 27.8),\n(274, 68, 433, 0, 2.8),\n(275, 69, 12, 0, 30),\n(276, 69, 149, 0, 4.7),\n(277, 69, 319, 0, 31),\n(278, 69, 372, 0, 3.2),\n(279, 69, 380, 0, 4.1),\n(280, 69, 414, 0, 7.2),\n(281, 69, 439, 0, 2.8),\n(282, 70, 112, 0, 0.2),\n(283, 70, 117, 1, 92.7),\n(284, 70, 352, 0, 0.4),\n(285, 70, 354, 0, 0),\n(286, 70, 396, 1, 5.7),\n(287, 71, 116, 1, 50.8),\n(288, 71, 164, 0, 43.7),\n(289, 72, 110, 1, 0),\n(290, 73, 15, 0, 2.5),\n(291, 73, 119, 1, 93.6),\n(292, 73, 176, 0, 0.4),\n(293, 73, 339, 0, 1.2),\n(294, 73, 389, 0, 0.4),\n(295, 73, 427, 0, 0.4),\n(296, 74, 95, 1, 0),\n(297, 74, 115, 1, 100),\n(298, 75, 206, 0, 7.3),\n(299, 75, 290, 0, 7.6),\n(300, 75, 336, 0, 23.8),\n(301, 75, 420, 0, 41.6),\n(302, 75, 444, 0, 3.7),\n(303, 75, 449, 0, 5.8),\n(304, 76, 114, 0, 35.8),\n(305, 76, 270, 0, 13.8),\n(306, 76, 292, 0, 14.6),\n(307, 76, 342, 0, 17.1),\n(308, 77, 110, 1, 97.3),\n(309, 77, 127, 0, 0.1),\n(310, 77, 213, 0, 0.9),\n(311, 78, 1, 0, 1.7),\n(312, 78, 20, 0, 6.8),\n(313, 78, 25, 0, 5.5),\n(314, 78, 134, 1, 71.7),\n(315, 78, 320, 0, 2.4),\n(316, 78, 352, 0, 8.8),\n(317, 79, 9, 0, 52.4),\n(318, 79, 113, 0, 11.9),\n(319, 79, 126, 0, 7.8),\n(320, 79, 150, 0, 3.3),\n(321, 79, 179, 0, 1.3),\n(322, 79, 291, 0, 15.8),\n(323, 80, 15, 0, 7.4),\n(324, 80, 110, 1, 88.9),\n(325, 81, 123, 0, 38.6),\n(326, 81, 202, 0, 6),\n(327, 81, 208, 0, 4.6),\n(328, 81, 221, 0, 2.3),\n(329, 81, 248, 0, 23.2),\n(330, 81, 393, 0, 11),\n(331, 81, 447, 0, 2.9),\n(332, 82, 89, 0, 95),\n(333, 82, 119, 1, 0),\n(334, 83, 100, 0, 9.2),\n(335, 83, 123, 0, 16.2),\n(336, 83, 248, 0, 34.1),\n(337, 83, 384, 0, 7.6),\n(338, 83, 445, 0, 12.6),\n(339, 84, 29, 0, 14.6),\n(340, 84, 90, 0, 36.4),\n(341, 84, 123, 0, 16.6),\n(342, 84, 248, 0, 6.9),\n(343, 84, 255, 0, 4.9),\n(344, 84, 339, 1, 8.1),\n(345, 85, 53, 0, 8.7),\n(346, 85, 114, 0, 84.8),\n(347, 86, 143, 1, 98.5),\n(348, 86, 427, 0, 0.9),\n(349, 87, 88, 0, 100),\n(350, 88, 95, 1, 12.5),\n(351, 88, 144, 1, 87.5),\n(352, 89, 61, 0, 8.9),\n(353, 89, 192, 0, 4.9),\n(354, 89, 250, 0, 2.7),\n(355, 89, 344, 0, 10.1),\n(356, 89, 389, 1, 64.7),\n(357, 90, 89, 0, 94.3),\n(358, 90, 174, 0, 1.9),\n(359, 91, 70, 1, 29.6),\n(360, 91, 110, 1, 37.5),\n(361, 91, 177, 0, 2),\n(362, 91, 205, 0, 3.3),\n(363, 91, 333, 0, 19.7),\n(364, 92, 19, 0, 1.4),\n(365, 92, 64, 0, 2.2),\n(366, 92, 88, 0, 96.4),\n(367, 93, 62, 0, 88.7),\n(368, 93, 78, 0, 1.4),\n(369, 93, 110, 1, 2.2),\n(370, 93, 122, 0, 1.9),\n(371, 93, 156, 0, 1.6),\n(372, 95, 88, 0, 0.2),\n(373, 95, 131, 0, 1.3),\n(374, 95, 279, 0, 0.2),\n(375, 95, 389, 1, 97.2),\n(376, 96, 366, 1, 95.9),\n(377, 96, 378, 0, 0),\n(378, 97, 119, 1, 0),\n(379, 97, 155, 0, 100),\n(380, 98, 135, 0, 0.4),\n(381, 98, 167, 1, 98.5),\n(382, 98, 347, 0, 0.5),\n(383, 98, 348, 0, 0.1),\n(384, 98, 366, 0, 0.2),\n(385, 98, 377, 0, 0.1),\n(386, 99, 30, 0, 1.7),\n(387, 99, 35, 0, 1.8),\n(388, 99, 41, 0, 2.2),\n(389, 99, 54, 0, 2.2),\n(390, 99, 178, 0, 39.4),\n(391, 99, 236, 0, 4.3),\n(392, 99, 245, 1, 12.1),\n(393, 99, 278, 0, 2.4),\n(394, 99, 392, 0, 15.8),\n(395, 100, 21, 0, 1.5),\n(396, 100, 45, 0, 8.2),\n(397, 100, 147, 0, 4.8),\n(398, 100, 164, 1, 39.9),\n(399, 100, 185, 0, 3.9),\n(400, 100, 244, 0, 3.6),\n(401, 100, 260, 0, 7.4),\n(402, 100, 318, 0, 3.3),\n(403, 100, 340, 0, 2.8),\n(404, 100, 402, 0, 6.3),\n(405, 100, 406, 0, 7.8),\n(406, 100, 435, 0, 5.1),\n(407, 102, 110, 1, 98.4),\n(408, 102, 175, 1, 1.6),\n(409, 103, 15, 0, 2.2),\n(410, 103, 25, 0, 16.8),\n(411, 103, 28, 0, 1.7),\n(412, 103, 31, 0, 2.3),\n(413, 103, 136, 0, 5.3),\n(414, 103, 211, 0, 9.1),\n(415, 103, 232, 0, 4.3),\n(416, 103, 269, 0, 3.6),\n(417, 103, 332, 1, 45.7),\n(418, 103, 428, 0, 1.6),\n(419, 104, 15, 1, 77.2),\n(420, 104, 22, 0, 0.8),\n(421, 104, 25, 0, 1.7),\n(422, 104, 211, 0, 19),\n(423, 104, 332, 0, 0.8),\n(424, 105, 110, 0, 0),\n(425, 105, 171, 1, 95.7),\n(426, 106, 15, 1, 18),\n(427, 106, 160, 1, 63.1),\n(428, 106, 352, 0, 8.9),\n(429, 107, 10, 0, 0.2),\n(430, 107, 119, 0, 0.5),\n(431, 107, 121, 0, 1.2),\n(432, 107, 135, 0, 0.5),\n(433, 107, 176, 1, 94.1),\n(434, 107, 347, 0, 0.2),\n(435, 107, 363, 0, 2.7),\n(436, 107, 378, 0, 0.2),\n(437, 108, 88, 0, 94.2),\n(438, 108, 164, 0, 1.9),\n(439, 109, 15, 1, 97.9),\n(440, 109, 20, 0, 1),\n(441, 109, 82, 0, 1),\n(442, 110, 7, 0, 0),\n(443, 110, 77, 0, 0.2),\n(444, 110, 110, 0, 0.1),\n(445, 110, 177, 1, 99.1),\n(446, 110, 205, 0, 0.5),\n(447, 110, 333, 0, 0.1),\n(448, 111, 135, 0, 3.1),\n(449, 111, 191, 1, 46),\n(450, 111, 352, 0, 34.7),\n(451, 111, 404, 0, 2),\n(452, 111, 433, 0, 5),\n(453, 111, 436, 0, 2.3),\n(454, 112, 151, 0, 6.1),\n(455, 112, 182, 0, 10.8),\n(456, 112, 183, 0, 11.2),\n(457, 112, 198, 0, 20.9),\n(458, 112, 229, 0, 13.8),\n(459, 112, 231, 0, 12.8),\n(460, 112, 265, 0, 1.6),\n(461, 112, 275, 0, 5.5),\n(462, 112, 316, 0, 4.8),\n(463, 112, 426, 0, 1.4),\n(464, 113, 191, 0, 0.8),\n(465, 113, 199, 1, 59.7),\n(466, 113, 352, 1, 16.2),\n(467, 113, 397, 0, 0.8),\n(468, 113, 404, 0, 1.3),\n(469, 113, 433, 0, 1.7),\n(470, 113, 436, 0, 14.1),\n(471, 114, 77, 0, 3.1),\n(472, 114, 195, 1, 88.6),\n(473, 114, 430, 0, 2.4),\n(474, 114, 438, 0, 5.5),\n(475, 115, 200, 1, 98.9),\n(476, 115, 429, 0, 0.5),\n(477, 116, 88, 0, 100),\n(478, 116, 110, 1, 0),\n(479, 117, 77, 0, 0.1),\n(480, 117, 205, 1, 99.9),\n(481, 118, 15, 1, 78.1),\n(482, 118, 110, 0, 0),\n(483, 119, 215, 1, 67.2),\n(484, 119, 216, 0, 5.2),\n(485, 119, 284, 0, 16.5),\n(486, 119, 409, 0, 7.8),\n(487, 120, 15, 1, 93),\n(488, 120, 20, 0, 5.9),\n(489, 120, 119, 0, 0),\n(490, 121, 40, 0, 13.7),\n(491, 121, 137, 0, 7.9),\n(492, 121, 142, 0, 8.9),\n(493, 121, 208, 0, 19.5),\n(494, 121, 209, 0, 7.2),\n(495, 121, 221, 0, 5.8),\n(496, 121, 248, 0, 5.1),\n(497, 121, 256, 0, 7.2),\n(498, 122, 15, 1, 96),\n(499, 122, 46, 0, 1),\n(500, 123, 89, 0, 80),\n(501, 123, 110, 1, 20),\n(502, 124, 135, 1, 89),\n(503, 124, 176, 0, 2.5),\n(504, 124, 427, 0, 2.5),\n(505, 125, 280, 0, 19.6),\n(506, 125, 376, 1, 60.3),\n(507, 125, 402, 1, 19.6),\n(508, 126, 110, 1, 0),\n(509, 126, 386, 1, 85),\n(510, 126, 456, 0, 15),\n(511, 127, 43, 0, 1.4),\n(512, 127, 220, 1, 81.6),\n(513, 127, 337, 0, 7),\n(514, 127, 352, 0, 8.1),\n(515, 127, 433, 0, 1.1),\n(516, 128, 119, 1, 4.2),\n(517, 128, 135, 1, 2.3),\n(518, 128, 176, 0, 4.6),\n(519, 128, 234, 1, 64.4),\n(520, 128, 339, 0, 13),\n(521, 129, 43, 0, 4.1),\n(522, 129, 217, 1, 55.1),\n(523, 129, 220, 0, 1.2),\n(524, 129, 337, 0, 2.1),\n(525, 129, 352, 0, 32.5),\n(526, 129, 433, 0, 2.9),\n(527, 130, 62, 0, 85.6),\n(528, 130, 110, 0, 0.5),\n(529, 130, 253, 0, 1.2),\n(530, 130, 339, 1, 2.3),\n(531, 131, 15, 1, 65),\n(532, 131, 46, 0, 33),\n(533, 132, 110, 0, 6.5),\n(534, 132, 119, 1, 41.9),\n(535, 132, 176, 0, 16.1),\n(536, 132, 285, 0, 16.1),\n(537, 133, 55, 0, 1.6),\n(538, 133, 128, 0, 3.2),\n(539, 133, 348, 1, 61.9),\n(540, 133, 352, 0, 23.2),\n(541, 133, 433, 0, 8.6),\n(542, 134, 119, 1, 0),\n(543, 134, 243, 1, 98.9),\n(544, 135, 98, 1, 100),\n(545, 135, 110, 0, 0),\n(546, 136, 281, 0, 0.6),\n(547, 136, 317, 0, 1.8),\n(548, 136, 321, 0, 0.4),\n(549, 136, 389, 1, 92.1),\n(550, 136, 451, 0, 1.1),\n(551, 136, 453, 0, 0.6),\n(552, 137, 110, 1, 0),\n(553, 137, 264, 1, 96.8),\n(554, 138, 10, 0, 22.9),\n(555, 138, 235, 1, 66.5),\n(556, 138, 347, 0, 2.3),\n(557, 138, 366, 0, 2),\n(558, 138, 427, 0, 4),\n(559, 139, 32, 0, 31.8),\n(560, 139, 123, 0, 13.9),\n(561, 139, 365, 0, 12),\n(562, 139, 382, 0, 6.9),\n(563, 139, 384, 0, 8.7),\n(564, 139, 401, 0, 7.3),\n(565, 140, 110, 1, 2.1),\n(566, 140, 249, 1, 95.8),\n(567, 141, 58, 1, 69),\n(568, 141, 76, 0, 2.2),\n(569, 141, 181, 0, 1.4),\n(570, 141, 188, 0, 6.2),\n(571, 141, 190, 0, 0.4),\n(572, 141, 283, 0, 2.4),\n(573, 141, 345, 0, 4.5),\n(574, 141, 370, 0, 8.5),\n(575, 142, 26, 0, 1.9),\n(576, 142, 59, 0, 1.7),\n(577, 142, 97, 0, 1.4),\n(578, 142, 102, 0, 2.7),\n(579, 142, 191, 0, 5.9),\n(580, 142, 287, 1, 78.8),\n(581, 143, 65, 0, 4.8),\n(582, 143, 70, 0, 30),\n(583, 143, 77, 0, 7.1),\n(584, 143, 110, 1, 4.8),\n(585, 143, 205, 0, 6.5),\n(586, 143, 333, 0, 34.1),\n(587, 144, 80, 0, 5.7),\n(588, 144, 222, 0, 7.8),\n(589, 144, 242, 0, 27.8),\n(590, 144, 261, 0, 3.5),\n(591, 144, 315, 0, 3.3),\n(592, 144, 350, 0, 3.7),\n(593, 144, 364, 0, 9.4),\n(594, 144, 371, 0, 6.5),\n(595, 144, 421, 0, 12.4),\n(596, 144, 422, 0, 6),\n(597, 145, 123, 0, 1.2),\n(598, 145, 157, 0, 81.7),\n(599, 145, 384, 0, 2.7),\n(600, 145, 425, 0, 5.4),\n(601, 145, 445, 0, 6.6),\n(602, 145, 454, 0, 1.2),\n(603, 146, 110, 1, 0),\n(604, 147, 89, 0, 96.6),\n(605, 147, 119, 1, 0),\n(606, 148, 47, 0, 21.1),\n(607, 148, 89, 0, 70.6),\n(608, 148, 119, 0, 3.4),\n(609, 148, 164, 0, 1.2),\n(610, 148, 260, 0, 0.7),\n(611, 148, 402, 0, 0.8),\n(612, 149, 74, 1, 58.3),\n(613, 149, 222, 0, 18.4),\n(614, 149, 303, 0, 6.7),\n(615, 149, 448, 0, 13.2),\n(616, 150, 77, 0, 9),\n(617, 150, 104, 0, 1.1),\n(618, 150, 110, 0, 1.6),\n(619, 150, 168, 0, 2.8),\n(620, 150, 245, 1, 58.4),\n(621, 150, 402, 0, 3.9),\n(622, 151, 119, 1, 20.3),\n(623, 151, 238, 0, 41.9),\n(624, 151, 243, 0, 16.1),\n(625, 152, 5, 0, 9.5),\n(626, 152, 63, 0, 4.7),\n(627, 152, 135, 0, 0.9),\n(628, 152, 162, 0, 8),\n(629, 152, 189, 0, 9.7),\n(630, 152, 295, 0, 12.4),\n(631, 152, 323, 0, 50.7),\n(632, 152, 358, 0, 1.9),\n(633, 153, 119, 1, 34.3),\n(634, 153, 247, 0, 45.4),\n(635, 153, 338, 0, 11.6),\n(636, 154, 123, 0, 9.7),\n(637, 154, 158, 0, 53.1),\n(638, 154, 186, 0, 4.4),\n(639, 154, 383, 0, 21.2),\n(640, 154, 401, 0, 10.4),\n(641, 155, 110, 1, 0),\n(642, 156, 57, 0, 1.6),\n(643, 156, 108, 0, 3.3),\n(644, 156, 123, 0, 11.3),\n(645, 156, 158, 0, 21.1),\n(646, 156, 169, 0, 5.6),\n(647, 156, 170, 0, 18.1),\n(648, 156, 172, 0, 1.8),\n(649, 156, 179, 0, 21.4),\n(650, 156, 186, 0, 4.1),\n(651, 156, 416, 0, 2.3),\n(652, 157, 88, 0, 0.5),\n(653, 157, 279, 0, 1.6),\n(654, 157, 389, 1, 97.6),\n(655, 157, 391, 0, 0.2),\n(656, 158, 110, 1, 0),\n(657, 158, 304, 0, 0),\n(658, 159, 15, 0, 0.9),\n(659, 159, 105, 1, 95.6),\n(660, 159, 120, 0, 3.7),\n(661, 159, 427, 0, 0.8),\n(662, 160, 95, 0, 0.4),\n(663, 160, 110, 0, 0.5),\n(664, 160, 307, 1, 96.6),\n(665, 160, 354, 0, 0),\n(666, 160, 396, 0, 0.3),\n(667, 161, 47, 0, 7.5),\n(668, 161, 164, 0, 3),\n(669, 161, 239, 0, 11.9),\n(670, 161, 299, 1, 50.4),\n(671, 161, 300, 0, 3.7),\n(672, 161, 400, 0, 4.9),\n(673, 161, 410, 0, 5.4),\n(674, 162, 77, 0, 8.5),\n(675, 162, 110, 1, 7.5),\n(676, 162, 200, 0, 17.9),\n(677, 162, 297, 1, 57.5),\n(678, 162, 429, 0, 8.5),\n(679, 163, 110, 1, 87),\n(680, 163, 258, 0, 4.3),\n(681, 164, 15, 1, 76.7),\n(682, 164, 31, 0, 0),\n(683, 165, 31, 0, 3),\n(684, 165, 52, 0, 1.2),\n(685, 165, 165, 0, 2.4),\n(686, 165, 331, 0, 13.1),\n(687, 165, 340, 0, 48.2),\n(688, 165, 362, 0, 9.8),\n(689, 165, 375, 0, 11.8),\n(690, 165, 435, 1, 7.6),\n(691, 166, 15, 0, 0.6),\n(692, 166, 88, 0, 14),\n(693, 166, 91, 0, 2),\n(694, 166, 109, 0, 0.6),\n(695, 166, 146, 0, 5.3),\n(696, 166, 389, 1, 76.8),\n(697, 167, 335, 0, 0),\n(698, 168, 6, 1, 2.3),\n(699, 168, 193, 1, 16.4),\n(700, 168, 389, 1, 79.8),\n(701, 169, 48, 0, 5.7),\n(702, 169, 67, 0, 23.3),\n(703, 169, 163, 0, 9.1),\n(704, 169, 173, 0, 9.3),\n(705, 169, 237, 0, 1.4),\n(706, 169, 259, 0, 1.3),\n(707, 169, 327, 0, 3),\n(708, 169, 328, 0, 1.8),\n(709, 169, 334, 1, 29.3),\n(710, 169, 441, 0, 3.8),\n(711, 170, 77, 0, 1.6),\n(712, 170, 110, 1, 3.2),\n(713, 170, 326, 1, 82.2),\n(714, 170, 333, 0, 9.2),\n(715, 171, 247, 0, 20),\n(716, 171, 330, 0, 78.1),\n(717, 172, 43, 0, 0.5),\n(718, 172, 135, 0, 1.3),\n(719, 172, 337, 1, 97.6),\n(720, 172, 433, 0, 0.6),\n(721, 173, 110, 0, 47.4),\n(722, 173, 389, 1, 51.3),\n(723, 174, 77, 0, 0.1),\n(724, 174, 205, 1, 99.9),\n(725, 175, 339, 1, 99),\n(726, 176, 135, 0, 0.9),\n(727, 176, 145, 1, 40.1),\n(728, 176, 339, 0, 3.2),\n(729, 176, 389, 1, 55.1),\n(730, 177, 15, 0, 95.9),\n(731, 177, 160, 0, 4.1),\n(732, 178, 77, 0, 2.9),\n(733, 178, 119, 1, 40.8),\n(734, 178, 399, 0, 46.4),\n(735, 179, 15, 1, 40.7),\n(736, 179, 435, 0, 0),\n(737, 180, 77, 0, 2.8),\n(738, 180, 83, 0, 2.8),\n(739, 180, 89, 0, 91.5),\n(740, 180, 243, 0, 1.4),\n(741, 180, 402, 0, 0),\n(742, 181, 135, 0, 0.4),\n(743, 181, 167, 0, 7.2),\n(744, 181, 347, 1, 0.7),\n(745, 181, 348, 1, 90.7),\n(746, 181, 366, 0, 0.1),\n(747, 181, 433, 0, 0.3),\n(748, 182, 24, 0, 0.4),\n(749, 182, 38, 0, 0.7),\n(750, 182, 43, 0, 0.3),\n(751, 182, 71, 0, 0.6),\n(752, 182, 81, 0, 0.9),\n(753, 182, 191, 0, 0.4),\n(754, 182, 262, 0, 0.4),\n(755, 182, 289, 0, 0.5),\n(756, 182, 352, 1, 86.6),\n(757, 182, 404, 0, 3.2),\n(758, 182, 431, 0, 0.3),\n(759, 182, 433, 0, 1.3),\n(760, 183, 119, 1, 0),\n(761, 183, 353, 1, 100),\n(762, 184, 15, 1, 95),\n(763, 185, 15, 1, 49.4),\n(764, 185, 36, 0, 2.5),\n(765, 185, 42, 0, 6.4),\n(766, 185, 75, 0, 1.7),\n(767, 185, 99, 0, 11.5),\n(768, 185, 124, 0, 2.1),\n(769, 185, 223, 0, 1.5),\n(770, 185, 309, 0, 8.1),\n(771, 185, 310, 0, 4.9),\n(772, 185, 452, 0, 2.7),\n(773, 186, 100, 0, 5),\n(774, 186, 123, 0, 21.7),\n(775, 186, 248, 0, 3.8),\n(776, 186, 367, 0, 12.5),\n(777, 186, 384, 0, 1.3),\n(778, 186, 445, 1, 48.1),\n(779, 187, 77, 1, 77.1),\n(780, 187, 245, 1, 14.1),\n(781, 187, 402, 1, 7.4),\n(782, 189, 110, 1, 0),\n(783, 190, 307, 1, 0),\n(784, 190, 352, 0, 0),\n(785, 191, 247, 0, 85.6),\n(786, 191, 330, 0, 8.6),\n(787, 191, 338, 0, 3.8),\n(788, 192, 56, 0, 3.8),\n(789, 192, 123, 0, 3.8),\n(790, 192, 204, 0, 5.1),\n(791, 192, 210, 0, 3.4),\n(792, 192, 219, 0, 8.3),\n(793, 192, 274, 0, 34.8),\n(794, 192, 407, 0, 31.8),\n(795, 192, 447, 0, 3.4),\n(796, 193, 294, 0, 0),\n(797, 193, 389, 1, 100),\n(798, 194, 176, 1, 100),\n(799, 195, 15, 1, 0),\n(800, 195, 380, 1, 98.3),\n(801, 196, 119, 1, 0),\n(802, 197, 90, 0, 86.3),\n(803, 197, 119, 0, 0.7),\n(804, 198, 164, 0, 0),\n(805, 198, 390, 0, 81),\n(806, 199, 93, 0, 1.1),\n(807, 199, 167, 0, 10.5),\n(808, 199, 347, 0, 1.7),\n(809, 199, 377, 1, 85.6),\n(810, 199, 434, 0, 0.6),\n(811, 200, 167, 0, 0.5),\n(812, 200, 366, 0, 7.9),\n(813, 200, 378, 1, 87.9),\n(814, 201, 15, 0, 0.8),\n(815, 201, 117, 0, 2.4),\n(816, 201, 307, 0, 0.5),\n(817, 201, 387, 0, 1.3),\n(818, 201, 389, 0, 0.6),\n(819, 201, 396, 1, 89.5),\n(820, 202, 395, 1, 89.9),\n(821, 202, 456, 0, 2),\n(822, 203, 110, 1, 3.8),\n(823, 203, 119, 1, 1.3),\n(824, 203, 368, 0, 91.3),\n(825, 204, 15, 1, 90),\n(826, 204, 211, 0, 9),\n(827, 205, 110, 1, 0),\n(828, 206, 15, 1, 12.3),\n(829, 206, 141, 0, 6.2),\n(830, 206, 154, 0, 6.7),\n(831, 206, 184, 0, 9),\n(832, 206, 268, 0, 11.5),\n(833, 206, 322, 0, 8.7),\n(834, 206, 361, 0, 27.7),\n(835, 206, 403, 0, 6.5),\n(836, 207, 14, 0, 5.7),\n(837, 207, 113, 1, 23.2),\n(838, 207, 150, 0, 3.4),\n(839, 207, 180, 1, 13.8),\n(840, 207, 207, 0, 5.7),\n(841, 207, 282, 0, 5.4),\n(842, 207, 296, 0, 4.1),\n(843, 207, 443, 0, 10.3),\n(844, 208, 77, 0, 12.1),\n(845, 208, 195, 0, 1.3),\n(846, 208, 212, 0, 1.1),\n(847, 208, 215, 0, 26.9),\n(848, 208, 245, 0, 3.6),\n(849, 208, 409, 1, 52.6),\n(850, 209, 352, 0, 9.7),\n(851, 209, 397, 1, 62.2),\n(852, 209, 436, 0, 23.2),\n(853, 210, 110, 1, 0),\n(854, 210, 417, 0, 0),\n(855, 211, 191, 0, 2),\n(856, 211, 352, 0, 6.7),\n(857, 211, 428, 1, 76.7),\n(858, 211, 436, 0, 9.2),\n(859, 212, 339, 1, 0),\n(860, 212, 392, 0, 0),\n(861, 213, 110, 1, 0),\n(862, 213, 418, 1, 98.3),\n(863, 214, 88, 0, 2.9),\n(864, 214, 110, 0, 93.5),\n(865, 214, 164, 0, 3.4),\n(866, 215, 15, 1, 69.9),\n(867, 215, 16, 0, 26.3),\n(868, 215, 17, 0, 3.2),\n(869, 216, 15, 0, 1.4),\n(870, 216, 211, 0, 10.6),\n(871, 216, 427, 1, 87.6),\n(872, 217, 110, 1, 0),\n(873, 217, 200, 0, 7.5),\n(874, 217, 429, 1, 92.5),\n(875, 218, 13, 0, 0.6),\n(876, 218, 23, 0, 0.4),\n(877, 218, 156, 0, 11),\n(878, 218, 253, 1, 20.1),\n(879, 218, 277, 0, 66.7),\n(880, 218, 325, 0, 0.3),\n(881, 219, 68, 0, 4.9),\n(882, 219, 140, 0, 3.9),\n(883, 219, 152, 0, 3.5),\n(884, 219, 159, 0, 5.9),\n(885, 219, 161, 0, 6.9),\n(886, 219, 228, 0, 4.9),\n(887, 219, 241, 0, 5.9),\n(888, 219, 312, 0, 5.4),\n(889, 219, 313, 0, 21.1),\n(890, 219, 369, 0, 4.3),\n(891, 219, 394, 1, 8.8),\n(892, 220, 2, 0, 4.4),\n(893, 220, 130, 0, 18.1),\n(894, 220, 138, 0, 4.5),\n(895, 220, 197, 0, 8.3),\n(896, 220, 214, 0, 5.9),\n(897, 220, 227, 0, 4.7),\n(898, 220, 305, 0, 10.7),\n(899, 220, 353, 0, 3.2),\n(900, 220, 379, 0, 8.2),\n(901, 220, 408, 0, 6),\n(902, 221, 43, 0, 0.3),\n(903, 221, 55, 0, 0.3),\n(904, 221, 167, 0, 0.3),\n(905, 221, 337, 0, 0.1),\n(906, 221, 348, 0, 0.7),\n(907, 221, 352, 0, 32.9),\n(908, 221, 433, 1, 64.7),\n(909, 222, 110, 1, 0),\n(910, 223, 389, 1, 95.7),\n(911, 224, 77, 0, 0.6),\n(912, 224, 110, 1, 86.2),\n(913, 224, 119, 0, 0.7),\n(914, 224, 135, 0, 0.7),\n(915, 224, 176, 0, 0.6),\n(916, 224, 177, 0, 0.2),\n(917, 224, 205, 0, 0.3),\n(918, 224, 337, 0, 0.3),\n(919, 224, 339, 0, 0.2),\n(920, 224, 389, 0, 7.5),\n(921, 224, 398, 0, 0.4),\n(922, 224, 438, 0, 0.2),\n(923, 225, 187, 0, 2),\n(924, 225, 191, 0, 3.8),\n(925, 225, 352, 0, 10.9),\n(926, 225, 397, 0, 4.4),\n(927, 225, 404, 0, 1.8),\n(928, 225, 436, 1, 72.6),\n(929, 226, 176, 1, 0),\n(930, 227, 88, 0, 99.1),\n(931, 227, 110, 1, 0),\n(932, 228, 139, 0, 0.4),\n(933, 228, 389, 1, 96.9),\n(934, 228, 442, 0, 0.1),\n(935, 229, 110, 1, 0),\n(936, 230, 110, 1, 81.7),\n(937, 230, 119, 0, 2.5),\n(938, 230, 389, 0, 13.3),\n(939, 231, 77, 0, 1.4),\n(940, 231, 195, 0, 1.4),\n(941, 231, 251, 0, 0.7),\n(942, 231, 276, 0, 0.9),\n(943, 231, 293, 0, 1.5),\n(944, 231, 311, 0, 1.1),\n(945, 231, 409, 0, 1.6),\n(946, 231, 411, 0, 1.8),\n(947, 231, 438, 1, 86.8),\n(948, 232, 50, 1, 56.6),\n(949, 232, 110, 1, 28.3),\n(950, 232, 119, 1, 14.2),\n(951, 233, 125, 0, 0),\n(952, 233, 440, 0, 0),\n(953, 234, 110, 1, 0.6),\n(954, 234, 356, 1, 47.5),\n(955, 234, 357, 0, 52),\n(956, 235, 15, 1, 99.6),\n(957, 235, 385, 0, 0),\n(958, 236, 10, 0, 16.5),\n(959, 236, 167, 0, 3.4),\n(960, 236, 235, 0, 0.5),\n(961, 236, 347, 0, 1.4),\n(962, 236, 366, 1, 75.2),\n(963, 236, 377, 0, 0.7),\n(964, 237, 5, 1, 14.3),\n(965, 237, 110, 1, 8.5),\n(966, 237, 298, 0, 1.5),\n(967, 237, 306, 0, 9.1),\n(968, 237, 388, 0, 7.6),\n(969, 237, 395, 0, 2.5),\n(970, 237, 421, 0, 4.3),\n(971, 237, 423, 0, 8.1),\n(972, 237, 437, 0, 2.2),\n(973, 237, 446, 1, 17.7),\n(974, 237, 456, 1, 22.7),\n(975, 238, 44, 0, 29.7),\n(976, 238, 72, 0, 5.7),\n(977, 238, 224, 0, 6.4),\n(978, 238, 308, 0, 4.3),\n(979, 238, 315, 0, 7.8),\n(980, 238, 418, 0, 11),\n(981, 239, 110, 1, 2.2),\n(982, 239, 298, 0, 16.2),\n(983, 239, 315, 0, 2.2),\n(984, 239, 371, 0, 72.1);\n\n-- --------------------------------------------------------\n\n--\n-- Tábla szerkezet ehhez a táblához `languages`\n--\n\nCREATE TABLE `languages` (\n  `id` int NOT NULL,\n  `name` varchar(255) NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\n--\n-- A tábla adatainak kiíratása `languages`\n--\n\nINSERT INTO `languages` (`id`, `name`) VALUES\n(1, 'Abhyasi'),\n(2, 'Acholi'),\n(3, 'Adja'),\n(4, 'Afar'),\n(5, 'Afrikaans'),\n(6, 'Aimará'),\n(7, 'Ainu'),\n(8, 'Aizo'),\n(9, 'Akan'),\n(10, 'Albaniana'),\n(11, 'Ambo'),\n(12, 'Amhara'),\n(13, 'Ami'),\n(14, 'Ane'),\n(15, 'Arabic'),\n(16, 'Arabic-French'),\n(17, 'Arabic-French-English'),\n(18, 'Araucan'),\n(19, 'Arawakan'),\n(20, 'Armenian'),\n(21, 'Asami'),\n(22, 'Assyrian'),\n(23, 'Atayal'),\n(24, 'Avarian'),\n(25, 'Azerbaijani'),\n(26, 'Bajad'),\n(27, 'Bajan'),\n(28, 'Bakhtyari'),\n(29, 'Balante'),\n(30, 'Bali'),\n(31, 'Balochi'),\n(32, 'Bambara'),\n(33, 'Bamileke-bamum'),\n(34, 'Banda'),\n(35, 'Banja'),\n(36, 'Bari'),\n(37, 'Bariba'),\n(38, 'Bashkir'),\n(39, 'Basque'),\n(40, 'Bassa'),\n(41, 'Batakki'),\n(42, 'Beja'),\n(43, 'Belorussian'),\n(44, 'Bemba'),\n(45, 'Bengali'),\n(46, 'Berberi'),\n(47, 'Bhojpuri'),\n(48, 'Bicol'),\n(49, 'Bilin'),\n(50, 'Bislama'),\n(51, 'Boa'),\n(52, 'Brahui'),\n(53, 'Bubi'),\n(54, 'Bugi'),\n(55, 'Bulgariana'),\n(56, 'Bullom-sherbro'),\n(57, 'Bura'),\n(58, 'Burmese'),\n(59, 'Buryat'),\n(60, 'Busansi'),\n(61, 'Cakchiquel'),\n(62, 'Canton Chinese'),\n(63, 'Caprivi'),\n(64, 'Caribbean'),\n(65, 'Carolinian'),\n(66, 'Catalan'),\n(67, 'Cebuano'),\n(68, 'Chaga and Pare'),\n(69, 'Chakma'),\n(70, 'Chamorro'),\n(71, 'Chechen'),\n(72, 'Chewa'),\n(73, 'Chibcha'),\n(74, 'Chichewa'),\n(75, 'Chilluk'),\n(76, 'Chin'),\n(77, 'Chinese'),\n(78, 'Chiu chau'),\n(79, 'Chokwe'),\n(80, 'Chuabo'),\n(81, 'Chuvash'),\n(82, 'Circassian'),\n(83, 'Comorian'),\n(84, 'Comorian-Arabic'),\n(85, 'Comorian-French'),\n(86, 'Comorian-Swahili'),\n(87, 'Comorian-madagassi'),\n(88, 'Creole English'),\n(89, 'Creole French'),\n(90, 'Crioulo'),\n(91, 'Cuna'),\n(92, 'Czech'),\n(93, 'Czech and Moravian'),\n(94, 'Dagara'),\n(95, 'Danish'),\n(96, 'Dari'),\n(97, 'Dariganga'),\n(98, 'Dhivehi'),\n(99, 'Dinka'),\n(100, 'Diola'),\n(101, 'Dong'),\n(102, 'Dorbet'),\n(103, 'Duala'),\n(104, 'Dusun'),\n(105, 'Dutch'),\n(106, 'Dyula'),\n(107, 'Dzongkha'),\n(108, 'Edo'),\n(109, 'Embera'),\n(110, 'English'),\n(111, 'Eskimo Languages'),\n(112, 'Estonian'),\n(113, 'Ewe'),\n(114, 'Fang'),\n(115, 'Faroese'),\n(116, 'Fijian'),\n(117, 'Finnish'),\n(118, 'Fon'),\n(119, 'French'),\n(120, 'Fries'),\n(121, 'Friuli'),\n(122, 'Fukien'),\n(123, 'Ful'),\n(124, 'Fur'),\n(125, 'Futuna'),\n(126, 'Ga-adangme'),\n(127, 'Gaeli'),\n(128, 'Gagauzi'),\n(129, 'Galecian'),\n(130, 'Ganda'),\n(131, 'Garifuna'),\n(132, 'Garo'),\n(133, 'Gbaya'),\n(134, 'Georgiana'),\n(135, 'German'),\n(136, 'Gilaki'),\n(137, 'Gio'),\n(138, 'Gisu'),\n(139, 'Goajiro'),\n(140, 'Gogo'),\n(141, 'Gorane'),\n(142, 'Grebo'),\n(143, 'Greek'),\n(144, 'Greenlandic'),\n(145, 'Guaraní'),\n(146, 'Guaymí'),\n(147, 'Gujarati'),\n(148, 'Gur'),\n(149, 'Gurage'),\n(150, 'Gurma'),\n(151, 'Gusii'),\n(152, 'Ha'),\n(153, 'Hadareb'),\n(154, 'Hadjarai'),\n(155, 'Haiti Creole'),\n(156, 'Hakka'),\n(157, 'Hassaniya'),\n(158, 'Hausa'),\n(159, 'Haya'),\n(160, 'Hebrew'),\n(161, 'Hehet'),\n(162, 'Herero'),\n(163, 'Hiligaynon'),\n(164, 'Hindi'),\n(165, 'Hindko'),\n(166, 'Hui'),\n(167, 'Hungarian'),\n(168, 'Iban'),\n(169, 'Ibibio'),\n(170, 'Ibo'),\n(171, 'Icelandic'),\n(172, 'Ijo'),\n(173, 'Ilocano'),\n(174, 'Indian Languages'),\n(175, 'Irish'),\n(176, 'Italian'),\n(177, 'Japanese'),\n(178, 'Javanese'),\n(179, 'Joruba'),\n(180, 'Kabyé'),\n(181, 'Kachin'),\n(182, 'Kalenjin'),\n(183, 'Kamba'),\n(184, 'Kanem-bornu'),\n(185, 'Kannada'),\n(186, 'Kanuri'),\n(187, 'Karakalpak'),\n(188, 'Karen'),\n(189, 'Kavango'),\n(190, 'Kayah'),\n(191, 'Kazakh'),\n(192, 'Kekchí'),\n(193, 'Ketšua'),\n(194, 'Khasi'),\n(195, 'Khmer'),\n(196, 'Khoekhoe'),\n(197, 'Kiga'),\n(198, 'Kikuyu'),\n(199, 'Kirgiz'),\n(200, 'Kiribati'),\n(201, 'Kirundi'),\n(202, 'Kissi'),\n(203, 'Kongo'),\n(204, 'Kono-vai'),\n(205, 'Korean'),\n(206, 'Kosrean'),\n(207, 'Kotokoli'),\n(208, 'Kpelle'),\n(209, 'Kru'),\n(210, 'Kuranko'),\n(211, 'Kurdish'),\n(212, 'Kuy'),\n(213, 'Kymri'),\n(214, 'Lango'),\n(215, 'Lao'),\n(216, 'Lao-Soung'),\n(217, 'Latvian'),\n(218, 'Lezgian'),\n(219, 'Limba'),\n(220, 'Lithuanian'),\n(221, 'Loma'),\n(222, 'Lomwe'),\n(223, 'Lotuko'),\n(224, 'Lozi'),\n(225, 'Luba'),\n(226, 'Luchazi'),\n(227, 'Lugbara'),\n(228, 'Luguru'),\n(229, 'Luhya'),\n(230, 'Luimbe-nganguela'),\n(231, 'Luo'),\n(232, 'Luri'),\n(233, 'Luvale'),\n(234, 'Luxembourgish'),\n(235, 'Macedonian'),\n(236, 'Madura'),\n(237, 'Maguindanao'),\n(238, 'Mahoré'),\n(239, 'Maithili'),\n(240, 'Maka'),\n(241, 'Makonde'),\n(242, 'Makua'),\n(243, 'Malagasy'),\n(244, 'Malajalam'),\n(245, 'Malay'),\n(246, 'Malay-English'),\n(247, 'Malenasian Languages'),\n(248, 'Malinke'),\n(249, 'Maltese'),\n(250, 'Mam'),\n(251, 'Man'),\n(252, 'Mandara'),\n(253, 'Mandarin Chinese'),\n(254, 'Mandjia'),\n(255, 'Mandyako'),\n(256, 'Mano'),\n(257, 'Mantšu'),\n(258, 'Maori'),\n(259, 'Maranao'),\n(260, 'Marathi'),\n(261, 'Marendje'),\n(262, 'Mari'),\n(263, 'Marma'),\n(264, 'Marshallese'),\n(265, 'Masai'),\n(266, 'Masana'),\n(267, 'Maya Languages'),\n(268, 'Mayo-kebbi'),\n(269, 'Mazandarani'),\n(270, 'Mbete'),\n(271, 'Mboshi'),\n(272, 'Mbum'),\n(273, 'Mbundu'),\n(274, 'Mende'),\n(275, 'Meru'),\n(276, 'Miao'),\n(277, 'Min'),\n(278, 'Minangkabau'),\n(279, 'Miskito'),\n(280, 'Mixed Languages'),\n(281, 'Mixtec'),\n(282, 'Moba'),\n(283, 'Mon'),\n(284, 'Mon-khmer'),\n(285, 'Monegasque'),\n(286, 'Mongo'),\n(287, 'Mongolian'),\n(288, 'Moravian'),\n(289, 'Mordva'),\n(290, 'Mortlock'),\n(291, 'Mossi'),\n(292, 'Mpongwe'),\n(293, 'Muong'),\n(294, 'Nahua'),\n(295, 'Nama'),\n(296, 'Naudemba'),\n(297, 'Nauru'),\n(298, 'Ndebele'),\n(299, 'Nepali'),\n(300, 'Newari'),\n(301, 'Ngala and Bangi'),\n(302, 'Ngbaka'),\n(303, 'Ngoni'),\n(304, 'Niue'),\n(305, 'Nkole'),\n(306, 'Northsotho'),\n(307, 'Norwegian'),\n(308, 'Nsenga'),\n(309, 'Nubian Languages'),\n(310, 'Nuer'),\n(311, 'Nung'),\n(312, 'Nyakusa'),\n(313, 'Nyamwesi'),\n(314, 'Nyaneka-nkhumbi'),\n(315, 'Nyanja'),\n(316, 'Nyika'),\n(317, 'Náhuatl'),\n(318, 'Orija'),\n(319, 'Oromo'),\n(320, 'Osseetti'),\n(321, 'Otomí'),\n(322, 'Ouaddai'),\n(323, 'Ovambo'),\n(324, 'Ovimbundu'),\n(325, 'Paiwan'),\n(326, 'Palau'),\n(327, 'Pampango'),\n(328, 'Pangasinan'),\n(329, 'Papiamento'),\n(330, 'Papuan Languages'),\n(331, 'Pashto'),\n(332, 'Persian'),\n(333, 'Philippene Languages'),\n(334, 'Pilipino'),\n(335, 'Pitcairnese'),\n(336, 'Pohnpei'),\n(337, 'Polish'),\n(338, 'Polynesian Languages'),\n(339, 'Portuguese'),\n(340, 'Punjabi'),\n(341, 'Punu'),\n(342, 'Punu-sira-nzebi'),\n(343, 'Puyi'),\n(344, 'Quiché'),\n(345, 'Rakhine'),\n(346, 'Rapa nui'),\n(347, 'Romani'),\n(348, 'Romanian'),\n(349, 'Romansh'),\n(350, 'Ronga'),\n(351, 'Rundi'),\n(352, 'Russian'),\n(353, 'Rwanda'),\n(354, 'Saame'),\n(355, 'Saho'),\n(356, 'Samoan'),\n(357, 'Samoan-English'),\n(358, 'San'),\n(359, 'Sango'),\n(360, 'Santhali'),\n(361, 'Sara'),\n(362, 'Saraiki'),\n(363, 'Sardinian'),\n(364, 'Sena'),\n(365, 'Senufo and Minianka'),\n(366, 'Serbo-Croatian'),\n(367, 'Serer'),\n(368, 'Seselwa'),\n(369, 'Shambala'),\n(370, 'Shan'),\n(371, 'Shona'),\n(372, 'Sidamo'),\n(373, 'Silesiana'),\n(374, 'Sinaberberi'),\n(375, 'Sindhi'),\n(376, 'Singali'),\n(377, 'Slovak'),\n(378, 'Slovene'),\n(379, 'Soga'),\n(380, 'Somali'),\n(381, 'Somba'),\n(382, 'Songhai'),\n(383, 'Songhai-zerma'),\n(384, 'Soninke'),\n(385, 'Soqutri'),\n(386, 'Sotho'),\n(387, 'Southern Slavic Languages'),\n(388, 'Southsotho'),\n(389, 'Spanish'),\n(390, 'Sranantonga'),\n(391, 'Sumo'),\n(392, 'Sunda'),\n(393, 'Susu'),\n(394, 'Swahili'),\n(395, 'Swazi'),\n(396, 'Swedish'),\n(397, 'Tadzhik'),\n(398, 'Tagalog'),\n(399, 'Tahitian'),\n(400, 'Tamang'),\n(401, 'Tamashek'),\n(402, 'Tamil'),\n(403, 'Tandjile'),\n(404, 'Tatar'),\n(405, 'Teke'),\n(406, 'Telugu'),\n(407, 'Temne'),\n(408, 'Teso'),\n(409, 'Thai'),\n(410, 'Tharu'),\n(411, 'Tho'),\n(412, 'Tibetan'),\n(413, 'Tigre'),\n(414, 'Tigrinja'),\n(415, 'Tikar'),\n(416, 'Tiv'),\n(417, 'Tokelau'),\n(418, 'Tongan'),\n(419, 'Tripuri'),\n(420, 'Trukese'),\n(421, 'Tsonga'),\n(422, 'Tswa'),\n(423, 'Tswana'),\n(424, 'Tujia'),\n(425, 'Tukulor'),\n(426, 'Turkana'),\n(427, 'Turkish'),\n(428, 'Turkmenian'),\n(429, 'Tuvalu'),\n(430, 'Tšam'),\n(431, 'Udmur'),\n(432, 'Uighur'),\n(433, 'Ukrainian'),\n(434, 'Ukrainian and Russian'),\n(435, 'Urdu'),\n(436, 'Uzbek'),\n(437, 'Venda'),\n(438, 'Vietnamese'),\n(439, 'Walaita'),\n(440, 'Wallis'),\n(441, 'Waray-waray'),\n(442, 'Warrau'),\n(443, 'Watyi'),\n(444, 'Wolea'),\n(445, 'Wolof'),\n(446, 'Xhosa'),\n(447, 'Yalunka'),\n(448, 'Yao'),\n(449, 'Yap'),\n(450, 'Yi'),\n(451, 'Yucatec'),\n(452, 'Zande'),\n(453, 'Zapotec'),\n(454, 'Zenaga'),\n(455, 'Zhuang'),\n(456, 'Zulu'),\n(457, '[South]Mande');\n\n-- --------------------------------------------------------\n\n--\n-- Tábla szerkezet ehhez a táblához `users`\n--\n\nCREATE TABLE `users` (\n  `id` int NOT NULL,\n  `email` varchar(255) NOT NULL,\n  `password` varchar(255) NOT NULL,\n  `createdAt` int NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n\n--\n-- A tábla adatainak kiíratása `users`\n--\n\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) VALUES\n(1, 'peldaEMail', 'peldaJelszo', 123);\n\n--\n-- Indexek a kiírt táblákhoz\n--\n\n--\n-- A tábla indexei `cities`\n--\nALTER TABLE `cities`\n  ADD PRIMARY KEY (`id`),\n  ADD KEY `countryId` (`countryId`);\n\n--\n-- A tábla indexei `countries`\n--\nALTER TABLE `countries`\n  ADD PRIMARY KEY (`id`);\n\n--\n-- A tábla indexei `countryLanguages`\n--\nALTER TABLE `countryLanguages`\n  ADD PRIMARY KEY (`id`);\n\n--\n-- A tábla indexei `languages`\n--\nALTER TABLE `languages`\n  ADD PRIMARY KEY (`id`);\n\n--\n-- A tábla indexei `users`\n--\nALTER TABLE `users`\n  ADD PRIMARY KEY (`id`);\n\n--\n-- A kiírt táblák AUTO_INCREMENT értéke\n--\n\n--\n-- AUTO_INCREMENT a táblához `cities`\n--\nALTER TABLE `cities`\n  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4080;\n\n--\n-- AUTO_INCREMENT a táblához `countries`\n--\nALTER TABLE `countries`\n  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=240;\n\n--\n-- AUTO_INCREMENT a táblához `countryLanguages`\n--\nALTER TABLE `countryLanguages`\n  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=985;\n\n--\n-- AUTO_INCREMENT a táblához `languages`\n--\nALTER TABLE `languages`\n  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=458;\n\n--\n-- AUTO_INCREMENT a táblához `users`\n--\nALTER TABLE `users`\n  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;\nCOMMIT;\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n"
   },
   {
      "timestamp":271.199,
      "fileName":"subscriptionForm.phtml",
      "content":""
   },
   {
      "timestamp":272.316,
      "fileName":"subscriptionForm.phtml",
      "content":"div"
   },
   {
      "timestamp":272.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div></div>"
   },
   {
      "timestamp":273.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div>\n</div>"
   },
   {
      "timestamp":274.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div cl>\n</div>"
   },
   {
      "timestamp":275.199,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class>\n</div>"
   },
   {
      "timestamp":275.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"\">\n</div>"
   },
   {
      "timestamp":275.699,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"\">\n</div>"
   },
   {
      "timestamp":275.85,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card \">\n</div>"
   },
   {
      "timestamp":276.316,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"ca\">\n</div>"
   },
   {
      "timestamp":276.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"car\">\n</div>"
   },
   {
      "timestamp":276.616,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"car\">\n</div>"
   },
   {
      "timestamp":277.25,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card \">\n</div>"
   },
   {
      "timestamp":277.3,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card \">\n</div>"
   },
   {
      "timestamp":278.85,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 \">\n</div>"
   },
   {
      "timestamp":278.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 \">\n</div>"
   },
   {
      "timestamp":279.1,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-\">\n</div>"
   },
   {
      "timestamp":279.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n</div>"
   },
   {
      "timestamp":279.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n</div>"
   },
   {
      "timestamp":279.916,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n</div>"
   },
   {
      "timestamp":280.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n\n</div>"
   },
   {
      "timestamp":281.033,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n\n</div>"
   },
   {
      "timestamp":281.683,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n<div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
   },
   {
      "timestamp":282.1,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n\n    </div>\n</div>"
   },
   {
      "timestamp":282.949,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    \n    </div>\n</div>"
   },
   {
      "timestamp":283.416,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
   },
   {
      "timestamp":283.949,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
   },
   {
      "timestamp":285.566,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
   },
   {
      "timestamp":288.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n"
   },
   {
      "timestamp":289.399,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\nform"
   },
   {
      "timestamp":289.949,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"\"></form>"
   },
   {
      "timestamp":291.383,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"\"></form>"
   },
   {
      "timestamp":292.333,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/r\"></form>"
   },
   {
      "timestamp":292.583,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/reg\"></form>"
   },
   {
      "timestamp":292.6,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/reg\"></form>"
   },
   {
      "timestamp":293.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\"></form>"
   },
   {
      "timestamp":293.6,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\"></form>"
   },
   {
      "timestamp":294.733,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" ></form>"
   },
   {
      "timestamp":295.566,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" met></form>"
   },
   {
      "timestamp":295.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"\"></form>"
   },
   {
      "timestamp":296.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"></form>"
   },
   {
      "timestamp":296.583,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"></form>"
   },
   {
      "timestamp":297.6,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n</form>"
   },
   {
      "timestamp":300.666,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"> \n</form>"
   },
   {
      "timestamp":303.3,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":307.616,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":308.333,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":309.149,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":310.866,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":312.566,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":312.683,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =>\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":313.133,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":313.216,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":313.55,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":314.699,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":314.766,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":314.8,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":315.416,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrat'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":315.883,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registration'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":316.016,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registration'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":316.883,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHa'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":317.483,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":317.533,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":319.166,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":319.183,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":319.833,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":320.149,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":320.283,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":320.633,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler()\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":320.933,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":321.333,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":321.883,
      "fileName":"index.php",
      "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    \n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":323.199,
      "fileName":"index.php",
      "content":"<?php\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":325.949,
      "fileName":"index.php",
      "content":"<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":326.449,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":327.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":328.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":330.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":333.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":338.283,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n</form>"
   },
   {
      "timestamp":339.433,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n</form>"
   },
   {
      "timestamp":339.833,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    \n</form>"
   },
   {
      "timestamp":341.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"text\">\n</form>"
   },
   {
      "timestamp":342.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"emai\">\n</form>"
   },
   {
      "timestamp":343.083,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\">\n</form>"
   },
   {
      "timestamp":343.416,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\">\n</form>"
   },
   {
      "timestamp":343.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" >\n</form>"
   },
   {
      "timestamp":343.783,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" >\n</form>"
   },
   {
      "timestamp":344.3,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=>\n</form>"
   },
   {
      "timestamp":344.433,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=>\n</form>"
   },
   {
      "timestamp":344.933,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"\">\n</form>"
   },
   {
      "timestamp":346.199,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
   },
   {
      "timestamp":346.3,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
   },
   {
      "timestamp":346.333,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
   },
   {
      "timestamp":346.783,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"email\" name=\"email\">\n</form>"
   },
   {
      "timestamp":348.183,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"pass\" name=\"email\">\n</form>"
   },
   {
      "timestamp":348.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"passwor\" name=\"email\">\n</form>"
   },
   {
      "timestamp":348.8,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
   },
   {
      "timestamp":348.949,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
   },
   {
      "timestamp":349.233,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
   },
   {
      "timestamp":350.216,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":354.333,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input  type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":355.283,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":356.066,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input  type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":356.699,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":357.899,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":358.966,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n    \n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":359.066,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n    \n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":359.966,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":360.233,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":361.833,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":361.966,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":362.3,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":363.116,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":363.649,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":363.699,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
   },
   {
      "timestamp":364.666,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    \n</form>"
   },
   {
      "timestamp":365.399,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </\n</form>"
   },
   {
      "timestamp":365.449,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </\n</form>"
   },
   {
      "timestamp":365.899,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
   },
   {
      "timestamp":366.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
   },
   {
      "timestamp":367.1,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
   },
   {
      "timestamp":367.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    b\n</form>"
   },
   {
      "timestamp":367.766,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    b\n</form>"
   },
   {
      "timestamp":368.199,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    button\n</form>"
   },
   {
      "timestamp":368.716,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button></button>\n</form>"
   },
   {
      "timestamp":370.333,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regi</button>\n</form>"
   },
   {
      "timestamp":370.833,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regiszt</button>\n</form>"
   },
   {
      "timestamp":371.166,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztr</button>\n</form>"
   },
   {
      "timestamp":371.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztrá</button>\n</form>"
   },
   {
      "timestamp":372,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztráció</button>\n</form>"
   },
   {
      "timestamp":372.116,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztráció</button>\n</form>"
   },
   {
      "timestamp":373.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button typ>Regisztráció</button>\n</form>"
   },
   {
      "timestamp":374.166,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":374.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"su\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":375.283,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit \">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":375.699,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":376.85,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" >Regisztráció</button>\n</form>"
   },
   {
      "timestamp":377.283,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":379.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":382.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":386.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":393.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":394.199,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":394.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":395.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":400.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    retur\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":400.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    retur\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":400.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":400.8,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":403.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":404.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":404.649,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":407.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":408.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":408.649,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":409.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compi\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":410.1,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compi\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":410.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate()\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":411.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":412,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":412.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":413.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":413.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":414.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":414.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", )\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":415.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":415.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        \n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":416.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        ''\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":417.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content'\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":417.149,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":417.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":417.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":417.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => com\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":418.449,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":418.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":423.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', )\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":423.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', )\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":424.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":425.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":435.55,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":439.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":442.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    va\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":442.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    va\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":443.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":443.449,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":444.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":445.449,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":446.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":446.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_P)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":446.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":447.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":448.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    \n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":449.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":449.949,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":450.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":450.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":451.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":451.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":464.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":465.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":467.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":475.149,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":478.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":482.149,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":482.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":482.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":484.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":487.149,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":487.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":488.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":488.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":489.1,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":489.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":490.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = get\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":490.6,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = get\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":490.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getCon\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":491.8,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":492.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":493.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":494.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":495.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":496.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":496.449,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":498.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->pre\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":499.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":500.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":503.05,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    \n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":504.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":505.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":506.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":506.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":507.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":507.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":514.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":516.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":517.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":520.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":522.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":523.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":526.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment$pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":526.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment$pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":527.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":528.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->exec\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":529.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":530.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":535.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":536.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":538.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":539.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)   \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":541.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":541.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":544.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":546.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"]\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":547.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":548.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":565.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pa\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":565.649,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pa\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":566.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pass\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":567.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":569.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"])\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":571.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], )\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":577.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PA)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":578.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASS)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":579.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":583.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":584.649,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":589.149,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        ti\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":589.6,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":590.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":616.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":617.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    he\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":617.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":618.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":618.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":619.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Loca')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":619.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":620.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":621,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":621.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":622.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":623,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":623.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":624.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":624.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":625.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":643.85,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":647.566,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":647.6,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":649.283,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":653.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":653.6,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":653.633,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":653.933,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":657.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">B</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":658.649,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejel</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":658.716,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejel</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":659.116,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentk</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":659.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentk</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":659.716,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":660.049,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":661.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-suc form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":661.666,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-su form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":662.233,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn- form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":662.716,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-pr form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":663.233,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":663.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":663.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":670.183,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":672.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":673.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":673.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":674.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":675.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":675.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":676.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":678.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":679.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":680,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":680.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":680.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHan'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":681.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":685.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfun\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":685.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfun\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":686.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":686.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":687.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":687.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":688.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":688.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":689.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":690.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":690.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":690.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":691.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":701.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":701.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":701.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":702.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":702.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":702.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":706.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":706.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":706.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":707.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":708.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":708.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":709.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":710.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment =\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":710.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":712.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":712.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":714.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":714.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":717.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":724.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":724.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":724.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":725.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT *\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":725.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":727,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":727.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":727.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM useres\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":727.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM useres\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":727.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":728.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users W\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":728.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":729.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":729.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":730.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":730.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":731.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":733.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":734.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $st\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":734.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $st\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":735.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":736.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":736.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->ex\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":736.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->exece\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":737.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":738.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":739.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":740.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":741.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":742.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":742.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":743.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":743.399,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":743.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":749.6,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":750.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":751,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":751.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":751.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":752.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":752.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":761.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":761.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $u$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":762.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":763.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":763.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":764.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":768.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":769.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":769.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":770.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":770.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":771.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":772.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":772.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":772.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":773.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":774.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":775.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\"\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":775.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\"\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":776.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":776.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":783.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":784.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":789.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":789.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":789.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":789.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":794.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":795.6,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":795.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":796.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":796.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FE);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":799.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":801.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    ec\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":801.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":801.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":802.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":802.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":803.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":803.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":821.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":822.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":822.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"pa\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":823.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":823.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":825.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":825.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":826.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":827.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":828.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":828.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":829.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":830.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[''])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":831.1,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['pas'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":831.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['passwo'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":832.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":832.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":833.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":844.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    \n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":851.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pa\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":851.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pass\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":852.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":856.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":857.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":859.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":860.399,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":863.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":868.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":869.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";"
   },
   {
      "timestamp":869.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":870.399,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerifiedpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":870.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerifiedpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":871.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":872.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    var_dump();\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":872.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":872.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":874,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":874.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":874.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":875.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":886,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":888.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":888.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":888.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":890.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":892.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":893.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":901.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":902.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":920.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":920.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":924.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    se\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":924.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    se\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":925.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    sess\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":926.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":926.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":926.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":927.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":927.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":928.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":928.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":942.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":942.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":943.35,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":943.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_S\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":945.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":950.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":951.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":952.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['user']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":953,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":953.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":953.399,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":955.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] =\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":955.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] =\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":955.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":956.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":957.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":957.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":958.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":958.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":959.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":961.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":963.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":971.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":971.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    head\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":972.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":972.649,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":972.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":973.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":975.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Lo')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":975.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Loca')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":975.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Loca')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":976.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":976.899,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: ')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":976.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: ')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":977.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":977.85,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /');\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":978.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1064.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1066.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1078.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1080.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    va\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1080.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1080.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1081.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump()\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1082.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1083.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_CO)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1083.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_CO)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1084.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1084.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1085.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1087.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1087.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1087.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1093.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1095.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE[]);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1095.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1096.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['PHPSESSID']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1099.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(i);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1100.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(is);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1100.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(is);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1101.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1101.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1102.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1103.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1104.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID']));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1110.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID']));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1111.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID' ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1113.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[se ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1114.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1114.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1114.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_ ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1115.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1115.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1115.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1116.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name() ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1117.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1127.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1128.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1129.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1131.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()]))\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1131.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()]))\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1132.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1132.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1132.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1146.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        se\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1147.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        sess\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1147.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        sess\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1148.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1148.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1155.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1155.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1156.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1157.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        v\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1157.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1158.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1159.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1160,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SER)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1160.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SER)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1160.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1169.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1172.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1173.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1173.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1175.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(i); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1175.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(i); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1176.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(is); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1177.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1177.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1177.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[''])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1178.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1178.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1179.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1181.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // vé\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1182.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1182.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1182.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1183.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1183.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalo\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1184.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1184.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom.\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1184.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1184.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1187.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1188.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1192.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1194.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1195.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1197.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1200.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\n\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1200.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\n\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1201.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction \n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1205.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction is\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1205.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLo\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1206.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1206.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1206.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1206.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn()\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1207.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn()\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1207.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1208.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1208.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1210.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1213.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bo {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1213.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bo {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1214.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1214.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1222.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1223.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1227.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n        \n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1228.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1230.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1230.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1231.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1232.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (isset($_SESSION['userId'])) {\n        // védett tartalom... \n    }\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1233.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        // védett tartalom... \n    }\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1235.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1236.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1237.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1237.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1238.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1238.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1239.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    \n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1241.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1241.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1241.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1242.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1242.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1247.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1248.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1250.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1251.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1254.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1255.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    \n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1256.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1256.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1257.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump()\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1257.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(is)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1258.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLo)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1259.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn())\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1260.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1262.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1274.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1274.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn())\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1275.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1275.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1275.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1276.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1276.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1277.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1279.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1282.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1283.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1285.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n    return;\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1285.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n    return;\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1285.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1286.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1287.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1287.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1287.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1288.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1289.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1289.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1291.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1328.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1330.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1333.916,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1333.95,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1334.049,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1334.533,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1335.033,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        butt\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1335.366,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        button\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1335.4,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        button\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1336.066,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button></button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1337.349,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kije</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1337.9,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1338.166,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1338.333,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1339,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1339.25,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1342.466,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1343.049,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nfor\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1343.5,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nform\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1343.549,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nform\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1344.816,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1346,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1347.766,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1347.933,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1347.966,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1348.683,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" m></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1348.849,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" m></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1349.216,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1349.783,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1350.666,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1350.833,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1351.166,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1351.466,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1351.95,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1356.049,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1356.166,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button ty>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1356.883,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1357.483,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1361.099,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1362.549,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1376.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1376.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1377.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1377.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1378.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1378.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1378.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1378.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1379.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'lo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1379.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1380.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1380.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1381.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1381.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1381.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1382.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1383.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1383.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1383.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1384.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1384.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1385.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1386.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1387.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1391.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1391.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1392.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    \n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1393.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    se\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1394.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1394.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1395.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_de\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1395.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_dest\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1396.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1396.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1399.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    he\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1400.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    head\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1400.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1401.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1401.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1402.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Lo')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1402.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1403.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1403.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1404.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1404.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1404.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1405.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1405.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1415.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1415.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1416.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1425.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1427.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    set\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1427.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setc\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1427.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setc\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1428.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie()\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1431.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(se)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1431.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(sess)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1432.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1433.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1436.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1436.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1436.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1437.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name())\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1442.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name());\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1443.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name()  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1443.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name()  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1444.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1445.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1445.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1450.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '' );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1450.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1451.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1451.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '' );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1453.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '',  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1454.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0 );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1455.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1467.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1470.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1471.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    ses\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1472.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1472.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1472.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1473.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params()\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1474.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1475.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1476.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $apsession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1477.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $asession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1477.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params =session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1478.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1478.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1480.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1481.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1484.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1484.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1487.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1490.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1491.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1513.65,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1514.599,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    \n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1514.766,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1515.599,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <??>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1515.816,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <??>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1516.433,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1516.516,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php  ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1516.816,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php i ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1517.566,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1517.799,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1517.916,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1518.816,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1519.733,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1519.816,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1520.766,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params[]) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1521.266,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1523.2,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isA']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1523.483,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAut']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1524,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthori']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1524.133,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthori']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1524.366,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1526.183,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1526.75,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1527.066,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1527.433,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1528.083,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1528.516,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <??>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1529.033,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1529.083,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1530.033,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php en?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1530.75,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1530.95,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1531.433,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif;?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1531.7,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1532.583,
      "fileName":"wrapper.phtml",
      "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']): ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
   },
   {
      "timestamp":1535.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1536.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1539.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        ''\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1541.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized'\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1542.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1542.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1542.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1543.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1543.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1545.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => is\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1545.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => is\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1546.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLo\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1546.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLo\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1547.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1551.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1554.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1558.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) { \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1560.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) { \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1560.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1562.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []) \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1563.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1563.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1564.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1565.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            ''\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1565.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized'\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1565.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1566.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1566.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1566.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1567.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1568.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1569.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1571.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1571.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1572.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1572.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1572.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1597.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1599.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /'); \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1606.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1612.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1612.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump()\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1613.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1613.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SER)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1614.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER[''])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1614.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1615.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1615.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1616.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFE'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1617.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1617.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1618.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1619.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1620.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1621.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exi\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1622.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1622.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1641.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump();\n    exit;\n\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1642.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    \n\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1643.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1643.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1644.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1644.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1645.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1645.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . $_SERVER['HTTP_REFERER']);  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1647.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1678.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1678.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunc\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1679.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1679.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1680.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction get\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1680.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPath\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1681.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWith\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1681.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId()\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1682.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1682.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1682.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1683.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1683.783,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1684.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1685.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    retu\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1686.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1686.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return ''\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1687.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1688.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId$_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1689.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1691.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1694.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1695.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1696.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1696.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1697.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1697.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($u)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1698.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1699.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1699.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1699.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1700.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1701.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1707.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1708.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if()\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1708.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if()\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1709.516,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1709.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1710.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1710.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset())\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1711.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($par))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1711.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1711.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['q']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1712.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1712.483,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1712.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1712.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1713.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1714.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1714.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1715.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1716.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1716.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1716.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1717.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1717.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1719.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1720.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n  \n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1720.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1721.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1722.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1740.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1740.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1742.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = [];\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1743.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1744.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1744.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1746.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1746.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1746.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_st\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1747.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1753.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($par)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1753.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1754.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1754.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1756.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1756.466,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1757.333,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1757.4,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1761.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1764.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $qu)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1764.833,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1765.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1765.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1766.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1767.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1768.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1768.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1768.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1769.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1770.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1771.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1771.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1772.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1789.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    va\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1789.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1789.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1790.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1797.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1798.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1799.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['pat'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1800.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1800.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1801.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1801.616,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1801.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1802.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1803,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1803.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1804.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1804.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1805.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1805.2,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1805.95,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $q)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1806.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $query)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1806.816,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $query)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1807.266,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1808.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1808.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1809.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1809.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1810.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id']);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1817.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1818.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return ;\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1819.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1819.7,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1819.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1822.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1822.133,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1822.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER'])); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1827.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1828.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1829.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1829.45,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1830.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1830.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1831.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1832.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1846.75,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1848.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1849.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1851.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1853.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1854.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1855.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1857.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) .);  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1857.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . );  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1857.5,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1859.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1859.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1859.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1861.733,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=inva');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1862.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invali');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1862.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invali');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1863.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredene');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1863.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredene');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1864.416,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCreden');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1865.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1865.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1866.666,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1867.25,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1871.166,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1871.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /'); \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1873.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1877.799,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1880.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1880.849,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1900.516,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1901.566,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1903.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1904.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1904.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1905.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1905.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1905.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' =>\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1906.15,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1906.599,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1907.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1907.9,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1908.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET[]\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1908.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1910.683,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1910.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1911.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1911.866,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1912.083,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1912.366,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1912.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ??\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1913.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ??\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1913.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1915.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1916.299,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1917.349,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1918.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1918.583,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1920.099,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if () : ?>\n            \n            <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1921.25,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] ) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1921.45,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if () : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1922.883,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info']) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1923.45,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] ) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1924.049,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1927.633,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            <div class=\"alert alert-danger\">\n                Helytelen bejelentkezési adatok\n            </div>\n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1928.883,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1937.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1937.583,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1938.816,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n            <div class=\"alert alert-success\">\n                Regisztráció sikeres\n            </div>\n        <?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1940.016,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1940.933,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1952.983,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1953.316,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1954.033,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1954.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1955.533,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1956.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1956.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1957.283,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'is'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1957.383,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'is'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1957.583,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegi'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1958.883,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1959.066,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1959.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1959.633,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => 0\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1960.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1960.716,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1961.433,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false,\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1963.216,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1965.2,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1967.033,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1969.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1969.849,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1970.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1970.483,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1972,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1972.616,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1974.049,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1975.733,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
   },
   {
      "timestamp":1978.583,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
   },
   {
      "timestamp":1980.966,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
   },
   {
      "timestamp":1981.75,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
   },
   {
      "timestamp":1982.766,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>"
   },
   {
      "timestamp":1983.316,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n"
   },
   {
      "timestamp":1985.15,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n\n<?php endif ?>\n\n\n"
   },
   {
      "timestamp":1985.9,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<?php endif ?>\n\n\n"
   },
   {
      "timestamp":1986.65,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n\n<?php endif ?>"
   },
   {
      "timestamp":1988.366,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
   },
   {
      "timestamp":1995,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1995.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":1995.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2001.116,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2004.183,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2005.15,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
   },
   {
      "timestamp":2006.533,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n        <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
   },
   {
      "timestamp":2007.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
   },
   {
      "timestamp":2009.466,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
   },
   {
      "timestamp":2011.299,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    \n<?php endif ?>"
   },
   {
      "timestamp":2012.2,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n        <a href=\"\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2013.366,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2017.916,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2020.016,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2020.933,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'ur'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2021.65,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2021.766,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2022.549,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2023.099,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2023.233,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2023.966,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2025.049,
      "fileName":"index.php",
      "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']), \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
   },
   {
      "timestamp":2028.416,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2029.116,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2034.366,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2036.866,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\" \">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2037.849,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2037.983,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Regisztráció</a>\n<?php endif ?>"
   },
   {
      "timestamp":2040.066,
      "fileName":"subscriptionForm.phtml",
      "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>&isRegistration=1\">Regisztráció</a>\n<?php endif ?>"
   }
]